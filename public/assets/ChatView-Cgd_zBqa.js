import{r as y,y as ve,w as ue,p as re,d as u,q as T,e,l as me,t as j,v as ee,z as r,h as F,M as n,H as ye,J as fe,c as p,F as B,E as q,s as R,G as he,o as ge,W as pe,X as Te,I as je,n as Z}from"./vendor-vue-CD-XN-f4.js";import{f as se,l as ie,a as w,h as be,m as xe,c as we,e as Ee,n as ne,d as _e,o as Me}from"./vendor-primevue-DH71VHE2.js";import{_ as le}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Pe={class:"h-full scrollbar-auto-hide p-8 bg-gradient-to-br from-slate-50 to-slate-100"},Oe={class:"bg-white rounded-2xl shadow-lg border border-gray-100 mb-8 overflow-hidden"},Ve={class:"flex items-center justify-between"},Ne={class:"flex items-center gap-2"},Ie={class:"text-sm text-gray-500"},Fe={class:"p-6 transition-all duration-300"},Ue={class:"mb-6"},Le={class:"mb-6"},ze={class:"mb-8"},Je={class:"flex items-center gap-2"},Ae={class:"bg-gradient-to-r from-emerald-500 to-emerald-600 text-white px-3 py-1 rounded-full text-xs font-semibold ml-2"},Re={class:"flex items-center gap-2"},Ye={class:"text-sm text-gray-500"},Be={class:"grid gap-6 grid-cols-1 lg:grid-cols-2 xl:grid-cols-2 transition-all duration-300"},qe={class:"bg-gradient-to-r from-slate-50 to-slate-100 px-6 py-4 flex justify-between items-center border-b border-gray-100"},We={class:"flex items-center gap-3"},Ge={class:"text-base font-bold text-gray-900 m-0"},He={class:"text-sm text-gray-600 mt-1 m-0"},Ke={class:"p-6"},Qe={class:"mb-6"},Xe={class:"mb-6"},Ze={class:"mt-6 pt-6 border-t border-gray-100"},et={class:"flex justify-between items-center mb-4"},tt={class:"flex items-center gap-2"},at={class:"bg-gradient-to-r from-purple-500 to-purple-600 text-white px-2 py-1 rounded-xl text-xs font-semibold ml-2"},st={class:"flex flex-col gap-4"},lt={class:"flex justify-between items-center mb-3"},ot={class:"flex gap-3 flex-1"},it={key:0,class:"mt-3 pt-3 border-t border-gray-200"},rt={key:1,class:"mt-3 pt-3 border-t border-gray-200"},nt={class:"flex justify-end gap-4 mt-8 pt-8 border-t border-gray-100"},dt={__name:"MultiSourceEditModal",props:{visible:{type:Boolean,default:!1},schema:{type:Object,default:()=>({title:"",description:"",dataSources:[]})}},emits:["update:visible","create","cancel"],setup(X,{emit:D}){const d=X,_=D,L=y(!1),P=ve(()=>typeof window>"u"?!1:window.innerWidth<=768),U={root:{class:"rounded-2xl shadow-2xl border border-white/10 backdrop-blur-sm bg-white/95"},header:{class:"bg-gradient-to-r from-indigo-500 to-purple-600 text-white rounded-t-2xl px-6 py-4"},content:{class:"bg-gradient-to-br from-slate-50 to-slate-100 rounded-b-2xl overflow-hidden"}},N=y(!0),S=y(!0),$=y({title:"",description:"",dataSources:[]});ue(()=>d.schema,m=>{m&&($.value=JSON.parse(JSON.stringify(m)))},{immediate:!0,deep:!0}),ue(()=>d.visible,m=>{typeof document<"u"&&(m?document.body.style.overflow="hidden":document.body.style.overflow="")});const J=[{label:"Title",value:"title"},{label:"Rich Text",value:"rich_text"},{label:"Number",value:"number"},{label:"Select",value:"select"},{label:"Multi Select",value:"multi_select"},{label:"Date",value:"date"},{label:"People",value:"people"},{label:"Files",value:"files"},{label:"Checkbox",value:"checkbox"},{label:"URL",value:"url"},{label:"Email",value:"email"},{label:"Phone Number",value:"phone_number"},{label:"Created Time",value:"created_time"},{label:"Created By",value:"created_by"},{label:"Last Edited Time",value:"last_edited_time"},{label:"Last Edited By",value:"last_edited_by"}],W=[{label:"Number",value:"number"},{label:"Percent",value:"percent"},{label:"Dollar",value:"dollar"},{label:"Euro",value:"euro"},{label:"Pound",value:"pound"},{label:"Yen",value:"yen"},{label:"Ruble",value:"ruble"},{label:"Rupee",value:"rupee"},{label:"Won",value:"won"},{label:"Yuan",value:"yuan"}],I=()=>{$.value.dataSources.push({name:"",description:"",properties:[]})},O=m=>{$.value.dataSources.splice(m,1)},Y=m=>{$.value.dataSources[m].properties.push({name:"",type:"rich_text",options:"",format:"number"})},G=(m,l)=>{$.value.dataSources[m].properties.splice(l,1)},H=async()=>{L.value=!0;try{const m={title:$.value.title,description:$.value.description,dataSources:$.value.dataSources.map(l=>({name:l.name,description:l.description,properties:l.properties.reduce((f,b)=>{if(b.name&&b.type){let h={};if(b.type==="select"||b.type==="multi_select"){const K=b.options.split(`
`).filter(M=>M.trim()).map(M=>({name:M.trim(),color:"blue"}));h[b.type]={options:K}}else b.type==="number"?h[b.type]={format:b.format||"number"}:h[b.type]={};f[b.name]=h}return f},{})}))};_("create",m)}finally{L.value=!1}},E=()=>{_("cancel")};return(m,l)=>(u(),re(n(xe),{visible:X.visible,"onUpdate:visible":l[4]||(l[4]=f=>m.$emit("update:visible",f)),position:P.value?"bottom":"right",header:"Review & Edit Multi-Source Database Schema",style:he(P.value?{height:"90vh"}:{width:"95vw",maxWidth:"1400px"}),pt:U},{default:T(()=>[e("div",Pe,[l[17]||(l[17]=e("div",{class:"mb-8"},[e("div",{class:"flex items-center gap-3 mb-4"},[e("div",{class:"w-12 h-12 bg-gradient-to-r from-indigo-500 to-purple-600 rounded-xl flex items-center justify-center shadow-lg"},[e("i",{class:"pi pi-database text-white text-lg"})]),e("div",null,[e("h2",{class:"text-2xl font-bold text-gray-900"},"Database Schema Editor"),e("p",{class:"text-gray-600 mt-1"}," Review and customize your multi-source database schema before creation ")])])],-1)),e("div",Oe,[e("div",{class:"bg-gradient-to-r from-slate-50 to-slate-100 px-6 py-4 border-b border-gray-100 cursor-pointer transition-all duration-200 hover:from-slate-100 hover:to-slate-200 hover:-translate-y-0.5 hover:shadow-md",onClick:l[0]||(l[0]=f=>N.value=!N.value)},[e("div",Ve,[l[5]||(l[5]=e("div",{class:"flex items-center gap-2"},[e("i",{class:"pi pi-cog text-blue-600"}),e("h3",{class:"text-lg font-semibold text-gray-900"},"System Information")],-1)),e("div",Ne,[e("span",Ie,j(N.value?"Hide":"Show"),1),e("i",{class:ee(["pi transition-transform duration-200",N.value?"pi-chevron-up":"pi-chevron-down"])},null,2)])])]),me(e("div",Fe,[e("div",Ue,[l[6]||(l[6]=e("label",{class:"flex items-center font-semibold text-gray-700 mb-2 text-sm"},[e("i",{class:"pi pi-tag mr-2"}),F(" System Title ")],-1)),r(n(se),{modelValue:$.value.title,"onUpdate:modelValue":l[1]||(l[1]=f=>$.value.title=f),class:"w-full border-2 border-gray-200 rounded-lg px-3 py-2 text-sm transition-all duration-200 focus:border-indigo-500 focus:shadow-lg focus:outline-none bg-white",placeholder:"Enter system title"},null,8,["modelValue"])]),e("div",Le,[l[7]||(l[7]=e("label",{class:"flex items-center font-semibold text-gray-700 mb-2 text-sm"},[e("i",{class:"pi pi-file-edit mr-2"}),F(" System Description ")],-1)),r(n(ie),{modelValue:$.value.description,"onUpdate:modelValue":l[2]||(l[2]=f=>$.value.description=f),class:"w-full border-2 border-gray-200 rounded-lg px-3 py-2 text-sm transition-all duration-200 focus:border-indigo-500 focus:shadow-lg focus:outline-none bg-white resize-none",rows:"3",placeholder:"Enter system description"},null,8,["modelValue"])])],512),[[ye,N.value]])]),e("div",ze,[e("div",{class:"flex justify-between items-center mb-6 py-4 cursor-pointer transition-all duration-200 hover:-translate-y-0.5 hover:shadow-sm",onClick:l[3]||(l[3]=f=>S.value=!S.value)},[e("div",Je,[l[8]||(l[8]=e("i",{class:"pi pi-list text-green-600"},null,-1)),l[9]||(l[9]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Data Sources",-1)),e("span",Ae,j($.value.dataSources.length),1)]),e("div",Re,[r(n(w),{icon:"pi pi-plus",label:"Add Data Source",size:"small",class:"bg-gradient-to-r from-emerald-500 to-emerald-600 border-none rounded-lg px-4 py-2 text-white font-semibold transition-all duration-200 hover:-translate-y-0.5 hover:shadow-lg",onClick:fe(I,["stop"])}),e("span",Ye,j(S.value?"Hide":"Show"),1),e("i",{class:ee(["pi transition-transform duration-200",S.value?"pi-chevron-up":"pi-chevron-down"])},null,2)])]),me(e("div",Be,[(u(!0),p(B,null,q($.value.dataSources,(f,b)=>(u(),p("div",{key:b,class:"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden transition-all duration-300 hover:-translate-y-1 hover:shadow-xl"},[e("div",qe,[e("div",We,[l[10]||(l[10]=e("div",{class:"w-10 h-10 bg-gradient-to-r from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center shadow-md"},[e("i",{class:"pi pi-table text-white text-sm"})],-1)),e("div",null,[e("h4",Ge," Data Source "+j(b+1),1),e("p",He,j(f.name||"Untitled"),1)])]),$.value.dataSources.length>1?(u(),re(n(w),{key:0,icon:"pi pi-trash",severity:"danger",text:"",size:"small",class:"opacity-70 transition-all duration-200 hover:opacity-100 hover:scale-110",onClick:h=>O(b)},null,8,["onClick"])):R("",!0)]),e("div",Ke,[e("div",Qe,[l[11]||(l[11]=e("label",{class:"flex items-center font-semibold text-gray-700 mb-2 text-sm"},[e("i",{class:"pi pi-tag mr-2"}),F(" Data Source Name ")],-1)),r(n(se),{modelValue:f.name,"onUpdate:modelValue":h=>f.name=h,class:"w-full border-2 border-gray-200 rounded-lg px-3 py-2 text-sm transition-all duration-200 focus:border-indigo-500 focus:shadow-lg focus:outline-none bg-white",placeholder:"Enter data source name"},null,8,["modelValue","onUpdate:modelValue"])]),e("div",Xe,[l[12]||(l[12]=e("label",{class:"flex items-center font-semibold text-gray-700 mb-2 text-sm"},[e("i",{class:"pi pi-file-edit mr-2"}),F(" Description ")],-1)),r(n(ie),{modelValue:f.description,"onUpdate:modelValue":h=>f.description=h,class:"w-full border-2 border-gray-200 rounded-lg px-3 py-2 text-sm transition-all duration-200 focus:border-indigo-500 focus:shadow-lg focus:outline-none bg-white resize-none",rows:"2",placeholder:"Enter data source description"},null,8,["modelValue","onUpdate:modelValue"])]),e("div",Ze,[e("div",et,[e("div",tt,[l[13]||(l[13]=e("i",{class:"pi pi-th-large text-purple-600"},null,-1)),l[14]||(l[14]=e("label",{class:"font-semibold text-gray-700 text-sm"},"Properties",-1)),e("span",at,j(f.properties.length),1)]),r(n(w),{icon:"pi pi-plus",label:"Add Property",size:"small",class:"bg-gradient-to-r from-purple-500 to-purple-600 border-none rounded-md px-3 py-1.5 text-white font-semibold text-xs transition-all duration-200 hover:-translate-y-0.5 hover:shadow-lg",onClick:h=>Y(b)},null,8,["onClick"])]),e("div",st,[(u(!0),p(B,null,q(f.properties,(h,K)=>(u(),p("div",{key:K,class:"bg-gradient-to-r from-slate-50 to-slate-100 border border-gray-200 rounded-xl p-4 transition-all duration-200 hover:border-indigo-300 hover:shadow-md"},[e("div",lt,[e("div",ot,[r(n(se),{modelValue:h.name,"onUpdate:modelValue":M=>h.name=M,placeholder:"Property name",class:"flex-2 border border-gray-300 rounded-md px-2 py-1.5 text-sm transition-all duration-200 focus:border-indigo-500 focus:shadow-sm focus:outline-none"},null,8,["modelValue","onUpdate:modelValue"]),r(n(be),{modelValue:h.type,"onUpdate:modelValue":M=>h.type=M,options:J,optionLabel:"label",optionValue:"value",placeholder:"Type",class:"flex-1 min-w-[120px]"},null,8,["modelValue","onUpdate:modelValue"])]),r(n(w),{icon:"pi pi-trash",severity:"danger",text:"",size:"small",class:"opacity-60 transition-all duration-200 hover:opacity-100 hover:scale-110",onClick:M=>G(b,K)},null,8,["onClick"])]),h.type==="select"||h.type==="multi_select"?(u(),p("div",it,[l[15]||(l[15]=e("label",{class:"flex items-center text-xs font-semibold text-gray-600 mb-2"},[e("i",{class:"pi pi-list mr-1"}),F(" Options (one per line) ")],-1)),r(n(ie),{modelValue:h.options,"onUpdate:modelValue":M=>h.options=M,rows:"2",class:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm resize-y transition-all duration-200 focus:border-indigo-500 focus:shadow-sm focus:outline-none",placeholder:`Option 1
Option 2
Option 3`},null,8,["modelValue","onUpdate:modelValue"])])):R("",!0),h.type==="number"?(u(),p("div",rt,[l[16]||(l[16]=e("label",{class:"flex items-center text-xs font-semibold text-gray-600 mb-2"},[e("i",{class:"pi pi-calculator mr-1"}),F(" Format ")],-1)),r(n(be),{modelValue:h.format,"onUpdate:modelValue":M=>h.format=M,options:W,optionLabel:"label",optionValue:"value",placeholder:"Format",class:"w-full max-w-[200px]"},null,8,["modelValue","onUpdate:modelValue"])])):R("",!0)]))),128))])])])]))),128))],512),[[ye,S.value]])]),e("div",nt,[r(n(w),{label:"Cancel",severity:"secondary",class:"bg-gray-100 border border-gray-300 text-gray-700 rounded-lg px-6 py-3 font-semibold transition-all duration-200 hover:bg-gray-200 hover:-translate-y-0.5",onClick:E}),r(n(w),{label:"Create Databases",class:"bg-gradient-to-r from-indigo-500 to-purple-600 border-none text-white rounded-lg px-6 py-3 font-semibold transition-all duration-200 hover:-translate-y-0.5 hover:shadow-lg",onClick:H,loading:L.value},null,8,["loading"])])])]),_:1},8,["visible","position","style"]))}},ke=le(dt,[["__scopeId","data-v-8a9f4631"]]),ct={class:"bg-gradient-to-br from-slate-50 to-slate-100"},ut={class:"px-4 my-8"},mt={class:"flex flex-col md:flex-row items-center justify-between gap-4 md:gap-0"},pt={class:"flex flex-wrap gap-2 md:gap-3 items-center justify-center md:justify-end w-full"},bt={key:0,class:"flex items-center justify-center min-h-96 px-8"},vt={class:"text-center max-w-md"},yt={key:1,class:"grid grid-cols-1 sm:grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4 md:gap-6 px-2 md:px-4 pb-4"},ft={class:"flex justify-between items-start mb-3 md:mb-4"},ht={class:"flex-1 min-w-0"},gt={class:"text-lg md:text-xl font-semibold text-slate-800 mb-1 md:mb-2 truncate"},xt={class:"text-xs md:text-sm text-slate-600 mb-2 md:mb-3 leading-relaxed line-clamp-2"},wt={class:"flex items-center gap-2 md:gap-3 flex-wrap"},_t={class:"text-xs text-slate-500 font-medium"},kt={key:0,class:"px-2 md:px-3 py-1 bg-gradient-to-r from-blue-500 to-blue-600 text-white text-xs font-semibold rounded-full uppercase tracking-wide"},Ct={key:1,class:"px-2 md:px-3 py-1 bg-gradient-to-r from-slate-200 to-slate-300 text-slate-600 text-xs font-semibold rounded-full uppercase tracking-wide"},St={class:"flex gap-2"},$t={class:"space-y-4"},Dt={class:"flex items-center gap-2"},Tt={key:0,class:"bg-gray-50 p-4 rounded-lg"},jt={class:"text-sm text-gray-600"},Et={class:"list-disc list-inside mt-2"},Mt={class:"flex justify-end gap-2"},Pt={__name:"TemplateEditor",emits:["template-deployed"],setup(X,{emit:D}){const d=D,_=we(),L=y([]),P=y(!1),U=y(!1),N=y(null),S=y(null),$=y(!1),J=y(!1),W=y(!1),I=y(""),O=y(null),Y=y(!1),G=y({title:"",description:"",dataSources:[]});y([{label:"Title",value:"title"},{label:"Text",value:"rich_text"},{label:"Number",value:"number"},{label:"Select",value:"select"},{label:"Multi-select",value:"multi_select"},{label:"Date",value:"date"},{label:"People",value:"people"},{label:"Files",value:"files"},{label:"Checkbox",value:"checkbox"},{label:"URL",value:"url"},{label:"Email",value:"email"},{label:"Phone",value:"phone_number"},{label:"Created Time",value:"created_time"},{label:"Last Edited Time",value:"last_edited_time"}]),y([{label:"Gray",value:"gray"},{label:"Blue",value:"blue"},{label:"Green",value:"green"},{label:"Yellow",value:"yellow"},{label:"Orange",value:"orange"},{label:"Red",value:"red"},{label:"Purple",value:"purple"},{label:"Pink",value:"pink"}]),y([{label:"Number",value:"number"},{label:"Dollar",value:"dollar"},{label:"Percent",value:"percent"}]);const H=async()=>{try{const o=await(await fetch("/.netlify/functions/automation-engine",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"list_templates"})})).json();L.value=o.templates||[]}catch(x){console.error("Error loading templates:",x),_.add({severity:"error",summary:"Error",detail:"Failed to load templates",life:5e3})}},E=()=>{G.value={title:"",description:"",dataSources:[{name:"Main Database",description:"Primary database for this template",properties:[{name:"Name",type:"title",options:"",format:"number"}]}]},N.value=null,S.value=null,W.value=!1,I.value="",P.value=!0},m=async x=>{try{const o=await fetch("/.netlify/functions/automation-engine",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"get_template_schema",payload:{templateId:x.id}})});if(o.ok){const c=await o.json();G.value={title:c.schema?.title||x.title,description:c.schema?.description||x.description,dataSources:[{name:"Main Database",description:"Primary database for this template",properties:Object.entries(c.schema?.properties||{}).map(([k,g])=>{let C="rich_text",Q="",oe="number";return g.title?C="title":g.rich_text?C="rich_text":g.number?(C="number",oe=g.number.format||"number"):g.select?(C="select",Q=g.select.options?g.select.options.map(te=>te.name).join(`
`):""):g.multi_select?(C="multi_select",Q=g.multi_select.options?g.multi_select.options.map(te=>te.name).join(`
`):""):g.date?C="date":g.people?C="people":g.files?C="files":g.checkbox?C="checkbox":g.url?C="url":g.email?C="email":g.phone_number?C="phone_number":g.created_time?C="created_time":g.created_by?C="created_by":g.last_edited_time?C="last_edited_time":g.last_edited_by&&(C="last_edited_by"),{name:k,type:C,options:Q,format:oe}})}]},N.value={...x},S.value=x.id,P.value=!0}else throw new Error("Failed to load template schema")}catch(o){console.error("Error loading template:",o),_.add({severity:"error",summary:"Error",detail:"Failed to load template details",life:5e3})}},l=async x=>{const o={id:N.value?.id||`template_${Date.now()}`,title:x.title,description:x.description,properties:{}};if(x.dataSources.length>0&&x.dataSources[0].properties.forEach(k=>{if(k.name&&k.type){let g={};if(k.type==="select"||k.type==="multi_select"){const C=k.options.split(`
`).filter(Q=>Q.trim()).map(Q=>({name:Q.trim(),color:"blue"}));g[k.type]={options:C}}else k.type==="number"?g[k.type]={format:k.format||"number"}:g[k.type]={};o.properties[k.name]=g}}),W.value&&I.value)try{o.sampleData=JSON.parse(I.value)}catch{_.add({severity:"warn",summary:"Invalid JSON",detail:"Sample data must be valid JSON",life:5e3});return}$.value=!0;try{const c=S.value?"update_template":"save_template",k=S.value?{templateId:S.value,updates:o}:{templateId:o.id,template:o},C=await(await fetch("/.netlify/functions/automation-engine",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:c,payload:k})})).json();if(C.success)_.add({severity:"success",summary:"Success",detail:C.message,life:5e3}),P.value=!1,await H();else throw new Error(C.error||"Failed to save template")}catch(c){console.error("Error saving template:",c),_.add({severity:"error",summary:"Error",detail:c.message,life:5e3})}finally{$.value=!1}},f=()=>{P.value=!1,N.value=null,S.value=null},b=async x=>{const o=`${x.id}_copy_${Date.now()}`;try{const k=await(await fetch("/.netlify/functions/automation-engine",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"duplicate_template",payload:{templateId:x.id,newTemplateId:o,customizations:{title:`${x.title} (Copy)`}}})})).json();if(k.success)_.add({severity:"success",summary:"Success",detail:"Template duplicated successfully",life:5e3}),await H();else throw new Error(k.error||"Failed to duplicate template")}catch(c){console.error("Error duplicating template:",c),_.add({severity:"error",summary:"Error",detail:c.message,life:5e3})}},h=async x=>{try{const c=await(await fetch("/.netlify/functions/automation-engine",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"deploy_template",payload:{templateId:x.id,includeSampleData:!0}})})).json();if(c.database)_.add({severity:"success",summary:"Success",detail:`Database "${c.database.title}" created successfully!`,life:5e3}),d("template-deployed",c.database);else throw new Error("Failed to create database")}catch(o){console.error("Error deploying template:",o),_.add({severity:"error",summary:"Error",detail:"Failed to deploy template",life:5e3})}},K=async()=>{try{const o=await(await fetch("/.netlify/functions/automation-engine",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"export_templates"})})).json(),c=new Blob([JSON.stringify(o,null,2)],{type:"application/json"}),k=URL.createObjectURL(c),g=document.createElement("a");g.href=k,g.download="notion-templates.json",g.click(),URL.revokeObjectURL(k),_.add({severity:"success",summary:"Success",detail:"Templates exported successfully",life:5e3})}catch(x){console.error("Error exporting templates:",x),_.add({severity:"error",summary:"Error",detail:"Failed to export templates",life:5e3})}},M=()=>{U.value=!0,O.value=null},de=x=>{const o=x.target.files[0];if(!o)return;const c=new FileReader;c.onload=k=>{try{O.value=JSON.parse(k.target.result)}catch{_.add({severity:"error",summary:"Invalid File",detail:"Selected file is not valid JSON",life:5e3})}},c.readAsText(o)},ce=async()=>{if(O.value){J.value=!0;try{const o=await(await fetch("/.netlify/functions/automation-engine",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"import_templates",payload:{templates:O.value.templates,overwrite:Y.value}})})).json();if(o.success)_.add({severity:"success",summary:"Success",detail:o.message,life:5e3}),U.value=!1,await H();else throw new Error(o.error||"Failed to import templates")}catch(x){console.error("Error importing templates:",x),_.add({severity:"error",summary:"Error",detail:x.message,life:5e3})}finally{J.value=!1}}};return ge(()=>{H()}),(x,o)=>(u(),p("div",ct,[e("div",ut,[e("div",mt,[e("div",pt,[r(n(w),{onClick:M,severity:"secondary",outlined:"",class:"bg-gradient-to-r from-blue-500 to-blue-600 border-blue-400 text-white backdrop-blur-sm hover:from-blue-600 hover:to-blue-700 hover:-translate-y-0.5 transition-all duration-300 text-sm font-medium"},{default:T(()=>o[4]||(o[4]=[e("i",{class:"pi pi-upload mr-2"},null,-1),F(" Import ",-1)])),_:1,__:[4]}),r(n(w),{onClick:K,severity:"secondary",outlined:"",class:"bg-gradient-to-r from-purple-500 to-purple-600 border-purple-400 text-white backdrop-blur-sm hover:from-purple-600 hover:to-purple-700 hover:-translate-y-0.5 transition-all duration-300 text-sm font-medium"},{default:T(()=>o[5]||(o[5]=[e("i",{class:"pi pi-download mr-2"},null,-1),F(" Export ",-1)])),_:1,__:[5]}),r(n(w),{onClick:E,class:"bg-gradient-to-r from-amber-500 to-orange-600 text-white font-semibold px-4 md:px-6 py-2 md:py-3 rounded-xl shadow-lg hover:shadow-xl hover:-translate-y-0.5 transition-all duration-300 text-sm md:text-base"},{default:T(()=>o[6]||(o[6]=[e("i",{class:"pi pi-plus mr-2"},null,-1),F(" New Template ",-1)])),_:1,__:[6]})])])]),L.value.length===0?(u(),p("div",bt,[e("div",vt,[o[8]||(o[8]=e("div",{class:"w-20 h-20 bg-gradient-to-br from-slate-200 to-slate-300 rounded-3xl flex items-center justify-center mx-auto mb-6 text-slate-500 text-3xl"},[e("i",{class:"pi pi-inbox"})],-1)),o[9]||(o[9]=e("h3",{class:"text-2xl font-semibold text-slate-800 mb-2"},"No Templates Found",-1)),o[10]||(o[10]=e("p",{class:"text-slate-600 mb-8 leading-relaxed"},"Create your first template to get started with database automation",-1)),r(n(w),{onClick:E,class:"bg-gradient-to-r from-indigo-500 to-purple-600 text-white font-semibold px-8 py-4 rounded-xl shadow-lg hover:shadow-xl hover:-translate-y-0.5 transition-all duration-300"},{default:T(()=>o[7]||(o[7]=[e("i",{class:"pi pi-plus mr-2"},null,-1),F(" Create First Template ",-1)])),_:1,__:[7]})])])):(u(),p("div",yt,[(u(!0),p(B,null,q(L.value,c=>(u(),p("div",{key:c.id,class:"bg-white rounded-2xl p-2 shadow-lg border border-slate-200/50 transition-all duration-300 hover:-translate-y-1 hover:shadow-2xl relative overflow-hidden group"},[o[14]||(o[14]=e("div",{class:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-indigo-500 to-purple-600"},null,-1)),e("div",ft,[e("div",ht,[e("h3",gt,j(c.title),1),e("p",xt,j(c.description),1),e("div",wt,[e("span",_t,j(c.propertyCount)+" properties",1),c.custom?(u(),p("span",kt,"Custom")):(u(),p("span",Ct,"System"))])])]),e("div",St,[r(n(w),{onClick:k=>m(c),size:"small",severity:"secondary",outlined:"",class:"flex-1 text-xs md:text-sm font-medium rounded-lg transition-all duration-200 hover:bg-slate-50"},{default:T(()=>o[11]||(o[11]=[e("i",{class:"pi pi-pencil mr-1"},null,-1),F(" Edit ",-1)])),_:2,__:[11]},1032,["onClick"]),r(n(w),{onClick:k=>b(c),size:"small",severity:"secondary",outlined:"",class:"flex-1 text-xs md:text-sm font-medium rounded-lg transition-all duration-200 hover:bg-slate-50"},{default:T(()=>o[12]||(o[12]=[e("i",{class:"pi pi-copy mr-1"},null,-1),F(" Copy ",-1)])),_:2,__:[12]},1032,["onClick"]),r(n(w),{onClick:k=>h(c),size:"small",class:"flex-1 bg-gradient-to-r from-emerald-500 to-emerald-600 text-white font-semibold rounded-lg shadow-md hover:shadow-lg hover:-translate-y-0.5 transition-all duration-300"},{default:T(()=>o[13]||(o[13]=[e("i",{class:"pi pi-bolt mr-1"},null,-1),F(" Deploy ",-1)])),_:2,__:[13]},1032,["onClick"])])]))),128))])),r(ke,{visible:P.value,"onUpdate:visible":o[0]||(o[0]=c=>P.value=c),schema:G.value,onCreate:l,onCancel:f},null,8,["visible","schema"]),r(n(ne),{visible:U.value,"onUpdate:visible":o[3]||(o[3]=c=>U.value=c),header:"Import Templates",modal:"",class:"w-full max-w-2xl"},{footer:T(()=>[e("div",Mt,[r(n(w),{onClick:o[2]||(o[2]=c=>U.value=!1),severity:"secondary",outlined:""},{default:T(()=>o[18]||(o[18]=[F(" Cancel ",-1)])),_:1,__:[18]}),r(n(w),{onClick:ce,disabled:!O.value,loading:J.value},{default:T(()=>o[19]||(o[19]=[F(" Import Templates ",-1)])),_:1,__:[19]},8,["disabled","loading"])])]),default:T(()=>[e("div",$t,[e("div",null,[o[15]||(o[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Select JSON File",-1)),e("input",{type:"file",accept:".json",onChange:de,class:"w-full p-2 border border-gray-300 rounded-lg"},null,32)]),e("div",Dt,[r(n(Ee),{modelValue:Y.value,"onUpdate:modelValue":o[1]||(o[1]=c=>Y.value=c),inputId:"overwrite"},null,8,["modelValue"]),o[16]||(o[16]=e("label",{for:"overwrite",class:"text-sm text-gray-700"},"Overwrite existing templates",-1))]),O.value?(u(),p("div",Tt,[o[17]||(o[17]=e("h4",{class:"font-medium text-gray-900 mb-2"},"Preview",-1)),e("div",jt,[e("p",null,j(Object.keys(O.value.templates||{}).length)+" templates found",1),e("ul",Et,[(u(!0),p(B,null,q(Object.keys(O.value.templates||{}),c=>(u(),p("li",{key:c},j(c),1))),128))])])])):R("",!0)])]),_:1},8,["visible"]),r(n(_e))]))}},Ot=le(Pt,[["__scopeId","data-v-fc374604"]]),Vt={class:"database-edit-container"},Nt={class:"schemas-list"},It={class:"schema-header flex items-center justify-between mb-3"},Ft={class:"text-lg font-semibold text-gray-800"},Ut={class:"mb-3"},Lt={class:"mb-3"},zt={class:"properties-section"},Jt={class:"flex items-center justify-between mb-2"},At={class:"properties-list space-y-2"},Rt={class:"flex-1"},Yt={class:"w-32"},Bt={key:0,class:"w-24"},qt={class:"text-center mb-4"},Wt={class:"flex justify-between"},Gt={class:"flex gap-2"},Ht={class:"preview-content"},Kt={class:"text-lg font-semibold mb-2"},Qt={class:"text-gray-600 mb-3"},Xt={class:"properties-preview"},Zt={class:"grid grid-cols-2 gap-2"},ea={class:"font-medium"},ta={class:"text-gray-600"},aa={__name:"DatabaseEditModal",props:{schemas:{type:Array,required:!0},visible:{type:Boolean,default:!1}},emits:["update:visible","create","cancel"],setup(X,{emit:D}){const d=X,_=D,L=ve({get:()=>d.visible,set:E=>_("update:visible",E)}),P=y(!1),U=y(!1),N=[{label:"Title",value:"title"},{label:"Rich Text",value:"rich_text"},{label:"Number",value:"number"},{label:"Select",value:"select"},{label:"Multi Select",value:"multi_select"},{label:"Date",value:"date"},{label:"People",value:"people"},{label:"Files",value:"files"},{label:"Checkbox",value:"checkbox"},{label:"URL",value:"url"},{label:"Email",value:"email"},{label:"Phone Number",value:"phone_number"}],S=y(d.schemas.map(E=>({...E,properties:Object.entries(E.properties||{}).map(([m,l])=>({name:m,type:Object.keys(l)[0],options:l.select?.options||l.multi_select?.options||[]}))}))),$=E=>{const m={name:"",type:"rich_text",options:[]};S.value[E].properties.push(m)},J=(E,m)=>{S.value[E].properties.splice(m,1)},W=()=>{S.value.push({title:"",description:"",properties:[]})},I=E=>{S.value.splice(E,1)},O=(E,m)=>{console.log("Edit property options:",E,m)},Y=()=>{P.value=!0},G=async()=>{U.value=!0;try{const E=S.value.map(m=>({title:m.title,description:m.description,properties:m.properties.reduce((l,f)=>(f.name&&f.type&&(l[f.name]={[f.type]:{}}),l),{})}));_("create",E)}finally{U.value=!1}},H=()=>{_("cancel")};return(E,m)=>(u(),re(n(ne),{visible:L.value,"onUpdate:visible":m[2]||(m[2]=l=>L.value=l),modal:"",header:"Review & Edit Database Schemas",style:{width:"90vw",maxWidth:"1200px"},closable:!1},{footer:T(()=>[e("div",Wt,[r(n(w),{label:"Cancel",severity:"secondary",onClick:H}),e("div",Gt,[r(n(w),{label:"Preview",icon:"pi pi-eye",outlined:"",onClick:Y}),r(n(w),{label:"Create Databases",icon:"pi pi-check",onClick:G,loading:U.value},null,8,["loading"])])])]),default:T(()=>[e("div",Vt,[m[6]||(m[6]=e("div",{class:"mb-4"},[e("p",{class:"text-gray-600 mb-3"}," Review the generated database schemas below. You can edit names, descriptions, and properties before creating the databases. ")],-1)),e("div",Nt,[(u(!0),p(B,null,q(S.value,(l,f)=>(u(),p("div",{key:f,class:"schema-card mb-4 p-4 border border-gray-200 rounded-lg"},[e("div",It,[e("h3",Ft," Database "+j(f+1),1),S.value.length>1?(u(),re(n(w),{key:0,icon:"pi pi-trash",severity:"danger",text:"",size:"small",onClick:b=>I(f)},null,8,["onClick"])):R("",!0)]),e("div",Ut,[m[3]||(m[3]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Database Name ",-1)),r(n(se),{modelValue:l.title,"onUpdate:modelValue":b=>l.title=b,class:"w-full",placeholder:"Enter database name"},null,8,["modelValue","onUpdate:modelValue"])]),e("div",Lt,[m[4]||(m[4]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Description ",-1)),r(n(ie),{modelValue:l.description,"onUpdate:modelValue":b=>l.description=b,class:"w-full",rows:"2",placeholder:"Enter database description"},null,8,["modelValue","onUpdate:modelValue"])]),e("div",zt,[e("div",Jt,[m[5]||(m[5]=e("label",{class:"text-sm font-medium text-gray-700"}," Properties ",-1)),r(n(w),{icon:"pi pi-plus",label:"Add Property",size:"small",onClick:b=>$(f)},null,8,["onClick"])]),e("div",At,[(u(!0),p(B,null,q(l.properties,(b,h,K)=>(u(),p("div",{key:h,class:"property-item flex items-center gap-2 p-2 bg-gray-50 rounded"},[e("div",Rt,[r(n(se),{modelValue:b.name,"onUpdate:modelValue":M=>b.name=M,placeholder:"Property name",class:"w-full"},null,8,["modelValue","onUpdate:modelValue"])]),e("div",Yt,[r(n(be),{modelValue:b.type,"onUpdate:modelValue":M=>b.type=M,options:N,"option-label":"label","option-value":"value",placeholder:"Type",class:"w-full"},null,8,["modelValue","onUpdate:modelValue"])]),b.type==="select"||b.type==="multi_select"?(u(),p("div",Bt,[r(n(w),{icon:"pi pi-cog",size:"small",onClick:M=>O(f,h)},null,8,["onClick"])])):R("",!0),r(n(w),{icon:"pi pi-trash",severity:"danger",text:"",size:"small",onClick:M=>J(f,h)},null,8,["onClick"])]))),128))])])]))),128))]),e("div",qt,[r(n(w),{icon:"pi pi-plus",label:"Add Another Database",outlined:"",onClick:W})])]),r(n(ne),{visible:P.value,"onUpdate:visible":m[1]||(m[1]=l=>P.value=l),modal:"",header:"Database Preview",style:{width:"80vw",maxWidth:"1000px"}},{footer:T(()=>[r(n(w),{label:"Close",onClick:m[0]||(m[0]=l=>P.value=!1)})]),default:T(()=>[e("div",Ht,[(u(!0),p(B,null,q(S.value,(l,f)=>(u(),p("div",{key:f,class:"preview-schema mb-4 p-4 border border-gray-200 rounded-lg"},[e("h3",Kt,j(l.title),1),e("p",Qt,j(l.description),1),e("div",Xt,[m[7]||(m[7]=e("h4",{class:"font-medium mb-2"},"Properties:",-1)),e("div",Zt,[(u(!0),p(B,null,q(l.properties,(b,h)=>(u(),p("div",{key:h,class:"property-preview p-2 bg-gray-50 rounded text-sm"},[e("span",ea,j(b.name)+":",1),e("span",ta,j(b.type),1)]))),128))])])]))),128))])]),_:1},8,["visible"])]),_:1},8,["visible"]))}},sa=le(aa,[["__scopeId","data-v-e3f1174e"]]),la={class:"absolute inset-0 z-0 pointer-events-none"},oa={__name:"AnimatedBackground",setup(X){return(D,d)=>(u(),p("div",la,d[0]||(d[0]=[pe('<div class="absolute top-20 left-10 w-32 h-32 bg-gradient-to-br from-blue-400/25 to-purple-500/25 rounded-full animate-float-slow" data-v-7f525fdb></div><div class="absolute top-40 right-20 w-24 h-24 bg-gradient-to-br from-purple-400/25 to-pink-500/25 rounded-full animate-float-medium" data-v-7f525fdb></div><div class="absolute bottom-32 left-1/4 w-40 h-40 bg-gradient-to-br from-indigo-400/25 to-blue-500/25 rounded-full animate-float-slow" data-v-7f525fdb></div><div class="absolute bottom-20 right-1/3 w-28 h-28 bg-gradient-to-br from-pink-400/25 to-purple-500/25 rounded-full animate-float-medium" data-v-7f525fdb></div><div class="absolute top-1/3 left-1/2 w-20 h-20 bg-gradient-to-br from-cyan-400/20 to-blue-500/20 rotate-45 animate-spin-slow" data-v-7f525fdb></div><div class="absolute top-2/3 right-1/4 w-16 h-16 bg-gradient-to-br from-emerald-400/20 to-teal-500/20 rounded-lg animate-bounce-gentle" data-v-7f525fdb></div><div class="absolute top-1/4 right-1/2 w-12 h-12 bg-gradient-to-br from-violet-400/20 to-purple-500/20 rounded-full animate-pulse-slow" data-v-7f525fdb></div><div class="absolute top-16 right-1/3 w-8 h-8 bg-gradient-to-br from-yellow-400/30 to-orange-500/30 rounded-full animate-bounce-slow" data-v-7f525fdb></div><div class="absolute bottom-1/3 left-16 w-6 h-6 bg-gradient-to-br from-rose-400/30 to-pink-500/30 rounded-full animate-ping-slow" data-v-7f525fdb></div><div class="absolute top-1/2 left-8 w-10 h-10 bg-gradient-to-br from-sky-400/30 to-cyan-500/30 rounded-full animate-pulse-medium" data-v-7f525fdb></div>',10)])))}},ia=le(oa,[["__scopeId","data-v-7f525fdb"]]),ra={class:"relative overflow-hidden bg-gradient-to-br from-gray-100 to-blue-100 min-h-screen"},na={class:"relative z-10 bg-transparent"},da={key:0,class:"flex items-center justify-between mb-4 pb-4 border-b border-gray-200 px-4 pt-4"},ca={key:1,class:"flex items-center justify-center bg-transparent px-4 py-8"},ua={class:"text-center bg-transparent"},ma={class:"mb-12 pb-8 md:mb-16 md:pb-12"},pa={class:"bg-gray-900/20 backdrop-blur-md rounded-xl pl-4 relative flex items-center border-2 border-transparent",style:{background:"linear-gradient(to bottom right, rgba(17, 24, 39, 0.2), rgba(17, 24, 39, 0.2)) padding-box, linear-gradient(135deg, #3b82f6, #8b5cf6) border-box"}},ba=["onKeydown"],va={class:"mt-8 flex items-center justify-center gap-3 mb-6 p-4 bg-white/20 backdrop-blur-sm rounded-xl border border-white/30 glass-gradient-border hover:bg-white/30 hover:shadow-lg transition-all duration-300 cursor-pointer group"},ya={key:0,class:"mb-8"},fa={class:"flex items-center justify-between mb-4"},ha={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},ga=["onClick","disabled"],xa={class:"flex items-center justify-between"},wa={class:"font-medium text-gray-900 group-hover:text-blue-600"},_a={class:"text-xs text-gray-500 mt-1"},ka={key:0,class:"inline-block px-2 py-1 mt-1 text-xs bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-full"},Ca={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-8"},Sa=["onClick"],$a={class:"flex items-start gap-3"},Da={class:"font-medium text-gray-900 group-hover:text-blue-600 transition-colors duration-300"},Ta={class:"text-sm text-gray-600 mt-1 group-hover:text-gray-700 transition-colors duration-300"},ja={class:"flex flex-wrap justify-center gap-3"},Ea=["onClick"],Ma={key:2,class:"scrollbar-auto-hide space-y-6 py-4 px-4"},Pa={key:0,class:"flex-shrink-0"},Oa={key:0,class:"mb-3"},Va=["innerHTML"],Na={key:1,class:"mt-4 p-4 bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg border border-blue-200"},Ia={class:"flex items-center justify-between"},Fa={class:"flex items-center gap-3"},Ua={class:"font-semibold text-gray-900"},La={class:"text-sm text-gray-600"},za={class:"flex gap-2"},Ja={key:1,class:"flex-shrink-0"},Aa={key:0,class:"flex gap-4"},Ra={class:"box-border bg-gradient-to-br from-slate-50 to-slate-100"},Ya={class:"flex justify-end gap-2"},Ba={__name:"ChatView",setup(X){const D=we(),d=y([]),_=y(""),L=y(!1),P=y(!1),U=y(!1),N=y([]),S=y(!1),$=y(!1),J=y(!1),W=y([]),I=y(!1),O=y({}),Y=y(!1),G=ve(()=>typeof window>"u"?!1:window.innerWidth<=768),H={root:{class:"rounded-3xl shadow-2xl border border-white/10 backdrop-blur-sm bg-white/95"},header:{class:"bg-gradient-to-r from-indigo-500 to-purple-600 text-white rounded-t-3xl px-6 pt-4 pb-4"},content:{class:"bg-gradient-to-br from-slate-50 to-slate-100 rounded-b-3xl"}};ue(U,async s=>{s&&N.value.length===0&&await k()});const E=y([{icon:"pi pi-database",title:"Create Project Management System",description:"Generate a comprehensive project management system",text:"Create a comprehensive project management system with projects, tasks, team members, and milestones"},{icon:"pi pi-users",title:"Customer Management System",description:"Build a complete CRM system",text:"Create a comprehensive customer relationship management system with customers, interactions, and sales tracking"},{icon:"pi pi-book",title:"Content Management System",description:"Organize articles, resources, and documentation",text:"Create a comprehensive content management system with articles, categories, authors, and publishing workflow"},{icon:"pi pi-chart-line",title:"Analytics Dashboard System",description:"Track metrics and performance data",text:"Create a comprehensive analytics system with metrics, reports, dashboards, and data sources"}]),m=y([{icon:"pi pi-calendar",label:"Event System",prompt:"Create a comprehensive event management system with events, attendees, and venues"},{icon:"pi pi-shopping-cart",label:"Inventory System",prompt:"Create a comprehensive inventory management system with products, suppliers, and stock tracking"},{icon:"pi pi-graduation-cap",label:"Learning System",prompt:"Create a comprehensive learning management system with courses, students, and progress tracking"},{icon:"pi pi-heart",label:"Wellness System",prompt:"Create a comprehensive wellness tracking system with habits, goals, and health metrics"},{icon:"pi pi-store",label:"E-Commerce System",prompt:"Create a comprehensive e-commerce system with products, orders, and customers",action:"ecommerce"},{icon:"pi pi-th-large",label:"E-Com Individual",prompt:"Create a comprehensive e-commerce system with products, orders, and customers as individual data sources",action:"individual_ecommerce"}]),l=(s,t=null)=>{t==="ecommerce"?ce():t==="individual_ecommerce"?de():(_.value=s,b())},f=s=>{s.key==="Enter"&&!s.shiftKey&&b()},b=async()=>{if(!_.value.trim()||L.value)return;const s={id:Date.now()+Math.random(),role:"user",content:_.value.trim(),timestamp:new Date};d.value.push(s);const t=_.value.trim();_.value="",L.value=!0;try{if(U.value){const z=await g(t);if(z&&z.confidence>.8){await C(z.suggestedTemplate,{title:z.customizations?.title||t,...z.customizations});return}}const a=t.toLowerCase().includes("e-commerce")&&(t.toLowerCase().includes("individual")||t.toLowerCase().includes("separate")||t.toLowerCase().includes("data sources")),V=(t.toLowerCase().includes("database")||t.toLowerCase().includes("system")||t.toLowerCase().includes("management"))&&(t.toLowerCase().includes("multi")||t.toLowerCase().includes("multiple")||t.toLowerCase().includes("system")||t.toLowerCase().includes("comprehensive")||t.toLowerCase().includes("events")||t.toLowerCase().includes("attendees")||t.toLowerCase().includes("venues")||t.toLowerCase().includes("products")||t.toLowerCase().includes("customers")||t.toLowerCase().includes("orders"));let i,v;if(a?i=await fetch("/.netlify/functions/individual-schema-generator",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:t})}):V?i=await fetch("/.netlify/functions/multi-source-schema-generator",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:t,availableTemplates:N.value.map(z=>({id:z.id,title:z.title,description:z.description,properties:z.properties,propertyCount:z.propertyCount}))})}):i=await fetch("/.netlify/functions/gemini-chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:t,context:"notion_database_schema"})}),!i.ok)throw new Error("Failed to get AI response");if(v=await i.json(),V&&v.schema){const z=h(v.schema);O.value=z,I.value=!0;const ae={id:Date.now()+Math.random(),role:"assistant",content:`🎯 **Database Schema Generated!**

I've created a comprehensive database schema for your request. Please review and customize the schema in the modal that just opened, then click "Create Databases" when you're ready.

**Generated System:** ${v.schema.title||"Custom Database System"}
**Description:** ${v.schema.description||"A comprehensive database system tailored to your needs"}

The modal allows you to:
- Edit system title and description
- Modify data sources and their properties
- Add or remove properties for each data source
- Customize property types and options

Once you're satisfied with the configuration, the system will create all databases in your Notion workspace.`,timestamp:new Date};d.value.push(ae);return}const A={id:Date.now()+Math.random(),role:"assistant",content:v.content,schema:v.schema||null,individual_schemas:v.individual_schemas||!1,type:v.type||"single",timestamp:new Date};d.value.push(A)}catch(a){console.error("Error sending message:",a),D.add({severity:"error",summary:"Error",detail:"Failed to get AI response. Please try again.",life:5e3}),d.value.push({id:Date.now()+Math.random(),role:"assistant",content:'I apologize, but I encountered an error processing your request. <button onclick="window.location.reload()" class="text-blue-500 underline hover:text-blue-700 cursor-pointer">Please try again</button>.',timestamp:new Date})}finally{L.value=!1,await Z(),c()}},h=s=>(console.log("Original schema:",s),{title:s.title||"",description:s.description||"",dataSources:s.dataSources?s.dataSources.map(t=>{console.log("Processing data source:",t);const a={name:t.name||"",description:t.description||"",properties:[]};return t.properties&&typeof t.properties=="object"&&(a.properties=Object.entries(t.properties).map(([V,i])=>{console.log("Processing property:",V,i);let v="rich_text",A="",z="number";return i.title?v="title":i.rich_text?v="rich_text":i.number?(v="number",z=i.number.format||"number"):i.select?(v="select",A=i.select.options?i.select.options.map(ae=>ae.name).join(`
`):""):i.multi_select?(v="multi_select",A=i.multi_select.options?i.multi_select.options.map(ae=>ae.name).join(`
`):""):i.date?v="date":i.people?v="people":i.files?v="files":i.checkbox?v="checkbox":i.url?v="url":i.email?v="email":i.phone_number?v="phone_number":i.created_time?v="created_time":i.created_by?v="created_by":i.last_edited_time?v="last_edited_time":i.last_edited_by&&(v="last_edited_by"),{name:V,type:v,options:A,format:z}})),console.log("Transformed data source:",a),a}):[]}),K=async s=>{try{await navigator.clipboard.writeText(JSON.stringify(s,null,2)),D.add({severity:"success",summary:"Copied",detail:"Schema copied to clipboard",life:3e3})}catch(t){console.error("Error copying schema:",t),D.add({severity:"error",summary:"Error",detail:"Failed to copy schema",life:3e3})}},M=s=>{if(s.individual_schemas)W.value=s.schema,J.value=!0;else{const t=h(s.schema);O.value=t,I.value=!0}},de=async()=>{try{const s={id:Date.now()+Math.random(),role:"user",content:"Create a comprehensive e-commerce system with products, orders, and customers as individual data sources",timestamp:new Date};d.value.push(s);const t=await fetch("/.netlify/functions/individual-schema-generator",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:"Create a comprehensive e-commerce system with products, orders, and customers as individual data sources"})});if(!t.ok)throw new Error("Failed to generate individual schemas");const a=await t.json();W.value=a.schema,d.value.pop(),J.value=!0}catch(s){console.error("Error generating schemas:",s),d.value.length>0&&d.value[d.value.length-1].content.includes("individual e-commerce")&&d.value.pop();const t={id:Date.now()+Math.random(),role:"assistant",content:`❌ **Failed to generate database schemas**

I encountered an error while generating your individual e-commerce database schemas. This could be due to:

- API configuration issues
- Network connectivity problems
- Service unavailability

**Please try:**
1. Check your internet connection
2. Try again in a few moments
3. Contact support if the problem persists`,timestamp:new Date};d.value.push(t),D.add({severity:"error",summary:"Generation Failed",detail:"Failed to generate database schemas. Please try again.",life:8e3})}},ce=async()=>{P.value=!0;try{const s={id:Date.now()+Math.random(),role:"user",content:"Create a comprehensive e-commerce system with products, orders, and customers",timestamp:new Date};d.value.push(s);const t=await fetch("/.netlify/functions/multi-source-schema-generator",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:"Create a comprehensive e-commerce database system with multiple data sources for products, orders, customers, and inventory management. Include product categories, pricing, stock levels, order tracking, customer information, and payment processing."})});if(!t.ok)throw new Error("Failed to generate e-commerce schema");const V=(await t.json()).schema,i=h(V);d.value.pop(),O.value=i,I.value=!0}catch(s){console.error("Error creating system:",s),d.value.length>0&&d.value[d.value.length-1].content.includes("Creating your e-commerce system")&&d.value.pop();const t={id:Date.now()+Math.random(),role:"assistant",content:`❌ **Failed to create e-commerce system**

I encountered an error while setting up your e-commerce system. This could be due to:

- Notion API configuration issues
- Network connectivity problems
- Insufficient permissions

**Please try:**
1. Check your Notion integration settings
2. Ensure you have the necessary permissions
3. Try again in a few moments

If the problem persists, please contact support.`,timestamp:new Date};d.value.push(t),D.add({severity:"error",summary:"Creation Failed",detail:"Failed to create e-commerce system. Please try again.",life:8e3})}finally{P.value=!1,await Z(),c()}},x=s=>s.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/`(.*?)`/g,'<code class="bg-gray-100 px-1 py-0.5 rounded text-sm">$1</code>').replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2" target="_blank" class="text-blue-600 hover:text-blue-800 underline">$1</a>').replace(/\n/g,"<br>"),o=()=>{D.add({severity:"info",summary:"Coming Soon",detail:"Voice input feature will be available soon!",life:3e3})},c=()=>{const s=document.querySelector(".overflow-y-auto");s&&(s.scrollTop=s.scrollHeight)},k=async()=>{try{const t=await(await fetch("/.netlify/functions/automation-engine",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"list_templates"})})).json();N.value=t.templates||[]}catch(s){console.error("Error loading templates:",s)}},g=async s=>{try{return await(await fetch("/.netlify/functions/automation-engine",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"smart_suggest",payload:{userInput:s}})})).json()}catch(t){return console.error("Error getting smart suggestion:",t),null}},C=async(s,t={})=>{console.log("Deploying template by ID:",s,t),S.value=!0;try{const a=await fetch("/.netlify/functions/automation-engine",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"get_template_schema",payload:{templateId:s}})});if(console.log("Template response:",a),a.ok){const v=await a.json();if(console.log("Template data:",v),v.schema){const A=h(v.schema);console.log("Transformed schema:",A),t.title&&(A.title=t.title),t.description&&(A.description=t.description),O.value=A,I.value=!0,console.log("Modal should be visible now:",I.value);return}}const i=await(await fetch("/.netlify/functions/automation-engine",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"deploy_template",payload:{templateId:s,customizations:t,includeSampleData:!0}})})).json();i.database&&(D.add({severity:"success",summary:"Success",detail:`Database "${i.database.title}" created automatically!`,life:5e3}),d.value.push({id:Date.now()+Math.random(),role:"assistant",content:`🚀 **Automation Success!** I've automatically created the "${i.database.title}" database for you based on your request. You can access it at: <a href="${i.database.url}" target="_blank" class="text-blue-500 underline hover:text-blue-700">${i.database.url}</a>`,timestamp:new Date}))}catch(a){console.error("Error deploying template:",a),D.add({severity:"error",summary:"Automation Error",detail:"Failed to auto-deploy template",life:5e3})}finally{S.value=!1,L.value=!1,await Z(),c()}},Q=async s=>{console.log("Deploying template quick:",s),await C(s.id)},oe=s=>{d.value.push({id:Date.now()+Math.random(),role:"assistant",content:`✅ Template deployed successfully! Database "${s.title}" is now available in your Notion workspace. <a href="${s.url}" target="_blank" class="text-blue-500 underline hover:text-blue-700">Open in Notion</a>`,timestamp:new Date}),$.value=!1,c()},te=async s=>{J.value=!1,P.value=!0;try{const t={id:Date.now()+Math.random(),role:"assistant",content:"Creating individual databases in Notion...",timestamp:new Date};d.value.push(t);const a=[];for(const i of s)try{const v=await fetch("/.netlify/functions/create-notion-database",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({schema:i})});if(v.ok){const A=await v.json();a.push({name:i.title,url:A.url,id:A.id,properties:A.properties})}}catch(v){console.error(`Failed to create ${i.title}:`,v)}d.value.pop();const V={id:Date.now()+Math.random(),role:"assistant",content:`✅ **Individual E-Commerce Databases Created!**

🛍️ **Your separate e-commerce database system is ready:**

Successfully created the following databases in Notion:

${a.map(i=>`• **${i.name}**: [Database Link](${i.url})`).join(`
`)}

**System Features:**
- **Products Database**: Product catalog with categories, pricing, and inventory
- **Orders Database**: Order management with status tracking and payment methods
- **Customers Database**: Customer relationship management with contact info

**Next Steps:**
1. Visit the database links above to start adding data
2. Customize categories, payment methods, and order statuses
3. Set up inventory alerts and reorder points
4. Add sample data to get started

Your individual e-commerce system is now live and ready to use! 🚀`,timestamp:new Date};d.value.push(V),D.add({severity:"success",summary:"Databases Created",detail:`${a.length} individual e-commerce databases created successfully!`,life:8e3})}catch(t){console.error("Error creating databases:",t),d.value.length>0&&d.value[d.value.length-1].content.includes("Creating individual databases")&&d.value.pop();const a={id:Date.now()+Math.random(),role:"assistant",content:`❌ **Failed to create individual databases**

I encountered an error while creating your individual e-commerce databases. This could be due to:

- Notion API configuration issues
- Network connectivity problems
- Insufficient permissions

**Please try:**
1. Check your Notion integration settings
2. Ensure you have the necessary permissions
3. Try again in a few moments

If the problem persists, please contact support.`,timestamp:new Date};d.value.push(a),D.add({severity:"error",summary:"Creation Failed",detail:"Failed to create individual databases. Please try again.",life:8e3})}finally{P.value=!1,await Z(),c()}},Ce=()=>{J.value=!1;const s={id:Date.now()+Math.random(),role:"assistant",content:'Database creation cancelled. You can try again anytime by clicking the "E-Com Individual" button.',timestamp:new Date};d.value.push(s),D.add({severity:"info",summary:"Creation Cancelled",detail:"Database creation has been cancelled",life:3e3})},Se=async s=>{I.value=!1,P.value=!0;try{const t=await fetch("/.netlify/functions/create-multi-source-database",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({schema:s,mode:"separate"})});if(!t.ok)throw new Error("Failed to create system");const a=await t.json();if(d.value.pop(),a.hasErrors){const V={id:Date.now()+Math.random(),role:"assistant",content:`⚠️ **E-Commerce System Created with Some Issues**

🛍️ **Your e-commerce system has been created, but there were some issues:**

**Successfully Created Databases:**
${a.databases.filter(i=>!i.status||i.status!=="error").map(i=>`- **${i.name}**: [Database Link](${i.url})`).join(`
`)}

**Failed Databases:**
${a.errors.map(i=>`- **${i.name}**: ${i.error}`).join(`
`)}

**What This Means:**
- Some databases were created successfully and are ready to use
- Some databases failed to create due to API issues
- You can retry creating the failed databases

**Next Steps:**
1. Visit the successfully created databases to start using them
2. Try creating the e-commerce system again to create the missing databases
3. Contact support if the issue persists

The system is partially ready - you can start with the databases that were created successfully! 🚀`,timestamp:new Date};d.value.push(V),D.add({severity:"warn",summary:"Partial Success",detail:`${a.databases.filter(i=>!i.status||i.status!=="error").length} databases created, ${a.errors.length} failed`,life:1e4})}else{const V={id:Date.now()+Math.random(),role:"assistant",content:`✅ **${s.title||"System"} Created Successfully!**

🎯 **Your ${s.title||"system"} is ready with separate databases:**

**Created Databases:**
${a.databases.map(i=>`- **${i.name}**: [Database Link](${i.url})`).join(`
`)}

**Database Structure:**
Each database has been created with the following columns:
${a.databases.map(i=>`
**${i.name} Database:**
${i.properties?i.properties.map(v=>`  • ${v}`).join(`
`):"  • Columns not available"}`).join(`
`)}

**How to Use:**
1. Each database is independent and optimized for its entity type
2. Use relations between databases to connect related data
3. Create views within each database to organize your data
4. Add more entries using the appropriate database

**Next Steps:**
1. Visit each database to see your ${s.title||"system"}
2. Add more data to their respective databases
3. Set up relations between databases if needed
4. Customize categories, statuses, and other options as needed

Your ${s.title||"system"} is now live and ready to use! 🚀`,timestamp:new Date};d.value.push(V),D.add({severity:"success",summary:`${s.title||"System"} Created`,detail:`${a.databases.length} separate ${s.title?s.title.toLowerCase():"system"} databases created successfully!`,life:8e3})}}catch(t){console.error("Error creating system:",t),d.value.pop();const a={id:Date.now()+Math.random(),role:"assistant",content:`❌ **Failed to create e-commerce system**

I encountered an error while creating your e-commerce system. This could be due to:

- API configuration issues
- Network connectivity problems
- Service unavailability

**Please try:**
1. Check your internet connection
2. Try again in a few moments
3. Contact support if the problem persists`,timestamp:new Date};d.value.push(a),D.add({severity:"error",summary:"Creation Failed",detail:"Failed to create e-commerce system. Please try again.",life:8e3})}finally{P.value=!1,await Z(),c()}},$e=()=>{I.value=!1;const s={id:Date.now()+Math.random(),role:"assistant",content:'E-commerce system creation cancelled. You can try again anytime by clicking the "E-Com System" button.',timestamp:new Date};d.value.push(s),D.add({severity:"info",summary:"Creation Cancelled",detail:"E-commerce system creation has been cancelled",life:3e3}),c()},De=()=>{d.value=[],J.value=!1,W.value=[],I.value=!1,O.value={},Y.value=!1,D.add({severity:"success",summary:"Chat Cleared",detail:"Your chat has been cleared. You can start a new conversation!",life:3e3}),Z(()=>{const s=document.querySelector("textarea");s&&s.focus()})};return ge(async()=>{const s=document.querySelector("textarea");s&&s.focus(),await k()}),(s,t)=>(u(),p("div",ra,[r(ia),e("div",na,[d.value.length>0?(u(),p("div",da,[r(n(w),{onClick:t[0]||(t[0]=a=>Y.value=!0),severity:"secondary",outlined:"",size:"small",icon:"pi pi-edit",label:"New Ask",class:"hover:bg-blue-50 hover:border-blue-300 hover:text-blue-700 transition-all duration-300 focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50"})])):R("",!0),d.value.length===0?(u(),p("div",ca,[e("div",ua,[t[15]||(t[15]=e("div",{class:"w-16 h-16 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center mx-auto mb-6"},[e("i",{class:"pi pi-sparkles text-white text-2xl"})],-1)),t[16]||(t[16]=e("p",{class:"text-gray-600 mb-8"},"Tell us what you need, and we'll handle the rest.",-1)),e("div",ma,[e("div",pa,[me(e("textarea",{"onUpdate:modelValue":t[1]||(t[1]=a=>_.value=a),placeholder:"Ask anything",rows:"2",type:"text",class:"flex-1 bg-transparent text-white placeholder-gray-300 border-0 focus:ring-0 focus:border-0 focus:outline-none text-base",onKeydown:je(fe(f,["prevent"]),["enter"])},null,40,ba),[[Te,_.value]]),e("button",{onClick:o,class:"bg-black/80 backdrop-blur-md p-4 rounded-full text-white hover:bg-black/90 hover:backdrop-blur-lg rounded-lg w-12 h-12 flex items-center justify-center transition-all duration-300 shadow-md hover:shadow-lg border border-white/20"},t[9]||(t[9]=[e("i",{class:"pi pi-microphone text-lg"},null,-1)]))])]),e("div",va,[t[10]||(t[10]=e("i",{class:"pi pi-bolt text-blue-600 text-lg group-hover:text-blue-700 transition-colors duration-300"},null,-1)),t[11]||(t[11]=e("span",{class:"text-gray-800 font-semibold text-lg group-hover:text-gray-900 transition-colors duration-300"},"Automation Mode",-1)),r(n(Me),{modelValue:U.value,"onUpdate:modelValue":t[2]||(t[2]=a=>U.value=a),onLabel:"ON",offLabel:"OFF",class:"p-0 hover:scale-105 transition-transform duration-300"},null,8,["modelValue"])]),U.value&&N.value.length>0?(u(),p("div",ya,[e("div",fa,[t[13]||(t[13]=e("h3",{class:"text-lg font-semibold text-gray-900"},"🚀 Quick Deploy Templates",-1)),r(n(w),{onClick:t[3]||(t[3]=a=>$.value=!0),severity:"secondary",outlined:"",size:"small",class:"hover:bg-blue-50 hover:border-blue-300 hover:text-blue-700 transition-all duration-300 focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50"},{default:T(()=>t[12]||(t[12]=[e("i",{class:"pi pi-cog mr-2"},null,-1),F(" Manage Templates ",-1)])),_:1,__:[12]})]),e("div",ha,[(u(!0),p(B,null,q(N.value,a=>(u(),p("button",{key:a.id,onClick:V=>Q(a),disabled:S.value,class:"p-3 bg-gradient-to-br from-white via-blue-50 to-purple-50 rounded-lg transition-all duration-200 text-left group disabled:opacity-50 disabled:cursor-not-allowed relative border-2 border-transparent bg-gradient-to-br from-white via-blue-50 to-purple-50 focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 focus:outline-none hover:origin-top-left hover:-translate-y-1 hover:rotate-0.5 hover:shadow-lg hover:border-primary-blue",style:{background:"linear-gradient(to bottom right, white, #dbeafe, #f3e8ff) padding-box, linear-gradient(135deg, #3b82f6, #8b5cf6, #ec4899) border-box"}},[e("div",xa,[e("div",null,[e("p",wa,j(a.title),1),e("p",_a,j(a.propertyCount)+" properties",1),a.custom?(u(),p("div",ka," Custom ")):R("",!0)]),t[14]||(t[14]=e("i",{class:"pi pi-bolt text-blue-500 opacity-0 group-hover:opacity-100 transition-opacity"},null,-1))])],8,ga))),128))])])):R("",!0),e("div",Ca,[(u(!0),p(B,null,q(E.value,a=>(u(),p("button",{key:a.text,onClick:V=>l(a.text),class:"p-4 bg-white/30 backdrop-blur-sm rounded-lg transition-all duration-200 text-left glass-gradient-border-light group focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 focus:outline-none hover:origin-top-left hover:-translate-y-1 hover:rotate-0.5 hover:shadow-lg hover:bg-white/40 hover:border-primary-blue"},[e("div",$a,[e("i",{class:ee([a.icon,"text-blue-500 text-lg mt-1 group-hover:text-blue-600 transition-colors duration-300"])},null,2),e("div",null,[e("p",Da,j(a.title),1),e("p",Ta,j(a.description),1)])])],8,Sa))),128))]),e("div",ja,[(u(!0),p(B,null,q(m.value,a=>(u(),p("button",{key:a.label,onClick:V=>l(a.prompt,a.action),class:"flex items-center gap-2 px-4 py-2 bg-gray-100 hover:bg-blue-100 hover:text-blue-700 rounded-full text-sm text-gray-700 transition-all duration-200 focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 focus:outline-none hover:origin-top-left hover:-translate-y-0.5 hover:rotate-0.25 hover:shadow-lg hover:border-primary-blue"},[e("i",{class:ee([a.icon,"text-sm"])},null,2),F(" "+j(a.label),1)],8,Ea))),128))])])])):(u(),p("div",Ma,[(u(!0),p(B,null,q(d.value,(a,V)=>(u(),p("div",{key:V,class:ee(["flex gap-4 animate-slide-in",a.role==="user"?"justify-end":"justify-start"])},[a.role==="assistant"?(u(),p("div",Pa,t[17]||(t[17]=[e("div",{class:"w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center"},[e("i",{class:"pi pi-sparkles text-white text-sm"})],-1)]))):R("",!0),e("div",{class:ee(["max-w-3xl",a.role==="user"?"bg-blue-500 text-white rounded-2xl rounded-br-sm px-4 py-3":"bg-white border border-gray-200 rounded-2xl rounded-bl-sm px-4 py-3"])},[a.role==="assistant"&&a.thinking?(u(),p("div",Oa,t[18]||(t[18]=[pe('<div class="flex items-center gap-2 text-gray-500 text-sm mb-2" data-v-ec7eb24b><div class="flex space-x-1" data-v-ec7eb24b><div class="w-1 h-1 bg-gray-400 rounded-full animate-pulse" data-v-ec7eb24b></div><div class="w-1 h-1 bg-gray-400 rounded-full animate-pulse" style="animation-delay:0.2s;" data-v-ec7eb24b></div><div class="w-1 h-1 bg-gray-400 rounded-full animate-pulse" style="animation-delay:0.4s;" data-v-ec7eb24b></div></div><span data-v-ec7eb24b>Thinking...</span></div>',1)]))):R("",!0),e("div",{innerHTML:x(a.content)},null,8,Va),a.schema?(u(),p("div",Na,[e("div",Ia,[e("div",Fa,[t[19]||(t[19]=e("div",{class:"w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center"},[e("i",{class:"pi pi-database text-white text-sm"})],-1)),e("div",null,[e("h4",Ua,j(a.individual_schemas?"Individual Database Schemas":"Database Schema Ready"),1),e("p",La,j(a.individual_schemas?"Multiple schemas generated for separate databases":"Review and customize your database schema"),1)])]),e("div",za,[r(n(w),{onClick:i=>M(a),severity:"secondary",outlined:"",size:"small",class:"hover:bg-blue-50 hover:border-blue-300 hover:text-blue-700 transition-all duration-300 focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50"},{default:T(()=>t[20]||(t[20]=[e("i",{class:"pi pi-external-link mr-2"},null,-1),F(" Open Editor ",-1)])),_:2,__:[20]},1032,["onClick"]),r(n(w),{onClick:i=>K(a.schema),severity:"secondary",text:"",size:"small",class:"hover:bg-blue-50 hover:text-blue-700 transition-all duration-300 focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50"},{default:T(()=>t[21]||(t[21]=[e("i",{class:"pi pi-copy"},null,-1)])),_:2,__:[21]},1032,["onClick"])])])])):R("",!0)],2),a.role==="user"?(u(),p("div",Ja,t[22]||(t[22]=[e("div",{class:"w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center"},[e("i",{class:"pi pi-user text-gray-600 text-sm"})],-1)]))):R("",!0)],2))),128)),L.value?(u(),p("div",Aa,t[23]||(t[23]=[pe('<div class="flex-shrink-0" data-v-ec7eb24b><div class="w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center" data-v-ec7eb24b><i class="pi pi-sparkles text-white text-sm" data-v-ec7eb24b></i></div></div><div class="bg-white border border-gray-200 rounded-2xl rounded-bl-sm px-4 py-3" data-v-ec7eb24b><div class="flex items-center gap-2 text-gray-500" data-v-ec7eb24b><div class="flex space-x-1" data-v-ec7eb24b><div class="w-2 h-2 bg-blue-500 rounded-full animate-bounce" data-v-ec7eb24b></div><div class="w-2 h-2 bg-purple-500 rounded-full animate-bounce" style="animation-delay:0.1s;" data-v-ec7eb24b></div><div class="w-2 h-2 bg-pink-500 rounded-full animate-bounce" style="animation-delay:0.2s;" data-v-ec7eb24b></div></div><span class="text-sm" data-v-ec7eb24b>AI is thinking...</span></div></div>',2)]))):R("",!0)]))]),r(n(xe),{visible:$.value,"onUpdate:visible":t[4]||(t[4]=a=>$.value=a),position:G.value?"bottom":"right",class:"modern-template-drawer",style:he(G.value?{height:"90vh"}:{width:"95vw",maxWidth:"1400px"}),pt:H},{header:T(()=>t[24]||(t[24]=[e("div",{class:"w-full"},[e("div",{class:"flex items-center gap-4"},[e("div",{class:"w-12 h-12 md:w-14 md:h-14 bg-white/20 backdrop-blur-sm rounded-2xl flex items-center justify-center border border-white/10"},[e("i",{class:"pi pi-objects-column text-white text-lg md:text-xl"})]),e("div",{class:"text-center md:text-left"},[e("h2",{class:"text-2xl md:text-3xl font-bold text-white drop-shadow-sm"},"Template Manager"),e("p",{class:"text-white/80 mt-1 text-sm md:text-base"},"Create, customize, and deploy database templates")])])],-1)])),default:T(()=>[e("div",Ra,[r(Ot,{onTemplateDeployed:oe})])]),_:1},8,["visible","position","style"]),r(sa,{visible:J.value,"onUpdate:visible":t[5]||(t[5]=a=>J.value=a),schemas:W.value,onCreate:te,onCancel:Ce},null,8,["visible","schemas"]),r(ke,{visible:I.value,"onUpdate:visible":t[6]||(t[6]=a=>I.value=a),schema:O.value,onCreate:Se,onCancel:$e},null,8,["visible","schema"]),r(n(ne),{visible:Y.value,"onUpdate:visible":t[8]||(t[8]=a=>Y.value=a),modal:"",header:"Clear Current Chat?",style:{width:"400px"}},{footer:T(()=>[e("div",Ya,[r(n(w),{label:"Cancel",severity:"secondary",outlined:"",onClick:t[7]||(t[7]=a=>Y.value=!1),class:"hover:bg-gray-50 hover:border-gray-300 hover:text-gray-700 transition-all duration-300 focus:ring-2 focus:ring-gray-500 focus:ring-opacity-50"}),r(n(w),{label:"Start Fresh Chat",severity:"danger",onClick:De,class:"hover:bg-red-600 hover:border-red-600 transition-all duration-300 focus:ring-2 focus:ring-red-500 focus:ring-opacity-50"})])]),default:T(()=>[t[25]||(t[25]=e("div",{class:"flex items-center gap-3 mb-4"},[e("div",{class:"w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center"},[e("i",{class:"pi pi-exclamation-triangle text-orange-500 text-xl"})]),e("div",null,[e("p",{class:"text-gray-600 text-sm"},"This will remove all messages and start a new conversation. Your settings will be preserved.")])],-1))]),_:1,__:[25]},8,["visible"]),r(n(_e))]))}},Ha=le(Ba,[["__scopeId","data-v-ec7eb24b"]]);export{Ha as default};
