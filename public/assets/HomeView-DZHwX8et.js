import{g as re,a as be,b as de,N as le,f as he,_ as pe,c as ve,u as ye}from"./_plugin-vue_export-helper-DV48wBdy.js";import{a as K,u as _e,b as xe}from"./vendor-primevue-BXJVR7wj.js";import{Q as ne,c as r,d as s,s as $,e,t as h,z as R,q as X,h as J,y as N,F,E as k,G as Y,v as S,L as W,p as E,r as P,w as we,x as $e,S as Fe,l as ge,U as fe,o as ke}from"./vendor-vue-3gpeyM8i.js";const Ce={class:"text-center space-y-4"},Le={key:0,class:"space-y-2"},je={key:1,class:"text-4xl font-bold text-gray-900"},Se={key:2,class:"space-y-2"},Ae={key:3,class:"text-lg text-gray-600 max-w-2xl mx-auto"},Oe={class:"flex justify-end gap-4 flex-wrap"},Ie={__name:"HeaderView",props:{loading:{type:Boolean,default:!1},databaseTitle:{type:String,default:""},databaseDescription:{type:String,default:""}},emits:["refreshSchema"],setup(n,{emit:g}){const p=ne(),f=g,x=()=>{f("refreshSchema")},w=()=>{p.push("/add")};return(y,v)=>{const U=K;return s(),r("div",Ce,[n.loading&&!n.databaseTitle?(s(),r("div",Le,v[0]||(v[0]=[e("div",{class:"h-12 bg-gray-200 rounded-lg animate-pulse mx-auto",style:{width:"300px"}},null,-1)]))):(s(),r("h1",je,h(n.databaseTitle),1)),n.loading&&!n.databaseDescription?(s(),r("div",Se,v[1]||(v[1]=[e("div",{class:"h-6 bg-gray-200 rounded-lg animate-pulse mx-auto",style:{width:"500px"}},null,-1),e("div",{class:"h-6 bg-gray-200 rounded-lg animate-pulse mx-auto",style:{width:"400px"}},null,-1)]))):n.databaseDescription?(s(),r("p",Ae,h(n.databaseDescription),1)):$("",!0),e("div",Oe,[R(U,{onClick:x,disabled:n.loading,severity:"secondary"},{default:X(()=>v[2]||(v[2]=[e("i",{class:"pi pi-refresh"},null,-1),J("Refresh ",-1)])),_:1,__:[2]},8,["disabled"]),R(U,{onClick:w,severity:"primary"},{default:X(()=>v[3]||(v[3]=[e("i",{class:"pi pi-plus"},null,-1),J("Add ",-1)])),_:1,__:[3]})])])}}},Ne={key:0,class:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-start gap-3"},ze={class:"flex-1"},Be={class:"text-red-700"},Me={__name:"ErrorDisplay",props:{error:{type:String,default:""}},emits:["retry"],setup(n){return(g,p)=>{const f=K;return n.error?(s(),r("div",Ne,[p[2]||(p[2]=e("i",{class:"pi pi-exclamation-triangle text-red-500 text-xl"},null,-1)),e("div",ze,[p[1]||(p[1]=e("strong",{class:"text-red-800"},"Error:",-1)),e("span",Be,h(n.error),1),R(f,{onClick:g.retry,severity:"danger",text:""},{default:X(()=>p[0]||(p[0]=[J(" Try Again ",-1)])),_:1,__:[0]},8,["onClick"])])])):$("",!0)}}},Ue={class:"text-center"},Ve={key:0},De={key:1},Re={__name:"LoadMoreButton",props:{loading:{type:Boolean,default:!1}},emits:["load-more"],setup(n){return(g,p)=>{const f=K;return s(),r("div",Ue,[R(f,{onClick:p[0]||(p[0]=x=>g.$emit("load-more")),disabled:n.loading,severity:"secondary"},{default:X(()=>[n.loading?(s(),r("span",Ve,"Loading...")):(s(),r("span",De,"Load More"))]),_:1},8,["disabled"])])}}},qe={class:"text-gray-800 leading-relaxed"},Ee={__name:"RichTextField",props:{value:{type:[Object,String],required:!0}},setup(n){const g=n,p=N(()=>Array.isArray(g.value)?g.value:g.value&&typeof g.value=="object"?g.value.rich_text||g.value.title||[]:typeof g.value=="string"?[{text:{content:g.value},annotations:{}}]:[]),f=x=>{if(!x)return{};const w={};return x.italic&&(w.fontStyle="italic"),x.underline&&(w.textDecoration="underline"),x.strikethrough&&(w.textDecoration="line-through"),x.code&&(w.fontFamily="monospace",w.backgroundColor="#f3f4f6",w.padding="2px 4px",w.borderRadius="4px"),w};return(x,w)=>(s(),r("div",qe,[(s(!0),r(F,null,k(p.value,(y,v)=>(s(),r("span",{key:v,class:S(y.annotations?.bold?"font-semibold":""),style:Y(f(y.annotations))},h(y.text?.content||y.plain_text||""),7))),128))]))}},Te={class:"grid grid-cols-2 gap-4"},Pe={key:0,class:"flex items-center space-x-2"},He={class:"text-gray-800"},We={key:1,class:"flex items-center space-x-2"},Ge={class:"text-gray-800"},Je={__name:"ContactField",props:{value:{type:[Object,String],required:!0}},setup(n){return(g,p)=>(s(),r("div",Te,[typeof n.value=="string"||n.value?.email?(s(),r("div",Pe,[p[0]||(p[0]=e("i",{class:"pi pi-envelope text-blue-500"},null,-1)),e("span",He,h(typeof n.value=="string"?n.value:n.value.email),1)])):$("",!0),typeof n.value=="string"||n.value?.phone?(s(),r("div",We,[p[1]||(p[1]=e("i",{class:"pi pi-phone text-green-500"},null,-1)),e("span",Ge,h(typeof n.value=="string"?n.value:n.value.phone),1)])):$("",!0)]))}},Ke={class:"space-y-3"},Qe={class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},Xe={class:"text-sm font-medium text-gray-700"},Ye={class:"flex items-center space-x-2"},Ze={class:"text-gray-800 font-mono font-medium"},et={key:0,class:"text-lg text-gray-600 font-medium"},tt={__name:"NumbersField",props:{value:{type:Object,required:!0},schema:{type:Object,default:null},formatLabel:{type:Function,required:!0},formatNumber:{type:Function,required:!0},getSchemaProperty:{type:Function,required:!0},getFieldCurrencySymbol:{type:Function,required:!0}},setup(n){return(g,p)=>(s(),r("div",Ke,[e("div",Qe,[(s(!0),r(F,null,k(n.value,(f,x)=>(s(),r("div",{key:x,class:"flex items-center justify-start bg-gray-50 rounded-lg gap-2 p-2"},[e("i",{class:S([W(re)(x,n.getSchemaProperty(x)),"text-blue-500"])},null,2),e("span",Xe,h(n.formatLabel(x)),1),e("div",Ye,[e("span",Ze,h(n.formatNumber(f||0,x)),1),n.getFieldCurrencySymbol(x)?(s(),r("span",et,h(n.getFieldCurrencySymbol(x)),1)):$("",!0)])]))),128))])]))}},st={class:"flex items-center space-x-2"},rt=["href"],lt={__name:"UrlField",props:{value:{type:[Object,String],required:!0}},setup(n){const g=p=>{try{const f=new URL(p);return f.hostname+f.pathname}catch{return p}};return(p,f)=>(s(),r("div",st,[f[0]||(f[0]=e("i",{class:"pi pi-link text-purple-500"},null,-1)),e("a",{href:typeof n.value=="string"?n.value:n.value.url,target:"_blank",rel:"noopener noreferrer",class:"text-purple-600 hover:text-purple-800 underline truncate max-w-xs"},h(g(typeof n.value=="string"?n.value:n.value.url)),9,rt)]))}},it={class:"flex items-center space-x-2"},nt={class:"text-gray-800"},at={__name:"DateField",props:{value:{type:[Object,String],required:!0}},setup(n){const g=p=>p?new Date(p).toLocaleDateString():"";return(p,f)=>(s(),r("div",it,[f[0]||(f[0]=e("i",{class:"pi pi-calendar text-indigo-500"},null,-1)),e("span",nt,h(g(typeof n.value=="string"?n.value:n.value.date?.start||n.value.date)),1)]))}},ot={class:"flex flex-wrap gap-2"},dt={__name:"SelectField",props:{value:{type:[Object,Array],required:!0},fieldName:{type:String,required:!0},schema:{type:Object,default:null}},setup(n){const g=n,p=N(()=>({name:g.fieldName,options:x(g.fieldName,g.schema)})),f=N(()=>typeof g.value=="string"&&g.value.trim()?[{value:g.value,label:g.value,name:g.value}]:Array.isArray(g.value)&&g.value.length>0?g.value.map(w=>({value:w,label:w,name:w})):be(g.value)),x=(w,y)=>!y||!y.properties||!y.properties[w]?[]:y.properties[w].options||[];return(w,y)=>(s(),r("div",ot,[(s(!0),r(F,null,k(f.value,v=>(s(),r("span",{key:v.value||v,class:S([W(de)(v,p.value,n.schema),"px-3 py-1.5 text-sm rounded-full border font-medium"])},h(v.label||v),3))),128))]))}},ct={class:"flex items-center gap-2"},ut={key:0,class:"flex items-center gap-1 bg-green-500 text-white px-2 py-1 rounded-full text-sm"},pt={class:"font-medium"},gt={key:1,class:"flex items-center gap-1 bg-gray-200 text-gray-600 px-2 py-1 rounded-full text-sm"},ft={class:"font-medium"},ce={__name:"BooleanField",props:{value:{type:Boolean,required:!0},fieldName:{type:String,required:!0},formatLabel:{type:Function,required:!0}},setup(n){return(g,p)=>(s(),r("div",ct,[n.value?(s(),r("div",ut,[p[0]||(p[0]=e("i",{class:"pi pi-check-circle"},null,-1)),e("span",pt,h(n.formatLabel(n.fieldName)),1)])):(s(),r("div",gt,[p[1]||(p[1]=e("i",{class:"pi pi-times-circle"},null,-1)),e("span",ft,h(n.formatLabel(n.fieldName)),1)]))]))}},mt={class:"text-gray-800 leading-relaxed"},me={__name:"TextField",props:{value:{type:[String,Number],required:!0}},setup(n){return(g,p)=>(s(),r("div",mt,h(n.value),1))}},ht={class:"space-y-3"},xt={key:0,class:"space-y-2"},bt={class:"flex items-center space-x-3"},vt={key:0,class:"flex-shrink-0"},yt=["src","alt"],_t={key:1,class:"pi pi-file text-blue-500 text-lg"},wt={class:"flex-1 min-w-0"},$t={class:"text-sm font-medium text-gray-900 truncate"},Ft={key:0,class:"text-xs text-gray-500"},kt={key:1,class:"text-xs text-blue-600 hover:text-blue-800"},Ct=["href"],Lt={key:1,class:"text-center py-4 text-gray-500"},jt={__name:"FileField",props:{value:{type:[Array,Object,String],required:!0},showRemoveButton:{type:Boolean,default:!1}},emits:["remove-file"],setup(n,{emit:g}){const p=n,f=g,x=N(()=>{if(!p.value)return[];if(Array.isArray(p.value))return p.value;if(typeof p.value=="object"&&p.value.files)return p.value.files;if(typeof p.value=="string")try{const _=JSON.parse(p.value);return Array.isArray(_)?_:[_]}catch{return[]}return[]}),w=_=>{if(!_)return"";const M=["Bytes","KB","MB","GB"],z=Math.floor(Math.log(_)/Math.log(1024));return Math.round(_/Math.pow(1024,z)*100)/100+" "+M[z]},y=_=>{f("remove-file",_)},v=_=>{if(!_)return!1;if(_.type)return _.type.startsWith("image/");const M=_.name||_.filename||"";return[".jpg",".jpeg",".png",".gif",".bmp",".webp",".svg"].some(I=>M.toLowerCase().endsWith(I))},U=_=>_.url?_.url:_.preview?_.preview:_.file&&_.file instanceof File?URL.createObjectURL(_.file):"",T=_=>{console.warn("Failed to load image preview:",_.target.src)};return(_,M)=>{const z=K;return s(),r("div",ht,[x.value.length>0?(s(),r("div",xt,[(s(!0),r(F,null,k(x.value,(I,q)=>(s(),r("div",{key:q,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg border border-gray-200"},[e("div",bt,[v(I)?(s(),r("div",vt,[e("img",{src:U(I),alt:I.name||I.filename||"Image preview",class:"w-12 h-12 object-cover rounded-lg border border-gray-200",onError:T},null,40,yt)])):(s(),r("i",_t)),e("div",wt,[e("p",$t,h(I.name||I.filename||"Unknown file"),1),I.size?(s(),r("p",Ft,h(w(I.size)),1)):$("",!0),I.url?(s(),r("p",kt,[e("a",{href:I.url,target:"_blank",rel:"noopener noreferrer",class:"hover:underline"}," View file ",8,Ct)])):$("",!0)])]),n.showRemoveButton?(s(),E(z,{key:0,onClick:H=>y(q),icon:"pi pi-times",size:"small",severity:"danger",text:"",rounded:"",class:"ml-2"},null,8,["onClick"])):$("",!0)]))),128))])):(s(),r("div",Lt,M[0]||(M[0]=[e("i",{class:"pi pi-file text-4xl text-gray-300 mb-2 block"},null,-1),e("p",{class:"text-sm"},"No files uploaded",-1)])))])}}};function St(n="primary",g="small",p=!1){return{buttonPT:N(()=>({root:{class:[At(g),Ot(n),"rounded-lg flex items-center justify-center","transition-all duration-300 hover:scale-105 hover:-translate-y-0.5","shadow-lg hover:shadow-xl","focus:outline-none focus:ring-2 focus:ring-offset-2","disabled:opacity-50 disabled:cursor-not-allowed","!border-0"]},icon:{class:p?"m-0":"mr-2"},label:{class:"font-medium"}}))}}function At(n){const g={small:"px-3 py-1.5 text-sm",large:"px-6 py-3 text-lg",default:"px-4 py-2"};return g[n]||g.default}function Ot(n){const g={primary:"!bg-blue-600 !hover:bg-blue-700 !text-white focus:ring-blue-500 hover:shadow-[0_20px_40px_rgba(37,99,235,0.3),0_0_20px_rgba(37,99,235,0.2)]",secondary:"!bg-gray-200 !hover:bg-gray-300 !text-gray-700 hover:text-gray-800 border border-gray-300 focus:ring-gray-500 hover:shadow-[0_20px_40px_rgba(107,114,128,0.3),0_0_20px_rgba(107,114,128,0.2)]",danger:"!bg-red-600 !hover:bg-red-700 !text-white focus:ring-red-500 hover:shadow-[0_20px_40px_rgba(239,68,68,0.3),0_0_20px_rgba(239,68,68,0.2)]",success:"!bg-green-600 !hover:bg-green-700 !text-white focus:ring-green-500 hover:shadow-[0_20px_40px_#22c55e4d,0_0_20px_#22c55e33]",warning:"!bg-amber-600 !hover:bg-amber-700 !text-white focus:ring-amber-500 hover:shadow-[0_20px_40px_rgba(217,119,6,0.3),0_0_20px_rgba(217,119,6,0.2)]",info:"!bg-cyan-600 !hover:bg-cyan-700 !text-white focus:ring-cyan-500 hover:shadow-[0_20px_40px_rgba(6,182,212,0.3),0_0_20px_rgba(6,182,212,0.2)]"};return g[n]||g.primary}const ie={__name:"IconButton",props:{icon:{type:String,required:!0},severity:{type:String,default:"primary"},size:{type:String,default:"small"}},emits:["click"],setup(n,{emit:g}){const p=n,{buttonPT:f}=St(p.severity,p.size,!0),x=g,w=()=>{x("click")};return(y,v)=>{const U=K;return s(),E(U,{pt:W(f),icon:n.icon,onClick:w},null,8,["pt","icon"])}}},It={key:0,class:"bg-white hover:shadow-lg text-gray-900 transition-shadow p-4 rounded-lg shadow-lg flex flex-col h-full relative"},Nt={class:"relative z-10"},zt={class:"flex justify-end items-start mb-3"},Bt={class:"flex gap-2"},Mt={key:0,class:"mb-4 flex md:flex-row flex-col gap-2"},Ut={class:"flex justify-center mb-4"},Vt={key:0,class:"relative"},Dt=["src","alt"],Rt={class:"text-2xl font-bold text-gray-900"},qt={key:0,class:"mb-2"},Et={class:"flex flex-wrap gap-2"},Tt={key:1,class:"mb-4"},Pt={class:"grid grid-cols-1 sm:grid-cols-2 gap-1"},Ht={class:"flex items-center space-x-1"},Wt={class:"flex items-center space-x-1"},Gt=["title"],Jt={key:2,class:"mb-4"},Kt={class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},Qt={class:"flex items-center space-x-1"},Xt=["title"],Yt={class:"flex items-center space-x-1"},Zt={class:"text-gray-800 font-mono font-medium"},es={key:3,class:"mb-4"},ts={class:"gap-3"},ss={class:"flex items-center justify-between"},rs={class:"flex items-center space-x-2"},ls=["title"],is={class:"text-gray-800 font-mono font-medium text-lg"},ns={key:4,class:"mb-4"},as={class:"gap-3"},os={class:"flex items-center space-x-2"},ds=["title"],cs={class:"flex items-center space-x-2"},us=["href","title"],ps={key:5,class:"mb-4"},gs={class:"space-y-3"},fs={class:"text-sm font-medium text-gray-700 mb-2"},ms={key:0,class:"mr-2 text-base"},hs={key:2,class:"pi pi-paperclip mr-2 text-gray-500"},xs=["title"],bs={class:"space-y-2"},vs={key:0,class:"space-y-2"},ys={class:"flex items-center space-x-3"},_s={key:0,class:"flex-shrink-0"},ws=["src","alt"],$s={key:1,class:"pi pi-file text-blue-500 text-lg"},Fs={class:"flex-1 min-w-0"},ks={class:"text-sm font-medium text-gray-900 truncate"},Cs={key:0,class:"text-xs text-gray-500"},Ls={class:"flex items-center space-x-2"},js=["href"],Ss={key:1,class:"text-center py-4 text-gray-500"},As={key:6,class:"mb-4"},Os={class:"space-y-4"},Is={class:"text-sm font-medium text-gray-700"},Ns=["title"],zs={class:"relative"},Bs={class:"w-full h-3 bg-gray-200 rounded-full overflow-hidden"},Ms={class:"space-y-3 flex-1"},Us={key:0,class:"text-sm font-medium text-gray-700 mb-2"},Vs={key:0,class:"mr-2 text-base"},Ds=["title"],Rs={class:"text-xs text-gray-500 mt-auto pt-2 border-t border-gray-100 flex flex-row justify-end"},qs={key:0},Es={__name:"CardView",props:{item:{type:Object,required:!0},schema:{type:Object,default:null},loading:{type:Boolean,default:!1},editRoute:{type:String,default:"/edit"},itemIdField:{type:String,default:"id"}},emits:["deleteItem"],setup(n,{emit:g}){const p=ne(),f=_e(),x=n,w=g,y=N(()=>{if(!x.schema?.properties||!x.item)return{titleFields:[],contactFields:[],booleanFields:[],currencyNumberFields:[],regularNumberFields:[],urlFields:[],fileFields:[],skillFields:[],otherFields:[]};const t=x.schema.properties,c=x.item,i={titleFields:[],contactFields:[],booleanFields:[],currencyNumberFields:[],regularNumberFields:[],urlFields:[],fileFields:[],skillFields:[],otherFields:[]};return Object.entries(t).forEach(([d,m])=>{const O=c[d];if(!(!O&&m.type!=="checkbox"&&m.type!=="select"&&m.type!=="multi_select"&&m.type!=="files"))switch(m.type){case"title":i.titleFields.push([d,O]);break;case"checkbox":i.booleanFields.push([d,O||!1]);break;case"number":m.number?.format&&m.number.format!=="number"?i.currencyNumberFields.push([d,O||0]):i.regularNumberFields.push([d,O||0]);break;case"url":i.urlFields.push([d,O]);break;case"files":i.fileFields.push([d,m]);break;case"select":case"multi_select":i.otherFields.push([d,m]);break;default:{if(m.type==="number"&&typeof O=="number"&&O>=0&&O<=10&&(d.toLowerCase().includes("skill")||d.toLowerCase().includes("ability")||d.toLowerCase().includes("rating")||d.toLowerCase().includes("coding")||d.toLowerCase().includes("problem")||d.toLowerCase().includes("communication"))){i.skillFields.push([d,O]);break}d.toLowerCase().includes("email")||d.toLowerCase().includes("phone")||d.toLowerCase().includes("contact")||m.type==="email"||m.type==="phone"?i.contactFields.push([d,O]):m.type!=="title"&&m.type!=="number"&&m.type!=="checkbox"&&m.type!=="url"&&m.type!=="files"&&i.otherFields.push([d,m])}}}),i}),v=N(()=>y.value.titleFields),U=N(()=>y.value.contactFields),T=N(()=>y.value.booleanFields),_=N(()=>y.value.currencyNumberFields),M=N(()=>y.value.regularNumberFields),z=N(()=>y.value.urlFields),I=N(()=>y.value.fileFields),q=N(()=>y.value.skillFields),H=N(()=>y.value.otherFields),C=N(()=>{if(!x.schema?.properties)return{};const t={};return Object.entries(x.schema.properties).forEach(([c,i])=>{switch(i.type){case"rich_text":t[c]=Ee;break;case"url":t[c]=lt;break;case"date":t[c]=at;break;case"select":case"multi_select":t[c]=dt;break;case"checkbox":t[c]=ce;break;case"files":t[c]=jt;break;default:t[c]=me}}),t}),L=t=>t==="contact"?Je:t==="numbers"?tt:C.value[t]||me,u=t=>t!=="contact"&&t!=="numbers",b=t=>le.formatLabel(t),V=(t,c=null)=>{if(typeof t!="number")return t;const i=c?B(c):null;return i?he(t,i):t.toLocaleString()},j=()=>{const t=x.item[x.itemIdField];p.push(`${x.editRoute}/${t}`)},A=()=>{const t=x.item[x.itemIdField],c=v.value.length>0?v.value[0][1]:"this item";f.require({message:`Are you sure you want to delete "${c}"?`,header:"Confirm Deletion",icon:"pi pi-exclamation-triangle",acceptClass:"p-button-danger",accept:()=>{w("deleteItem",t)},reject:()=>{}})},D=t=>t?new Date(t).toLocaleDateString():"",B=t=>x.schema?.properties?.[t]||null,Z=(t,c)=>{const i=t.toLowerCase();return i.includes("email")||c?.type==="email"?"pi pi-envelope text-blue-500":i.includes("phone")||i.includes("mobile")||c?.type==="phone"?"pi pi-phone text-green-500":i.includes("linkedin")||i.includes("social")?"pi pi-linkedin text-blue-600":i.includes("website")||i.includes("url")?"pi pi-globe text-purple-500":i.includes("address")||i.includes("location")?"pi pi-map-marker text-red-500":"pi pi-user text-gray-500"},G=P(""),Q=()=>{if(v.value.length>0){const c=v.value[0][1];if(c&&typeof c=="string"){const i=c.trim().split(/\s+/);if(i.length>=2)return`${i[0][0]}${i[i.length-1][0]}`.toUpperCase();if(i.length===1)return i[0][0].toUpperCase()}}const t=Object.values(x.item).find(c=>c&&typeof c=="string"&&c.trim().length>0);return t?t.trim()[0].toUpperCase():"?"},ee=t=>{const c=Object.entries(t).find(([d,m])=>m&&(d.toLowerCase().includes("avatar")||d.toLowerCase().includes("profile")||d.toLowerCase().includes("photo")||d.toLowerCase().includes("image")));if(c){const d=c[1];if(Array.isArray(d)&&d.length>0){const m=d[0];if(m&&m.url)return m.url}if(d&&typeof d=="object"&&!Array.isArray(d)){if(d.url)return d.url;if(d.files&&Array.isArray(d.files)&&d.files.length>0){const m=d.files[0];if(m&&m.url)return m.url}}if(typeof d=="string"&&d.trim())return d.trim()}const i=Object.entries(t).find(([d,m])=>{if(m&&typeof m=="object"){if(m.url&&typeof m.url=="string")return!0;if(m.files&&Array.isArray(m.files)&&m.files.length>0)return m.files.some(O=>O&&O.url)}return!1});if(i){const d=i[1];if(d.url)return d.url;if(d.files&&Array.isArray(d.files)&&d.files.length>0){const m=d.files[0];if(m&&m.url)return m.url}}if(x.schema?.properties){const d=Object.entries(x.schema.properties).find(([m,O])=>O.type==="files");if(d){const m=t[d[0]];if(Array.isArray(m)&&m.length>0){const O=m[0];if(O&&O.url)return O.url}}}return null};we(()=>x.item,t=>{if(t){const c=ee(t);G.value=c}},{immediate:!0,deep:!0});const te=t=>{console.error("Avatar image failed to load:",t.target.src)},se=t=>{console.log("Avatar image loaded successfully:",t.target.src)},ae=t=>{if(!t)return!1;if(t.type&&t.type.startsWith("image/"))return!0;const c=t.name||t.filename||"";return[".jpg",".jpeg",".png",".gif",".bmp",".webp",".svg",".tiff",".ico"].some(d=>c.toLowerCase().endsWith(d))},oe=t=>t.url?t.url:t.preview?t.preview:t.file&&t.file instanceof File?URL.createObjectURL(t.file):"",l=t=>{if(!t)return"";const c=["Bytes","KB","MB","GB"],i=Math.floor(Math.log(t)/Math.log(1024));return Math.round(t/Math.pow(1024,i)*100)/100+" "+c[i]},o=t=>t>=9?"bg-green-400":t>=8?"bg-orange-400":t>=7?"bg-yellow-400":t>=6?"bg-blue-400":"bg-gray-400",a=t=>t>=9?"bg-green-500":t>=8?"bg-orange-500":t>=7?"bg-yellow-500":t>=6?"bg-blue-500":"bg-gray-500";return(t,c)=>n.item&&Object.keys(n.item).length>0?(s(),r("div",It,[c[3]||(c[3]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 rounded-lg p-0.5 shadow-lg",style:{filter:"drop-shadow(0 10px 25px rgba(0, 144, 247, 0.3)) drop-shadow(0 4px 6px rgba(186, 98, 252, 0.2)) drop-shadow(0 1px 3px rgba(242, 65, 107, 0.2)) drop-shadow(0 0 0 rgba(245, 86, 0, 0.1))"}},[e("div",{class:"bg-white rounded-lg h-full w-full"})],-1)),e("div",Nt,[e("div",zt,[e("div",Bt,[R(ie,{icon:"pi pi-pencil",severity:"success",onClick:j}),R(ie,{icon:"pi pi-trash",severity:"danger",onClick:A})])]),v.value.length>0?(s(),r("div",Mt,[e("div",Ut,[G.value?(s(),r("div",Vt,[e("img",{src:G.value,alt:Q(),class:"w-24 h-24 rounded-full border-2 border-gray-200 shadow-md bg-gray-100 object-cover",onError:te,onLoad:se},null,40,Dt)])):(s(),E(W(xe),{key:1,label:Q(),size:"xlarge",shape:"circle",class:"border-2 border-gray-200 shadow-md bg-gray-100 p-2"},null,8,["label"]))]),(s(!0),r(F,null,k(v.value,([i,d])=>(s(),r("div",{key:i,class:"flex flex-col justify-start gap-2 mb-2 ml-4"},[e("h2",Rt,h(d),1),T.value.length>0?(s(),r("div",qt,[e("div",Et,[(s(!0),r(F,null,k(T.value,([m,O])=>(s(),E(ce,{key:m,value:O,"field-name":m,"format-label":ue=>b(ue)},null,8,["value","field-name","format-label"]))),128))])])):$("",!0)]))),128))])):$("",!0),U.value.length>0?(s(),r("div",Tt,[e("div",Pt,[(s(!0),r(F,null,k(U.value,([i,d])=>(s(),r("div",{key:i,class:"flex items-center justify-start bg-blue-50 rounded-lg p-1 gap-1"},[e("div",Ht,[e("i",{class:S(Z(i,B(i)))},null,2)]),e("div",Wt,[e("span",{class:"text-gray-800 font-medium text-sm truncate max-w-32",title:d||"Not provided"},h(d||"Not provided"),9,Gt)])]))),128))])])):$("",!0),_.value.length>0?(s(),r("div",Jt,[e("div",Kt,[(s(!0),r(F,null,k(_.value,([i,d])=>(s(),r("div",{key:i,class:"flex flex-col items-center justify-between bg-green-50 rounded-lg p-1 border border-green-200"},[e("div",Qt,[e("span",{class:"text-sm font-medium text-gray-700 truncate max-w-24",title:b(i)},h(b(i)),9,Xt)]),e("div",Yt,[e("span",Zt,h(V(d||0,i)),1)])]))),128))])])):$("",!0),M.value.length>0?(s(),r("div",es,[e("div",ts,[(s(!0),r(F,null,k(M.value,([i,d])=>(s(),r("div",{key:i,class:"flex-col items-center justify-between bg-gray-50 rounded-lg p-3"},[e("div",ss,[e("div",rs,[e("i",{class:S([W(re)(i,B(i)),"text-blue-500"])},null,2),e("span",{class:"text-sm font-medium text-gray-700",title:b(i)},h(b(i)),9,ls)]),e("span",is,h(V(d||0,i)),1)])]))),128))])])):$("",!0),z.value.length>0?(s(),r("div",ns,[e("div",as,[(s(!0),r(F,null,k(z.value,([i,d])=>(s(),r("div",{key:i,class:"flex-col items-center justify-between bg-purple-50 rounded-lg p-3 border border-purple-200"},[e("div",os,[c[0]||(c[0]=e("i",{class:"pi pi-link text-purple-600"},null,-1)),e("span",{class:"text-sm font-medium text-gray-700",title:b(i)},h(b(i)),9,ds)]),e("div",cs,[e("a",{href:d,target:"_blank",rel:"noopener noreferrer",class:"text-purple-600 hover:text-purple-800 underline",title:d},h(d||"No URL"),9,us)])]))),128))])])):$("",!0),I.value.length>0?(s(),r("div",ps,[e("div",gs,[(s(!0),r(F,null,k(I.value,([i,d])=>(s(),r("div",{key:i,class:"space-y-1"},[e("div",fs,[d?.emoji?(s(),r("span",ms,h(d.emoji),1)):d?.icon?(s(),r("i",{key:1,class:S([d.icon,"mr-2 text-gray-500"])},null,2)):(s(),r("i",hs)),e("span",{class:"truncate max-w-32",title:b(i)},h(b(i)),9,xs)]),e("div",bs,[n.item[i]&&Array.isArray(n.item[i])&&n.item[i].length>0?(s(),r("div",vs,[(s(!0),r(F,null,k(n.item[i],(m,O)=>(s(),r("div",{key:O,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg border border-gray-200"},[e("div",ys,[ae(m)?(s(),r("div",_s,[e("img",{src:oe(m),alt:m.name||"File preview",class:"w-12 h-12 object-cover rounded-lg border border-gray-200"},null,8,ws)])):(s(),r("i",$s)),e("div",Fs,[e("p",ks,h(m.name||"Unknown file"),1),m.size?(s(),r("p",Cs,h(l(m.size)),1)):$("",!0)])]),e("div",Ls,[m.url?(s(),r("a",{key:0,href:m.url,target:"_blank",rel:"noopener noreferrer",class:"text-sm text-blue-600 hover:text-blue-800 hover:underline"}," View ",8,js)):$("",!0)])]))),128))])):(s(),r("div",Ss,c[1]||(c[1]=[e("i",{class:"pi pi-file text-4xl text-gray-300 mb-2 block"},null,-1),e("p",{class:"text-sm"},"No files uploaded",-1)])))])]))),128))])])):$("",!0),q.value.length>0?(s(),r("div",As,[e("div",Os,[(s(!0),r(F,null,k(q.value,([i,d])=>(s(),r("div",{key:i,class:"space-y-2"},[e("div",Is,[e("span",{class:"truncate max-w-32",title:b(i)},h(b(i)),9,Ns)]),e("div",zs,[e("div",Bs,[e("div",{class:S([o(d),"h-full transition-all duration-300 ease-in-out"]),style:Y({width:`${Math.min(d/10*100,100)}%`})},null,6)]),c[2]||(c[2]=e("div",{class:"flex justify-between text-xs text-gray-500 mt-1"},[e("span",null,"0"),e("span",null,"10")],-1)),e("div",{class:S([a(d),"absolute top-0 transform -translate-y-2 rounded-full px-2 py-1 text-white text-xs font-medium shadow-lg"]),style:Y({left:`calc(${Math.min(d/10*100,100)}% - 12px)`})},h(d),7)])]))),128))])])):$("",!0),e("div",Ms,[(s(!0),r(F,null,k(H.value,([i,d])=>(s(),r("div",{key:i,class:"space-y-1 pt-2 border-b border-gray-100 last:border-b-0"},[u(i)?(s(),r("div",Us,[d?.emoji?(s(),r("span",Vs,h(d.emoji),1)):d?.icon?(s(),r("i",{key:1,class:S([d.icon,"mr-2 text-gray-500"])},null,2)):$("",!0),e("span",{class:"truncate max-w-32",title:b(i)},h(b(i)),9,Ds)])):$("",!0),(s(),E($e(L(i)),{value:n.item[i],"field-name":i,schema:n.schema},null,8,["value","field-name","schema"]))]))),128))]),e("div",Rs,[e("span",null,"Added: "+h(D(n.item.created_time)),1),n.item.last_edited_time!==n.item.created_time?(s(),r("span",qs," • Updated: "+h(D(n.item.last_edited_time)),1)):$("",!0)])])])):$("",!0)}},Ts={class:"relative"},Ps={class:"relative z-10 bg-white rounded-lg overflow-hidden"},Hs={class:"overflow-x-auto"},Ws={class:"w-full"},Gs={class:"bg-gray-50 border-b border-gray-200"},Js={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider sticky left-0 bg-gray-50 z-10"},Ks={class:"flex items-center space-x-2"},Qs={class:"flex items-center space-x-2"},Xs={class:"flex items-center space-x-2"},Ys={class:"flex items-center space-x-2"},Zs={class:"flex items-center space-x-2"},er={class:"flex items-center space-x-2"},tr={class:"flex items-center space-x-2"},sr={class:"bg-white divide-y divide-gray-200"},rr={class:"px-6 py-4 whitespace-nowrap sticky left-0 bg-white z-10"},lr={class:"flex items-center space-x-3"},ir={key:0,class:"flex-shrink-0"},nr=["src","alt"],ar={class:"text-sm font-medium text-gray-900"},or={key:0,class:"flex flex-wrap gap-2 mt-1"},dr={class:"text-xs text-gray-500 mt-1"},cr={class:"text-sm text-gray-600"},ur={class:"text-sm"},pr={key:0,class:"flex items-center space-x-2"},gr={class:"text-gray-900 font-mono"},fr={key:1,class:"text-gray-900 font-mono"},mr={class:"flex flex-wrap gap-1"},hr={key:0,class:"text-sm text-gray-400"},xr={class:"space-y-2"},br={key:0,class:"space-y-1"},vr={key:0,class:"flex-shrink-0"},yr=["src","alt"],_r={key:1,class:"pi pi-file text-blue-500 text-sm"},wr={class:"flex-1 min-w-0"},$r={class:"text-xs text-gray-900 truncate"},Fr=["href"],kr={key:0,class:"text-xs text-gray-500"},Cr={key:1,class:"text-sm text-gray-400"},Lr={class:"space-y-2"},jr={class:"relative"},Sr={class:"w-full h-2 bg-gray-200 rounded-full overflow-hidden"},Ar={key:0,class:"text-sm"},Or={key:1,class:"text-sm text-gray-400"},Ir={key:1,class:"text-sm"},Nr=["href"],zr={key:1,class:"text-sm text-gray-400"},Br={key:2,class:"text-sm text-gray-900"},Mr={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium sticky right-0 bg-white z-10"},Ur={class:"flex gap-2 justify-end"},Vr={__name:"TableView",props:{items:{type:Array,default:()=>[]},schema:{type:Object,default:null}},emits:["deleteItem"],setup(n,{emit:g}){const p=ne(),f=n,x=g,w=l=>{if(!f.schema?.properties||!l)return null;const o=Object.entries(f.schema.properties).find(([a,t])=>t.type==="title");return o?l[o[0]]:null},y=l=>{if(!f.schema?.properties||!l)return[];const o=[];return Object.entries(f.schema.properties).forEach(([a,t])=>{t.type==="checkbox"&&l[a]!==void 0&&o.push([a,l[a]||!1])}),o},v=l=>{const o=l.toLowerCase();return o.includes("email")?"pi pi-envelope":o.includes("phone")||o.includes("mobile")?"pi pi-phone":o.includes("linkedin")||o.includes("social")?"pi pi-linkedin":o.includes("website")||o.includes("url")?"pi pi-globe":o.includes("address")||o.includes("location")?"pi pi-map-marker":"pi pi-user"},U=(l,o)=>{const a=l.toLowerCase();return o.type==="url"?"pi pi-link":o.type==="date"?"pi pi-calendar":o.type==="select"?"pi pi-list":o.type==="rich_text"?"pi pi-file-edit":o.type==="files"?"pi pi-file":o.type==="avatar"||a.includes("avatar")||a.includes("profile")||a.includes("photo")?"pi pi-user":a.includes("bio")||a.includes("description")||a.includes("notes")?"pi pi-file-text":(a.includes("status"),"pi pi-info-circle")},T=l=>{if(!f.schema?.properties?.[l])return!1;const o=f.schema.properties[l];return o.type==="number"&&o.number?.format&&o.number.format!=="number"},_=l=>{const o=w(l);if(o&&typeof o=="string"){const t=o.trim().split(/\s+/);if(t.length>=2)return`${t[0][0]}${t[t.length-1][0]}`.toUpperCase();if(t.length===1)return t[0][0].toUpperCase()}const a=Object.values(l).find(t=>t&&typeof t=="string"&&t.trim().length>0);return a?a.trim()[0].toUpperCase():"?"},M=l=>{const o=Object.entries(l).find(([t,c])=>c&&(t.toLowerCase().includes("avatar")||t.toLowerCase().includes("profile")||t.toLowerCase().includes("photo")||t.toLowerCase().includes("image")));if(o){const t=o[1];if(Array.isArray(t)&&t.length>0){const c=t[0];if(c&&c.url)return c.url}if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.url)return t.url;if(t.files&&Array.isArray(t.files)&&t.files.length>0){const c=t.files[0];if(c&&c.url)return c.url}}if(typeof t=="string"&&t.trim())return t.trim()}const a=Object.entries(l).find(([t,c])=>{if(c&&typeof c=="object"){if(c.url&&typeof c.url=="string")return!0;if(c.files&&Array.isArray(c.files)&&c.files.length>0)return c.files.some(i=>i&&i.url)}return!1});if(a){const t=a[1];if(t.url)return t.url;if(t.files&&Array.isArray(t.files)&&t.files.length>0){const c=t.files[0];if(c&&c.url)return c.url}}if(f.schema?.properties){const t=Object.entries(f.schema.properties).find(([c,i])=>i.type==="files");if(t){const c=l[t[0]];if(Array.isArray(c)&&c.length>0){const i=c[0];if(i&&i.url)return i.url}}}return null},z=l=>le.formatLabel(l),I=(l,o)=>{if(typeof l!="number")return l;const a=f.schema?.properties?.[o];return a?he(l,a):l.toLocaleString()},q=(l,o)=>typeof l=="object"&&l!==null?l.url?l.url:l.rich_text?l.rich_text.map(a=>a.plain_text).join(""):l.select?l.select.name:l.multi_select?l.multi_select.map(a=>a.name).join(", "):l.date?l.date.start:JSON.stringify(l):l||"N/A",H=l=>l?new Date(l).toLocaleDateString():"",C=(l,o)=>{const a={name:o,options:f.schema?.properties?.[o]?.options||[]};return de(l,a,f.schema)},L=(l,o)=>{const a={name:o,options:f.schema?.properties?.[o]?.options||[]};return de({value:l,label:l,name:l},a,f.schema)},u=(l,o)=>{if(!l)return"No selection";const t=(f.schema?.properties?.[o]?.options||[]).find(c=>c.value===l||c.name===l);return t&&(t.label||t.name)||l},b=l=>typeof l=="object"&&l!==null&&l.url||l,V=l=>{if(!l)return!1;if(l.type&&l.type.startsWith("image/"))return!0;const o=l.name||l.filename||"";return[".jpg",".jpeg",".png",".gif",".bmp",".webp",".svg",".tiff",".ico"].some(t=>o.toLowerCase().endsWith(t))},j=l=>l.url?l.url:l.preview?l.preview:l.file&&l.file instanceof File?URL.createObjectURL(l.file):"",A=l=>l>=9?"bg-green-400":l>=8?"bg-orange-400":l>=7?"bg-yellow-400":l>=6?"bg-blue-400":"bg-gray-400",D=l=>l>=9?"bg-green-500":l>=8?"bg-orange-500":l>=7?"bg-yellow-500":l>=6?"bg-blue-500":"bg-gray-500",B=()=>{if(!f.schema?.properties)return null;const l=Object.entries(f.schema.properties).find(([o,a])=>a.type==="title");return l?z(l[0]):null},Z=()=>f.schema?.properties?Object.entries(f.schema.properties).filter(([l,o])=>l.toLowerCase().includes("email")||l.toLowerCase().includes("phone")||l.toLowerCase().includes("contact")||o.type==="email"||o.type==="phone"):[],G=()=>f.schema?.properties?Object.entries(f.schema.properties).filter(([l,o])=>o.type==="number"):[],Q=()=>f.schema?.properties?Object.entries(f.schema.properties).filter(([l,o])=>o.type==="multi_select"):[],ee=()=>f.schema?.properties?Object.entries(f.schema.properties).filter(([l,o])=>o.type==="files"):[],te=()=>f.schema?.properties?Object.entries(f.schema.properties).filter(([l,o])=>o.type==="number"&&(l.toLowerCase().includes("skill")||l.toLowerCase().includes("ability")||l.toLowerCase().includes("rating")||l.toLowerCase().includes("coding")||l.toLowerCase().includes("problem")||l.toLowerCase().includes("communication"))):[],se=()=>f.schema?.properties?Object.entries(f.schema.properties).filter(([l,o])=>!(o.type==="title"||o.type==="number"||o.type==="multi_select"||o.type==="files"||o.type==="checkbox"||l.toLowerCase().includes("email")||l.toLowerCase().includes("phone")||l.toLowerCase().includes("contact")||l.toLowerCase().includes("skill")||l.toLowerCase().includes("ability")||l.toLowerCase().includes("rating")||l.toLowerCase().includes("coding")||l.toLowerCase().includes("problem")||l.toLowerCase().includes("communication"))):[],ae=l=>{p.push(`/edit/${l.id}`)},oe=l=>{x("deleteItem",l.id)};return(l,o)=>(s(),r("div",Ts,[o[8]||(o[8]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 rounded-lg p-0.5 shadow-lg",style:{filter:"drop-shadow(0 10px 25px rgba(0, 144, 247, 0.3)) drop-shadow(0 4px 6px rgba(186, 98, 252, 0.2)) drop-shadow(0 1px 3px rgba(242, 65, 107, 0.2)) drop-shadow(0 0 0 rgba(245, 86, 0, 0.1))"}},[e("div",{class:"bg-white rounded-lg h-full w-full"})],-1)),e("div",Ps,[o[7]||(o[7]=e("div",{class:"bg-gray-50 px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"All Items")],-1)),e("div",Hs,[e("table",Ws,[e("thead",Gs,[e("tr",null,[e("th",Js,[e("div",Ks,[o[0]||(o[0]=e("i",{class:"pi pi-user text-blue-500"},null,-1)),e("span",null,h(B()||"Item"),1)])]),(s(!0),r(F,null,k(Z(),([a,t])=>(s(),r("th",{key:a,class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},[e("div",Qs,[e("i",{class:S([v(a),"text-blue-500"])},null,2),e("span",null,h(z(a)),1)])]))),128)),(s(!0),r(F,null,k(G(),([a,t])=>(s(),r("th",{key:a,class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},[e("div",Xs,[e("i",{class:S([W(re)(a),"text-green-500"])},null,2),e("span",null,h(z(a)),1)])]))),128)),(s(!0),r(F,null,k(Q(),([a,t])=>(s(),r("th",{key:a,class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider min-w-48"},[e("div",Ys,[o[1]||(o[1]=e("i",{class:"pi pi-tags text-purple-500"},null,-1)),e("span",null,h(z(a)),1)])]))),128)),(s(!0),r(F,null,k(ee(),([a,t])=>(s(),r("th",{key:a,class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider min-w-32"},[e("div",Zs,[o[2]||(o[2]=e("i",{class:"pi pi-paperclip text-blue-500"},null,-1)),e("span",null,h(z(a)),1)])]))),128)),(s(!0),r(F,null,k(te(),([a,t])=>(s(),r("th",{key:a,class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider min-w-40"},[e("div",er,[o[3]||(o[3]=e("i",{class:"pi pi-star text-yellow-500"},null,-1)),e("span",null,h(z(a)),1)])]))),128)),(s(!0),r(F,null,k(se(),([a,t])=>(s(),r("th",{key:a,class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},[e("div",tr,[e("i",{class:S([U(a,t),"text-gray-500"])},null,2),e("span",null,h(z(a)),1)])]))),128)),o[4]||(o[4]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider sticky right-0 bg-gray-50 z-10"}," Actions ",-1))])]),e("tbody",sr,[(s(!0),r(F,null,k(n.items,a=>(s(),r("tr",{key:a.id,class:"hover:bg-gray-50"},[e("td",rr,[e("div",lr,[M(a)?(s(),r("div",ir,[e("img",{src:M(a),alt:_(a),class:"w-10 h-10 rounded-full border-2 border-gray-200 shadow-sm bg-gray-100 object-cover"},null,8,nr)])):(s(),E(W(xe),{key:1,label:_(a),size:"medium",shape:"circle",class:"border-2 border-gray-200 shadow-sm bg-gray-100"},null,8,["label"])),e("div",null,[e("div",ar,h(w(a)||"Untitled"),1),y(a).length>0?(s(),r("div",or,[(s(!0),r(F,null,k(y(a),([t,c])=>(s(),E(ce,{key:t,value:c,"field-name":t,"format-label":z},null,8,["value","field-name"]))),128))])):$("",!0),e("div",dr,h(H(a.created_time)),1)])])]),(s(!0),r(F,null,k(Z(),([t,c])=>(s(),r("td",{key:t,class:"px-6 py-4"},[e("div",cr,h(a[t]||"Not provided"),1)]))),128)),(s(!0),r(F,null,k(G(),([t,c])=>(s(),r("td",{key:t,class:"px-6 py-4"},[e("div",ur,[T(t)?(s(),r("span",pr,[e("i",{class:S([W(re)(t),"text-green-500"])},null,2),e("span",gr,h(I(a[t]||0,t)),1)])):(s(),r("span",fr,h(I(a[t]||0,t)),1))])]))),128)),(s(!0),r(F,null,k(Q(),([t,c])=>(s(),r("td",{key:t,class:"px-6 py-4 min-w-48"},[e("div",mr,[(s(!0),r(F,null,k(a[t]||[],i=>(s(),r("span",{key:i.name||i,class:S([C(i,t),"px-2 py-1 text-xs rounded-full border font-medium"])},h(i.name||i),3))),128)),!a[t]||a[t].length===0?(s(),r("span",hr," No tags ")):$("",!0)])]))),128)),(s(!0),r(F,null,k(ee(),([t,c])=>(s(),r("td",{key:t,class:"px-6 py-4 min-w-32"},[e("div",xr,[a[t]&&Array.isArray(a[t])&&a[t].length>0?(s(),r("div",br,[(s(!0),r(F,null,k(a[t].slice(0,2),(i,d)=>(s(),r("div",{key:d,class:"flex items-center space-x-2"},[V(i)?(s(),r("div",vr,[e("img",{src:j(i),alt:i.name||"File preview",class:"w-8 h-8 object-cover rounded border border-gray-200"},null,8,yr)])):(s(),r("i",_r)),e("div",wr,[e("p",$r,h(i.name||"Unknown file"),1),i.url?(s(),r("a",{key:0,href:i.url,target:"_blank",rel:"noopener noreferrer",class:"text-xs text-blue-600 hover:text-blue-800 hover:underline"}," View ",8,Fr)):$("",!0)])]))),128)),a[t].length>2?(s(),r("div",kr," +"+h(a[t].length-2)+" more files ",1)):$("",!0)])):(s(),r("div",Cr," No files "))])]))),128)),(s(!0),r(F,null,k(te(),([t,c])=>(s(),r("td",{key:t,class:"px-6 py-4 min-w-40"},[e("div",Lr,[e("div",jr,[e("div",Sr,[e("div",{class:S([A(a[t]||0),"h-full transition-all duration-300 ease-in-out"]),style:Y({width:`${Math.min((a[t]||0)/10*100,100)}%`})},null,6)]),o[5]||(o[5]=e("div",{class:"flex justify-between text-xs text-gray-500 mt-1"},[e("span",null,"0"),e("span",null,"10")],-1)),e("div",{class:S([D(a[t]||0),"absolute top-0 transform -translate-y-1 rounded-full px-2 py-1 text-white text-xs font-medium shadow-lg"]),style:Y({left:`calc(${Math.min((a[t]||0)/10*100,100)}% - 12px)`})},h(a[t]||0),7)])])]))),128)),(s(!0),r(F,null,k(se(),([t,c])=>(s(),r("td",{key:t,class:"px-6 py-4"},[c.type==="select"?(s(),r("div",Ar,[a[t]?(s(),r("span",{key:0,class:S([L(a[t],t),"px-2 py-1 text-xs rounded-full border font-medium"])},h(u(a[t],t)),3)):(s(),r("span",Or,"No selection"))])):c.type==="url"?(s(),r("div",Ir,[a[t]?(s(),r("a",{key:0,href:b(a[t]),target:"_blank",rel:"noopener noreferrer",class:"text-blue-600 hover:text-blue-800 underline flex items-center space-x-1"},[o[6]||(o[6]=e("i",{class:"pi pi-external-link text-xs"},null,-1)),e("span",null,h(b(a[t])),1)],8,Nr)):(s(),r("span",zr,"No URL"))])):(s(),r("div",Br,h(q(a[t])),1))]))),128)),e("td",Mr,[e("div",Ur,[R(ie,{icon:"pi pi-pencil",severity:"success",size:"small",onClick:t=>ae(a)},null,8,["onClick"]),R(ie,{icon:"pi pi-trash",severity:"danger",size:"small",onClick:t=>oe(a)},null,8,["onClick"])])])]))),128))])])])])]))}},Dr={class:"bg-white hover:shadow-lg transition-shadow p-4 border-2 border-black rounded-lg shadow-lg flex flex-col h-full"},Rr={class:"text-center py-16 flex-1 flex flex-col items-center justify-center"},qr={__name:"EmptyState",emits:["add-item"],setup(n){return(g,p)=>{const f=K;return s(),r("div",Dr,[e("div",Rr,[p[2]||(p[2]=e("div",{class:"text-6xl mb-4"},"📋",-1)),p[3]||(p[3]=e("h3",{class:"text-2xl font-semibold text-gray-900 mb-2"},"No items yet",-1)),p[4]||(p[4]=e("p",{class:"text-gray-600 mb-6 text-center max-w-md"},"Start building your collection by adding your first item to get started.",-1)),R(f,{onClick:p[0]||(p[0]=x=>g.$emit("add-item")),severity:"primary"},{default:X(()=>p[1]||(p[1]=[e("i",{class:"pi pi-plus mr-2"},null,-1),J("Add First Item ",-1)])),_:1,__:[1]})])])}}},Er={class:"flex gap-4 items-center mb-6"},Tr={__name:"SearchFilterSkeleton",setup(n){return(g,p)=>(s(),r("div",Er,p[0]||(p[0]=[Fe('<div class="relative flex-1"><div class="absolute inset-0 bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 rounded-lg p-0.5 shadow-lg" style="filter:drop-shadow(0 10px 25px rgba(0, 144, 247, 0.3)) drop-shadow(0 4px 6px rgba(186, 98, 252, 0.2)) drop-shadow(0 1px 3px rgba(242, 65, 107, 0.2)) drop-shadow(0 0 0 rgba(245, 86, 0, 0.1));"><div class="bg-white rounded-lg h-full w-full"></div></div><div class="relative z-10"><div class="relative"><div class="h-10 bg-gray-200 rounded-lg animate-pulse"></div><div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"><div class="w-4 h-4 bg-gray-300 rounded animate-pulse"></div></div></div></div></div><div class="flex-shrink-0 flex gap-2"><div class="relative"><div class="absolute inset-0 bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 rounded-lg p-0.5 shadow-lg" style="filter:drop-shadow(0 10px 25px rgba(0, 144, 247, 0.3)) drop-shadow(0 4px 6px rgba(186, 98, 252, 0.2)) drop-shadow(0 1px 3px rgba(242, 65, 107, 0.2)) drop-shadow(0 0 0 rgba(245, 86, 0, 0.1));"><div class="bg-white rounded-lg h-full w-full"></div></div><div class="relative z-10 px-3 py-2.5 rounded-lg flex items-center gap-2"><div class="w-4 h-4 bg-gray-300 rounded animate-pulse"></div><div class="h-4 bg-gray-300 rounded animate-pulse" style="width:60px;"></div></div></div><div class="relative"><div class="absolute inset-0 bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 rounded-lg p-0.5 shadow-lg" style="filter:drop-shadow(0 10px 25px rgba(0, 144, 247, 0.3)) drop-shadow(0 4px 6px rgba(186, 98, 252, 0.2)) drop-shadow(0 1px 3px rgba(242, 65, 107, 0.2)) drop-shadow(0 0 0 rgba(245, 86, 0, 0.1));"><div class="bg-white rounded-lg h-full w-full"></div></div><div class="relative z-10 px-3 py-2.5 rounded-lg flex items-center gap-2"><div class="w-4 h-4 bg-gray-300 rounded animate-pulse"></div><div class="h-4 bg-gray-300 rounded animate-pulse" style="width:70px;"></div></div></div></div><div class="flex-shrink-0"><div class="relative"><div class="absolute inset-0 bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 rounded-lg p-0.5 shadow-lg" style="filter:drop-shadow(0 10px 25px rgba(0, 144, 247, 0.3)) drop-shadow(0 4px 6px rgba(186, 98, 252, 0.2)) drop-shadow(0 1px 3px rgba(242, 65, 107, 0.2)) drop-shadow(0 0 0 rgba(245, 86, 0, 0.1));"><div class="bg-gray-100 rounded-lg h-full w-full"></div></div><div class="relative z-10 flex bg-gray-100 rounded-lg p-1"><div class="px-3 py-2 rounded-md flex items-center gap-2"><div class="w-4 h-4 bg-gray-300 rounded animate-pulse"></div><div class="h-4 bg-gray-300 rounded animate-pulse" style="width:50px;"></div></div><div class="px-3 py-2 rounded-md flex items-center gap-2"><div class="w-4 h-4 bg-gray-300 rounded animate-pulse"></div><div class="h-4 bg-gray-300 rounded animate-pulse" style="width:60px;"></div></div></div></div></div>',3)])))}},Pr={class:"space-y-6"},Hr={key:0},Wr={key:1,class:"space-y-6"},Gr={class:"flex flex-col gap-4 lg:hidden"},Jr={class:"relative w-full"},Kr={class:"relative z-10"},Qr={class:"relative"},Xr={class:"flex gap-2 items-center"},Yr={class:"flex gap-2 flex-1"},Zr={class:"relative flex-1"},el={class:"hidden sm:inline"},tl={class:"relative flex-1"},sl={class:"hidden sm:inline"},rl={class:"flex-shrink-0"},ll={class:"relative"},il={class:"relative z-10 flex bg-gray-100 rounded-lg p-1"},nl={class:"hidden lg:flex gap-4 items-center"},al={class:"relative flex-1"},ol={class:"relative z-10"},dl={class:"relative"},cl={class:"flex-shrink-0 flex gap-2"},ul={class:"relative"},pl={class:"relative"},gl={class:"flex-shrink-0"},fl={class:"relative"},ml={class:"relative z-10 flex bg-gray-100 rounded-lg p-1"},hl={key:0},xl={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},bl={__name:"ListView",props:{loading:{type:Boolean,default:!1},loadingMore:{type:Boolean,default:!1},items:{type:Array,default:()=>[]},schema:{type:Object,default:null},hasMore:{type:Boolean,default:!1}},emits:["deleteItem","loadMore"],setup(n,{emit:g}){const p=ne(),f=P("card"),x=P(""),w=P(!1),y=P(!1);P("Verified"),P("Available");const v=n,U=g,T=N(()=>(v.items.length===0||!v.schema)&&!v.loading),_=N(()=>{if(v.items.length===0)return{verified:"Verified",available:"Available"};const L=Object.entries(v.items[0]).filter(([A,D])=>typeof D=="boolean");let u="Verified",b="Available";const V=L.find(([A,D])=>{const B=A.toLowerCase();return B.includes("verified")||B.includes("verify")});V&&(u=le.formatLabel(V[0]));const j=L.find(([A,D])=>{const B=A.toLowerCase();return B.includes("available")||B.includes("hire")||B.includes("hiring")});return j&&(b=le.formatLabel(j[0])),{verified:u,available:b}}),M=N(()=>{let L=v.items;if(v.items.length>0&&(w.value||y.value)&&(console.log("Available fields:",Object.keys(v.items[0])),console.log("Boolean fields:",Object.entries(v.items[0]).filter(([b,V])=>typeof V=="boolean"))),(w.value||y.value)&&(L=L.filter(b=>{if(w.value&&y.value){const V=Object.entries(b).some(([A,D])=>{if(typeof D!="boolean")return!1;const B=A.toLowerCase();return(B.includes("verified")||B.includes("verify"))&&D===!0}),j=Object.entries(b).some(([A,D])=>{if(typeof D!="boolean")return!1;const B=A.toLowerCase();return(B.includes("available")||B.includes("hire")||B.includes("hiring"))&&D===!0});return V&&j}return w.value?Object.entries(b).some(([V,j])=>{if(typeof j!="boolean")return!1;const A=V.toLowerCase();return(A.includes("verified")||A.includes("verify"))&&j===!0}):y.value?Object.entries(b).some(([V,j])=>{if(typeof j!="boolean")return!1;const A=V.toLowerCase();return(A.includes("available")||A.includes("hire")||A.includes("hiring"))&&j===!0}):!0})),!x.value.trim())return L;const u=x.value.toLowerCase().trim();return L.filter(b=>Object.entries(b).some(([V,j])=>j==null?!1:typeof j=="string"?j.toLowerCase().includes(u):Array.isArray(j)?j.some(A=>typeof A=="string"?A.toLowerCase().includes(u):A.name&&A.name.toLowerCase().includes(u)):typeof j=="object"&&j.name?j.name.toLowerCase().includes(u):typeof j=="number"?j.toString().includes(u):!1))}),z=()=>{x.value=""},I=()=>{w.value=!w.value},q=()=>{y.value=!y.value},H=()=>{p.push("/add")},C=L=>{U("deleteItem",L)};return(L,u)=>(s(),r("div",Pr,[n.loading||!n.schema||n.items.length===0?(s(),r("div",Hr,[R(Tr),R(pe,{count:6,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"})])):n.schema&&n.items.length>0?(s(),r("div",Wr,[e("div",Gr,[e("div",Jr,[u[8]||(u[8]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 rounded-lg p-0.5 shadow-lg",style:{filter:"drop-shadow(0 10px 25px rgba(0, 144, 247, 0.3)) drop-shadow(0 4px 6px rgba(186, 98, 252, 0.2)) drop-shadow(0 1px 3px rgba(242, 65, 107, 0.2)) drop-shadow(0 0 0 rgba(245, 86, 0, 0.1))"}},[e("div",{class:"bg-white rounded-lg h-full w-full"})],-1)),e("div",Kr,[e("div",Qr,[ge(e("input",{"onUpdate:modelValue":u[0]||(u[0]=b=>x.value=b),type:"text",placeholder:"Search items...",class:"w-full pl-10 pr-4 py-2.5 bg-white border-0 rounded-lg text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-0"},null,512),[[fe,x.value]]),u[7]||(u[7]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("i",{class:"pi pi-search text-gray-400"})],-1)),x.value?(s(),r("button",{key:0,onClick:z,class:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600"},u[6]||(u[6]=[e("i",{class:"pi pi-times"},null,-1)]))):$("",!0)])])]),e("div",Xr,[e("div",Yr,[e("div",Zr,[u[11]||(u[11]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 rounded-lg p-0.5 shadow-lg",style:{filter:"drop-shadow(0 10px 25px rgba(0, 144, 247, 0.3)) drop-shadow(0 4px 6px rgba(186, 98, 252, 0.2)) drop-shadow(0 1px 3px rgba(242, 65, 107, 0.2)) drop-shadow(0 0 0 rgba(245, 86, 0, 0.1))"}},[e("div",{class:"bg-white rounded-lg h-full w-full"})],-1)),e("button",{onClick:I,class:S(["relative z-10 w-full px-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200 flex items-center justify-center gap-2",w.value?"bg-green-100 text-green-800 border border-green-300":"bg-white text-gray-600 hover:text-gray-800"])},[u[9]||(u[9]=e("i",{class:"pi pi-check-circle"},null,-1)),e("span",el,h(_.value.verified),1),u[10]||(u[10]=e("span",{class:"sm:hidden"},"✓",-1))],2)]),e("div",tl,[u[14]||(u[14]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 rounded-lg p-0.5 shadow-lg",style:{filter:"drop-shadow(0 10px 25px rgba(0, 144, 247, 0.3)) drop-shadow(0 4px 6px rgba(186, 98, 252, 0.2)) drop-shadow(0 1px 3px rgba(242, 65, 107, 0.2)) drop-shadow(0 0 0 rgba(245, 86, 0, 0.1))"}},[e("div",{class:"bg-white rounded-lg h-full w-full"})],-1)),e("button",{onClick:q,class:S(["relative z-10 w-full px-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200 flex items-center justify-center gap-2",y.value?"bg-blue-100 text-blue-800 border border-blue-300":"bg-white text-gray-600 hover:text-gray-800"])},[u[12]||(u[12]=e("i",{class:"pi pi-user-check"},null,-1)),e("span",sl,h(_.value.available),1),u[13]||(u[13]=e("span",{class:"sm:hidden"},"👤",-1))],2)])]),e("div",rl,[e("div",ll,[u[17]||(u[17]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 rounded-lg p-0.5 shadow-lg",style:{filter:"drop-shadow(0 10px 25px rgba(0, 144, 247, 0.3)) drop-shadow(0 4px 6px rgba(186, 98, 252, 0.2)) drop-shadow(0 1px 3px rgba(242, 65, 107, 0.2)) drop-shadow(0 0 0 rgba(245, 86, 0, 0.1))"}},[e("div",{class:"bg-gray-100 rounded-lg h-full w-full"})],-1)),e("div",il,[e("button",{onClick:u[1]||(u[1]=b=>f.value="card"),class:S(["px-2 sm:px-3 py-2 rounded-md text-sm font-medium transition-all duration-200",f.value==="card"?"bg-white text-gray-900 shadow-sm":"text-gray-500 hover:text-gray-700"])},u[15]||(u[15]=[e("i",{class:"pi pi-th-large sm:mr-2"},null,-1),e("span",{class:"hidden sm:inline"},"Card",-1)]),2),e("button",{onClick:u[2]||(u[2]=b=>f.value="table"),class:S(["px-2 sm:px-3 py-2 rounded-md text-sm font-medium transition-all duration-200",f.value==="table"?"bg-white text-gray-900 shadow-sm":"text-gray-500 hover:text-gray-700"])},u[16]||(u[16]=[e("i",{class:"pi pi-table sm:mr-2"},null,-1),e("span",{class:"hidden sm:inline"},"Table",-1)]),2)])])])])]),e("div",nl,[e("div",al,[u[20]||(u[20]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 rounded-lg p-0.5 shadow-lg",style:{filter:"drop-shadow(0 10px 25px rgba(0, 144, 247, 0.3)) drop-shadow(0 4px 6px rgba(186, 98, 252, 0.2)) drop-shadow(0 1px 3px rgba(242, 65, 107, 0.2)) drop-shadow(0 0 0 rgba(245, 86, 0, 0.1))"}},[e("div",{class:"bg-white rounded-lg h-full w-full"})],-1)),e("div",ol,[e("div",dl,[ge(e("input",{"onUpdate:modelValue":u[3]||(u[3]=b=>x.value=b),type:"text",placeholder:"Search items...",class:"w-full pl-10 pr-4 py-2.5 bg-white border-0 rounded-lg text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-0"},null,512),[[fe,x.value]]),u[19]||(u[19]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("i",{class:"pi pi-search text-gray-400"})],-1)),x.value?(s(),r("button",{key:0,onClick:z,class:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600"},u[18]||(u[18]=[e("i",{class:"pi pi-times"},null,-1)]))):$("",!0)])])]),e("div",cl,[e("div",ul,[u[22]||(u[22]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 rounded-lg p-0.5 shadow-lg",style:{filter:"drop-shadow(0 10px 25px rgba(0, 144, 247, 0.3)) drop-shadow(0 4px 6px rgba(186, 98, 252, 0.2)) drop-shadow(0 1px 3px rgba(242, 65, 107, 0.2)) drop-shadow(0 0 0 rgba(245, 86, 0, 0.1))"}},[e("div",{class:"bg-white rounded-lg h-full w-full"})],-1)),e("button",{onClick:I,class:S(["relative z-10 px-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200 flex items-center gap-2",w.value?"bg-green-100 text-green-800 border border-green-300":"bg-white text-gray-600 hover:text-gray-800"])},[u[21]||(u[21]=e("i",{class:"pi pi-check-circle"},null,-1)),e("span",null,h(_.value.verified),1)],2)]),e("div",pl,[u[24]||(u[24]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 rounded-lg p-0.5 shadow-lg",style:{filter:"drop-shadow(0 10px 25px rgba(0, 144, 247, 0.3)) drop-shadow(0 4px 6px rgba(186, 98, 252, 0.2)) drop-shadow(0 1px 3px rgba(242, 65, 107, 0.2)) drop-shadow(0 0 0 rgba(245, 86, 0, 0.1))"}},[e("div",{class:"bg-white rounded-lg h-full w-full"})],-1)),e("button",{onClick:q,class:S(["relative z-10 px-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200 flex items-center gap-2",y.value?"bg-blue-100 text-blue-800 border border-blue-300":"bg-white text-gray-600 hover:text-gray-800"])},[u[23]||(u[23]=e("i",{class:"pi pi-user-check"},null,-1)),e("span",null,h(_.value.available),1)],2)])]),e("div",gl,[e("div",fl,[u[27]||(u[27]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 rounded-lg p-0.5 shadow-lg",style:{filter:"drop-shadow(0 10px 25px rgba(0, 144, 247, 0.3)) drop-shadow(0 4px 6px rgba(186, 98, 252, 0.2)) drop-shadow(0 1px 3px rgba(242, 65, 107, 0.2)) drop-shadow(0 0 0 rgba(245, 86, 0, 0.1))"}},[e("div",{class:"bg-gray-100 rounded-lg h-full w-full"})],-1)),e("div",ml,[e("button",{onClick:u[4]||(u[4]=b=>f.value="card"),class:S(["px-3 py-2 rounded-md text-sm font-medium transition-all duration-200",f.value==="card"?"bg-white text-white shadow-sm bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 rounded-lg":"text-gray-500 hover:text-gray-700"])},u[25]||(u[25]=[e("i",{class:"pi pi-th-large mr-2"},null,-1),J(" Card View ",-1)]),2),e("button",{onClick:u[5]||(u[5]=b=>f.value="table"),class:S(["px-3 py-2 rounded-md text-sm font-medium transition-all duration-200",f.value==="table"?"bg-white text-white shadow-sm bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 rounded-lg":"text-gray-500 hover:text-gray-700"])},u[26]||(u[26]=[e("i",{class:"pi pi-table mr-2"},null,-1),J(" Table View ",-1)]),2)])])])]),f.value==="card"?(s(),r("div",hl,[e("div",xl,[(s(!0),r(F,null,k(M.value,b=>(s(),E(Es,{key:b.id,item:b,schema:n.schema,onDeleteItem:C},null,8,["item","schema"]))),128)),n.loadingMore?(s(),E(pe,{key:0,count:3,class:"contents"})):$("",!0)])])):f.value==="table"?(s(),E(Vr,{key:1,items:M.value,schema:n.schema,onDeleteItem:C},null,8,["items","schema"])):$("",!0)])):T.value?(s(),E(qr,{key:2,onAddItem:H})):$("",!0),n.hasMore&&!n.loading?(s(),E(Re,{key:3,loading:n.loadingMore,onLoadMore:L.loadMore},null,8,["loading","onLoadMore"])):$("",!0)]))}},vl={class:"home-view"},yl={class:"space-y-8"},_l={__name:"HomeView",setup(n){const g=ye(),p=N(()=>g.loading),f=N(()=>g.error),x=N(()=>g.items),w=N(()=>{if(!g.schema?.properties)return null;const L=g.getDatabaseInfo()?.schema?.properties||{};return{...g.schema,properties:Object.fromEntries(Object.entries(g.schema.properties).map(([u,b])=>[u,{...b,type:b.type,required:b.required||!1,emoji:b.emoji||null,icon:b.icon||null,number:b.number||null,select:b.select||null,multi_select:b.multi_select||null,...L[u]&&{number:{...b.number,format:L[u].number?.format||b.number?.format}}}]))}}),y=P(!1),v=P(""),U=P(""),T=P(!1),_=async()=>{try{const[C,L]=await Promise.allSettled([g.ensureSchemaLoaded(),g.fetchAllItems()]);C.status==="rejected"&&console.error("Schema loading failed:",C.reason),L.status==="rejected"&&console.error("Items loading failed:",L.reason),C.status==="fulfilled"&&L.status==="fulfilled"&&M()}catch(C){console.error("Failed to initialize:",C)}},M=()=>{const C=g.getDatabaseInfo();C&&(C.title&&(v.value=C.title),C.description&&(U.value=C.description))},z=async()=>{try{const[C,L]=await Promise.allSettled([g.fetchSchema(!0),g.fetchAllItems()]);C.status==="fulfilled"&&L.status==="fulfilled"?M():(console.error("Schema refresh failed:",C.status==="rejected"?C.reason:"Unknown error"),console.error("Items refresh failed:",L.status==="rejected"?L.reason:"Unknown error"))}catch(C){console.error("Failed to refresh schema:",C)}},I=async()=>{if(!(!T.value||y.value))try{y.value=!0}catch(C){console.error("Failed to load more:",C)}finally{y.value=!1}},q=async()=>{await _()},H=async C=>{try{await g.deleteItem(C),await g.fetchAllItems()}catch(L){console.error("Failed to delete item:",L)}};return ke(()=>{_()}),(C,L)=>(s(),r("div",vl,[e("div",yl,[R(Ie,{loading:p.value,"database-title":v.value,"database-description":U.value,onRefreshSchema:z},null,8,["loading","database-title","database-description"]),R(Me,{error:f.value,onRetry:q},null,8,["error"]),R(bl,{loading:p.value,"loading-more":y.value,items:x.value,schema:w.value,"has-more":T.value,onDeleteItem:H,onLoadMore:I},null,8,["loading","loading-more","items","schema","has-more"])])]))}},Cl=ve(_l,[["__scopeId","data-v-5925e735"]]);export{Cl as default};
