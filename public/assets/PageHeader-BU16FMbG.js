import{s as T,c as R,d as P,e as f,f as ee,g as te,h as ae,i as se}from"./vendor-primevue-DIj4JoDf.js";import{Q as y,c as a,d as t,e as l,z as p,s as c,F as x,B as q,t as u,h as w,v as i,K as E,q as _,p as F,I as re}from"./vendor-vue-CPcLwXa2.js";import{d as ne,e as oe,h as le,i as ce,j as D,k as ue,l as me,m as ie,b as de}from"./LoadingSkeleton-BfQSGWkT.js";const pe={key:0,class:"text-center py-8 text-gray-500"},ye={key:1,class:"space-y-6"},be={key:0,class:"absolute top-4 right-4"},he={class:"space-y-2"},ve=["for"],ge={key:0,class:"text-red-600 text-xs"},xe={key:1,class:"space-y-4"},_e={class:"grid grid-cols-1 gap-4"},ke=["for"],qe={key:0,class:"mr-2 text-lg"},we={key:2,class:"text-red-500 ml-1"},Ve={key:0,class:"text-red-600 block"},Ee={key:2,class:"space-y-4"},Fe={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ue=["for"],je={key:0,class:"mr-2 text-lg"},Be={key:2,class:"text-red-500 ml-1"},Ce={key:0,class:"text-red-600 block"},$e={key:3,class:"space-y-4"},Se={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ie=["for"],Le={key:0,class:"mr-2 text-lg"},Ne={class:"text-green-600 ml-1"},Oe={key:2,class:"text-red-500 ml-1"},Ae={class:"relative"},De={key:0,class:"text-red-600 block"},Te={key:4,class:"space-y-4"},ze={class:"space-y-4"},Me=["for"],He={key:0,class:"mr-2 text-lg"},Je={key:2,class:"text-red-500 ml-1"},Ke={class:"relative"},Qe={key:0,class:"text-red-600 block"},Ge={key:5,class:"space-y-4"},We={class:"grid grid-cols-1 gap-4"},Xe=["for"],Ye={key:0,class:"mr-2 text-lg"},Ze={key:2,class:"text-red-500 ml-1"},Re={class:"flex items-center gap-2"},Pe={key:0,class:"mt-2"},fe={class:"flex items-center gap-2"},et={key:2,class:"text-red-600 block"},tt={key:6,class:"space-y-4"},at={class:"grid grid-cols-1 gap-4"},st=["for"],rt={key:0,class:"mr-2 text-lg"},nt={key:2,class:"text-red-500 ml-1"},ot={key:3,class:"text-red-600 block"},lt={class:"flex justify-end gap-3 pt-6 border-t border-gray-200"},bt={__name:"FormFields",props:{editingItem:{type:Object,default:null},submitting:{type:Boolean,default:!1},formErrors:{type:Object,default:()=>({})}},emits:["submitForm","refreshSchema","update:formData","cancelForm"],setup(n,{emit:U}){const d=r=>k.editingItem?.[r]?.value||"",k=n,V=U,z=y(()=>k.editingItem?"Update Item":"Add Item"),M=y(()=>k.editingItem?"Updating...":"Adding..."),g=y(()=>k.editingItem?Object.entries(k.editingItem).map(([r,s])=>{let m=s.type;return s.multi_select&&Array.isArray(s.multi_select)&&(m="multi_select"),{name:r,type:m,required:s.required||!1,value:s.value||"",options:m==="select"||m==="multi_select"?ce(s):[],icon:le(r,m,s.number?.format),emoji:s.emoji||null,label:oe(r),placeholder:ne(r,m,s.number?.format),format:s.number?.format,min:m==="number"?0:void 0,step:m==="number"?s.number?.format&&s.number?.format!=="number"?500:1:void 0,id:s.id,number:s.number,select:s.select,multi_select:s.multi_select,...Object.fromEntries(Object.entries(s).filter(([h])=>!["number","select","multi_select"].includes(h)))}}):[]),j=y(()=>g.value.filter(r=>r.type==="title")),B=y(()=>g.value.filter(r=>{const s=r.name.toLowerCase();return s.includes("email")||s.includes("phone")||s.includes("contact")||r.type==="email"||r.type==="phone"})),C=y(()=>g.value.filter(r=>r.type==="number"&&r.format&&r.format!=="number")),$=y(()=>g.value.filter(r=>r.type==="number"&&(!r.format||r.format==="number"))),S=y(()=>g.value.filter(r=>r.type==="checkbox")),I=y(()=>g.value.filter(r=>r.type==="select"||r.type==="multi_select")),L=y(()=>g.value.filter(r=>{const s=r.name.toLowerCase(),m=s.includes("email")||s.includes("phone")||s.includes("contact")||r.type==="email"||r.type==="phone";return r.type!=="title"&&r.type!=="number"&&r.type!=="checkbox"&&r.type!=="select"&&r.type!=="multi_select"&&!m})),b=(r,s)=>{V("update:formData",{[r]:s})},N=r=>{const s=d(r);if(Array.isArray(s))return s;if(typeof s=="string"&&s)try{const m=JSON.parse(s);return Array.isArray(m)?m:[]}catch{return s.split(",").map(h=>h.trim()).filter(h=>h)}return[]},O=(r,s)=>{V("update:formData",{[r]:s})},H=(r,s)=>{const h=N(r).filter(v=>typeof v=="string"&&typeof s=="string"?v!==s:typeof v=="object"&&typeof s=="object"?v.value!==s.value:v!==s);O(r,h)},J=()=>"bg-white text-gray-800 hover:bg-gray-50",K=()=>{V("submitForm")},Q=()=>{V("cancelForm")},G=()=>{V("refreshSchema")};return(r,s)=>{const m=T,h=R,v=P,A=f,W=ee,X=te,Y=ae,Z=se;return t(),a("form",{onSubmit:re(K,["prevent"]),class:"space-y-6 relative"},[g.value.length?(t(),a("div",ye,[S.value.length>0?(t(),a("div",be,[l("div",he,[(t(!0),a(x,null,q(S.value,e=>(t(),a("div",{key:e.name,class:"flex items-center gap-2 p-2 bg-gray-50 rounded-lg border border-gray-200"},[p(h,{id:e.name,"model-value":d(e.name),"onUpdate:modelValue":o=>b(e.name,o),binary:!0},null,8,["id","model-value","onUpdate:modelValue"]),l("label",{for:e.name,class:"text-sm text-gray-700 cursor-pointer"},u(e.description||e.label),9,ve),n.formErrors[e.name]?(t(),a("small",ge,u(n.formErrors[e.name]),1)):c("",!0)]))),128))])])):c("",!0),j.value.length>0?(t(),a("div",xe,[l("div",_e,[(t(!0),a(x,null,q(j.value,e=>(t(),a("div",{key:e.name,class:"space-y-2"},[l("label",{for:e.name,class:"block text-sm font-medium text-gray-700"},[e.emoji?(t(),a("span",qe,u(e.emoji),1)):e.icon?(t(),a("i",{key:1,class:i([e.icon,"mr-2 text-gray-500"])},null,2)):c("",!0),w(" "+u(e.label)+" ",1),e.required?(t(),a("span",we,"*")):c("",!0)],8,ke),p(v,{id:e.name,type:e.type,placeholder:e.placeholder,required:e.required,"model-value":d(e.name),"onUpdate:modelValue":o=>b(e.name,o),class:i([{"p-invalid":n.formErrors[e.name]},"w-full"])},null,8,["id","type","placeholder","required","model-value","onUpdate:modelValue","class"]),n.formErrors[e.name]?(t(),a("small",Ve,u(n.formErrors[e.name]),1)):c("",!0)]))),128))])])):c("",!0),B.value.length>0?(t(),a("div",Ee,[l("div",Fe,[(t(!0),a(x,null,q(B.value,e=>(t(),a("div",{key:e.name,class:"space-y-2"},[l("label",{for:e.name,class:"block text-sm font-medium text-gray-700"},[e.emoji?(t(),a("span",je,u(e.emoji),1)):e.icon?(t(),a("i",{key:1,class:i([e.icon,"mr-2 text-gray-500"])},null,2)):c("",!0),w(" "+u(e.label)+" ",1),e.required?(t(),a("span",Be,"*")):c("",!0)],8,Ue),p(v,{id:e.name,type:e.type,placeholder:e.placeholder,required:e.required,"model-value":d(e.name),"onUpdate:modelValue":o=>b(e.name,o),class:i([{"p-invalid":n.formErrors[e.name]},"w-full"])},null,8,["id","type","placeholder","required","model-value","onUpdate:modelValue","class"]),n.formErrors[e.name]?(t(),a("small",Ce,u(n.formErrors[e.name]),1)):c("",!0)]))),128))])])):c("",!0),C.value.length>0?(t(),a("div",$e,[l("div",Se,[(t(!0),a(x,null,q(C.value,e=>(t(),a("div",{key:e.name,class:"space-y-2"},[l("label",{for:e.name,class:"block text-sm font-medium text-gray-700"},[e.emoji?(t(),a("span",Le,u(e.emoji),1)):e.icon?(t(),a("i",{key:1,class:i([e.icon,"mr-2 text-gray-500"])},null,2)):c("",!0),w(" "+u(e.label)+" ",1),l("span",Ne,"("+u(E(D)[e.format]?.currency||"USD")+")",1),e.required?(t(),a("span",Oe,"*")):c("",!0)],8,Ie),l("div",Ae,[p(A,{id:e.name,placeholder:e.placeholder,required:e.required,min:e.min||0,max:e.max,step:e.step,"model-value":d(e.name),"onUpdate:modelValue":o=>b(e.name,o),class:i([{"p-invalid":n.formErrors[e.name]},"w-full"]),showButtons:"",buttonLayout:"horizontal",mode:"currency",currency:E(D)[e.format]?.currency||"USD"},{incrementbuttonicon:_(()=>s[1]||(s[1]=[l("span",{class:"pi pi-plus"},null,-1)])),decrementbuttonicon:_(()=>s[2]||(s[2]=[l("span",{class:"pi pi-minus"},null,-1)])),_:2},1032,["id","placeholder","required","min","max","step","model-value","onUpdate:modelValue","class","currency"])]),n.formErrors[e.name]?(t(),a("small",De,u(n.formErrors[e.name]),1)):c("",!0)]))),128))])])):c("",!0),$.value.length>0?(t(),a("div",Te,[l("div",ze,[(t(!0),a(x,null,q($.value,e=>(t(),a("div",{key:e.name,class:"space-y-2"},[l("label",{for:e.name,class:"block text-sm font-medium text-gray-700"},[e.emoji?(t(),a("span",He,u(e.emoji),1)):e.icon?(t(),a("i",{key:1,class:i([e.icon,"mr-2 text-gray-500"])},null,2)):c("",!0),w(" "+u(e.label)+" ",1),e.required?(t(),a("span",Je,"*")):c("",!0)],8,Me),l("div",Ke,[p(A,{id:e.name,placeholder:e.placeholder,required:e.required,min:e.min||0,max:e.max,step:e.step,"model-value":d(e.name),"onUpdate:modelValue":o=>b(e.name,o),class:i([{"p-invalid":n.formErrors[e.name]},"w-full"]),showButtons:"",buttonLayout:"horizontal"},{incrementbuttonicon:_(()=>s[3]||(s[3]=[l("i",{class:"pi pi-plus"},null,-1)])),decrementbuttonicon:_(()=>s[4]||(s[4]=[l("i",{class:"pi pi-minus"},null,-1)])),_:2},1032,["id","placeholder","required","min","max","step","model-value","onUpdate:modelValue","class"])]),n.formErrors[e.name]?(t(),a("small",Qe,u(n.formErrors[e.name]),1)):c("",!0)]))),128))])])):c("",!0),I.value.length>0?(t(),a("div",Ge,[l("div",We,[(t(!0),a(x,null,q(I.value,e=>(t(),a("div",{key:e.name,class:"space-y-2"},[l("label",{for:e.name,class:"block text-sm font-medium text-gray-700"},[e.emoji?(t(),a("span",Ye,u(e.emoji),1)):e.icon?(t(),a("i",{key:1,class:i([e.icon,"mr-2 text-gray-500"])},null,2)):c("",!0),w(" "+u(e.label)+" ",1),e.required?(t(),a("span",Ze,"*")):c("",!0)],8,Xe),e.type==="select"?(t(),a(x,{key:0},[p(W,{id:e.name,required:e.required,"model-value":d(e.name),"onUpdate:modelValue":o=>b(e.name,o),options:e.options,optionLabel:"label",optionValue:"value",placeholder:`Select ${e.label}`,class:i([{"p-invalid":n.formErrors[e.name]},"w-full"])},{option:_(o=>[l("div",Re,[o.option.color?(t(),a("span",{key:0,class:i([E(ue)(o.option.color),"w-3 h-3 rounded-full"])},null,2)):c("",!0),l("span",null,u(o.option.label),1)])]),_:2},1032,["id","required","model-value","onUpdate:modelValue","options","placeholder","class"]),d(e.name)?(t(),a("div",Pe,[l("div",fe,[l("span",{class:i([E(me)(d(e.name),e),"px-3 py-1.5 text-sm rounded-full border font-medium"])},u(E(ie)(d(e.name),e)),3)])])):c("",!0)],64)):e.type==="multi_select"?(t(),F(X,{key:1,id:e.name,"model-value":N(e.name),"onUpdate:modelValue":o=>O(e.name,o),options:e.options,optionLabel:"label",optionValue:"value",placeholder:`Select ${e.label}`,class:i([{"p-invalid":n.formErrors[e.name]},"w-full"]),filter:!0,allowEmpty:!0,display:"chip"},{option:_(o=>[l("div",{class:i(["flex items-center gap-2 px-2 py-1 rounded",J(o.option)])},[l("span",null,u(o.option.label),1)],2)]),chip:_(o=>[l("div",{class:i(["flex items-center gap-2 px-3 py-1.5 text-sm rounded-full border font-medium",E(de)(o.value,e)])},[l("span",null,u(typeof o.value=="string"?o.value:o.value?.label||o.value?.value||o.value),1),p(m,{type:"button",onClick:it=>H(e.name,o.value||o),class:"ml-1 hover:opacity-75 p-0 w-6 h-6 !bg-transparent !border-0 !text-red-500 hover:!text-red-700",icon:"pi pi-times",size:"small",text:"",rounded:""},null,8,["onClick"])],2)]),_:2},1032,["id","model-value","onUpdate:modelValue","options","placeholder","class"])):c("",!0),n.formErrors[e.name]?(t(),a("small",et,u(n.formErrors[e.name]),1)):c("",!0)]))),128))])])):c("",!0),L.value.length>0?(t(),a("div",tt,[l("div",at,[(t(!0),a(x,null,q(L.value,e=>(t(),a("div",{key:e.name,class:"space-y-2"},[l("label",{for:e.name,class:"block text-sm font-medium text-gray-700"},[e.emoji?(t(),a("span",rt,u(e.emoji),1)):e.icon?(t(),a("i",{key:1,class:i([e.icon,"mr-2 text-gray-500"])},null,2)):c("",!0),w(" "+u(e.label)+" ",1),e.required?(t(),a("span",nt,"*")):c("",!0)],8,st),e.type==="date"?(t(),F(Y,{key:0,id:e.name,placeholder:e.placeholder,required:e.required,"model-value":d(e.name),"onUpdate:modelValue":o=>b(e.name,o),class:i([{"p-invalid":n.formErrors[e.name]},"w-full"]),dateFormat:"yy-mm-dd"},null,8,["id","placeholder","required","model-value","onUpdate:modelValue","class"])):e.type==="textarea"?(t(),F(Z,{key:1,id:e.name,placeholder:e.placeholder,required:e.required,"model-value":d(e.name),"onUpdate:modelValue":o=>b(e.name,o),class:i([{"p-invalid":n.formErrors[e.name]},"w-full"]),rows:"3"},null,8,["id","placeholder","required","model-value","onUpdate:modelValue","class"])):(t(),F(v,{key:2,id:e.name,type:e.type,placeholder:e.placeholder,required:e.required,"model-value":d(e.name),"onUpdate:modelValue":o=>b(e.name,o),class:i([{"p-invalid":n.formErrors[e.name]},"w-full"])},null,8,["id","type","placeholder","required","model-value","onUpdate:modelValue","class"])),n.formErrors[e.name]?(t(),a("small",ot,u(n.formErrors[e.name]),1)):c("",!0)]))),128))])])):c("",!0)])):(t(),a("div",pe,[s[0]||(s[0]=l("p",null,"No form fields available.",-1)),p(m,{onClick:G,severity:"secondary",label:"Retry",class:"mt-2"})])),l("div",lt,[p(m,{type:"button",onClick:Q,severity:"secondary",label:"Cancel",class:"!transition-all !duration-300 hover:!scale-105 hover:!-translate-y-0.5 hover:!shadow-[0_20px_40px_rgba(34,197,94,0.3),0_0_20px_rgba(34,197,94,0.2)]"}),p(m,{type:"submit",disabled:n.submitting,loading:n.submitting,label:n.submitting?M.value:z.value,class:"!transition-all !duration-300 hover:!scale-105 hover:!-translate-y-0.5 hover:!shadow-[0_20px_40px_rgba(34,197,94,0.3),0_0_20px_rgba(34,197,94,0.2)]"},null,8,["disabled","loading","label"])])],32)}}},ct={class:"mb-8"},ut={key:0,class:"flex items-center gap-4 mb-4"},mt={class:"text-3xl font-bold text-gray-900 mb-2"},ht={__name:"PageHeader",props:{mode:{type:String,required:!0,validator:n=>["add","edit"].includes(n)},databaseTitle:{type:String,required:!0},showBackButton:{type:Boolean,default:!1}},emits:["goBack"],setup(n){return(U,d)=>{const k=T;return t(),a("div",ct,[n.showBackButton?(t(),a("div",ut,[p(k,{onClick:d[0]||(d[0]=V=>U.$emit("goBack")),class:"!p-0 !bg-transparent !border-0 flex items-center gap-2 text-gray-600 hover:text-gray-800",text:"",severity:"secondary"},{default:_(()=>d[1]||(d[1]=[l("i",{class:"pi pi-arrow-left"},null,-1),w(" Back ",-1)])),_:1,__:[1]})])):c("",!0),l("h1",mt,u(n.mode==="add"?"Add New":"Edit")+" "+u(n.databaseTitle),1),l("p",{class:i(["text-gray-600",{"mt-2":n.mode==="edit"}])},u(n.mode==="add"?`Fill out the form below to add a new ${n.databaseTitle.toLowerCase()}`:`Update the ${n.databaseTitle.toLowerCase()} information below`),3)])}}};export{ht as _,bt as a};
