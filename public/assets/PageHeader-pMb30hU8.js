import{a as M,e as se,f as oe,g as re,h as ne,i as le,j as ce,k as me,l as ue}from"./vendor-primevue-BXJVR7wj.js";import{y as b,c as s,d as a,e as l,z as v,s as c,F as k,E as q,t as m,h as w,v as p,L as F,q as _,p as V,J as ie}from"./vendor-vue-3gpeyM8i.js";import{d as de,e as pe,h as ye,i as ve,j as D,k as be,l as ge,m as he,b as xe,n as ke}from"./_plugin-vue_export-helper-DV48wBdy.js";const _e={key:0,class:"text-center py-8 text-gray-500"},Ue={key:1,class:"space-y-6"},qe={key:0,class:"absolute top-4 right-4"},we={class:"space-y-2"},Fe=["for"],Ve={key:0,class:"text-red-600 text-xs"},Ee={key:1,class:"space-y-4"},je={class:"grid grid-cols-1 gap-4"},Ce=["for"],Se={key:0,class:"mr-2 text-lg"},Ae={key:2,class:"text-red-500 ml-1"},Be={key:0,class:"text-red-600 block"},$e={key:2,class:"space-y-4"},Le={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ie=["for"],Ne={key:0,class:"mr-2 text-lg"},Oe={key:2,class:"text-red-500 ml-1"},ze={key:0,class:"text-red-600 block"},De={key:3,class:"space-y-4"},Me={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},fe=["for"],Te={key:0,class:"mr-2 text-lg"},Je={class:"text-green-600 ml-1"},Ke={key:2,class:"text-red-500 ml-1"},Re={class:"relative"},He={key:0,class:"text-red-600 block"},Ge={key:4,class:"space-y-4"},Qe={class:"space-y-4"},We=["for"],Xe={key:0,class:"mr-2 text-lg"},Ye={key:2,class:"text-red-500 ml-1"},Ze={class:"relative"},Pe={key:0,class:"text-red-600 block"},et={key:5,class:"space-y-4"},tt={class:"grid grid-cols-1 gap-4"},at=["for"],st={key:0,class:"mr-2 text-lg"},ot={key:2,class:"text-red-500 ml-1"},rt={class:"flex items-center gap-2"},nt={key:0,class:"mt-2"},lt={class:"flex items-center gap-2"},ct={key:2,class:"text-red-600 block"},mt={key:6,class:"space-y-4"},ut={class:"grid grid-cols-1 gap-4"},it=["for"],dt={key:0,class:"mr-2 text-lg"},pt={key:2,class:"text-red-500 ml-1"},yt={key:0,class:"text-red-600 block"},vt={key:7,class:"space-y-4"},bt={class:"grid grid-cols-1 gap-4"},gt=["for"],ht={key:0,class:"mr-2 text-lg"},xt={key:2,class:"text-red-500 ml-1"},kt={key:3,class:"text-red-600 block"},_t={class:"flex justify-end gap-3 pt-6 border-t border-gray-200"},Ct={__name:"FormFields",props:{editingItem:{type:Object,default:null},submitting:{type:Boolean,default:!1},formErrors:{type:Object,default:()=>({})}},emits:["submitForm","refreshSchema","update:formData","cancelForm"],setup(n,{emit:E}){const y=o=>U.editingItem?.[o]?.value||"",U=n,g=E,f=b(()=>U.editingItem?"Update Item":"Add Item"),T=b(()=>U.editingItem?"Updating...":"Adding..."),h=b(()=>U.editingItem?Object.entries(U.editingItem).map(([o,t])=>{let u=t.type;return t.multi_select&&Array.isArray(t.multi_select)&&(u="multi_select"),t.files&&Array.isArray(t.files)&&(u="files"),{name:o,type:u,required:t.required||!1,value:t.value||"",options:u==="select"||u==="multi_select"?ve(t):[],icon:ye(o,u,t.number?.format),emoji:t.emoji||null,label:pe(o),placeholder:de(o,u,t.number?.format),format:t.number?.format,min:u==="number"?0:void 0,step:u==="number"?t.number?.format&&t.number?.format!=="number"?500:1:void 0,id:t.id,number:t.number,select:t.select,multi_select:t.multi_select,...Object.fromEntries(Object.entries(t).filter(([i])=>!["number","select","multi_select"].includes(i)))}}):[]),j=b(()=>h.value.filter(o=>o.type==="title")),C=b(()=>h.value.filter(o=>{const t=o.name.toLowerCase();return t.includes("email")||t.includes("phone")||t.includes("contact")||o.type==="email"||o.type==="phone"})),S=b(()=>h.value.filter(o=>o.type==="number"&&o.format&&o.format!=="number")),A=b(()=>h.value.filter(o=>o.type==="number"&&(!o.format||o.format==="number"))),B=b(()=>h.value.filter(o=>o.type==="checkbox")),$=b(()=>h.value.filter(o=>o.type==="select"||o.type==="multi_select")),L=b(()=>h.value.filter(o=>o.type==="files")),I=b(()=>h.value.filter(o=>{const t=o.name.toLowerCase(),u=t.includes("email")||t.includes("phone")||t.includes("contact")||o.type==="email"||o.type==="phone";return o.type!=="title"&&o.type!=="number"&&o.type!=="checkbox"&&o.type!=="select"&&o.type!=="multi_select"&&o.type!=="files"&&!u})),x=(o,t)=>{g("update:formData",{[o]:t})},N=o=>{const t=y(o);if(Array.isArray(t))return t;if(typeof t=="string"&&t)try{const u=JSON.parse(t);return Array.isArray(u)?u:[]}catch{return t.split(",").map(i=>i.trim()).filter(i=>i)}return[]},O=(o,t)=>{g("update:formData",{[o]:t})},J=(o,t)=>{const i=N(o).filter(d=>typeof d=="string"&&typeof t=="string"?d!==t:typeof d=="object"&&typeof t=="object"?d.value!==t.value:d!==t);O(o,i)},K=o=>{const t=U.editingItem?.[o]?.value||[];return Array.isArray(t)?t:[]},R=(o,t)=>{const u=Array.from(t||[]).map(i=>({name:i.name,size:i.size,type:i.type,lastModified:i.lastModified,file:i,preview:URL.createObjectURL(i)}));g("update:formData",{[o]:u})},H=(o,t)=>{console.log("File select event:",o);const i=(o.files||[]).map(d=>({name:d.name,size:d.size,type:d.type,lastModified:d.lastModified,file:d,preview:URL.createObjectURL(d)}));g("update:formData",{[t]:i})},G=(o,t)=>{console.log("Upload progress:",o)},Q=async(o,t)=>{console.log("Advanced upload event:",o);try{const u=o.xhr?.response;if(u){const i=JSON.parse(u);i.success&&i.files?(console.log("Files uploaded successfully:",i.files),g("update:formData",{[t]:i.files.map(d=>({name:d.name,url:d.url,type:d.type,size:d.size,blobKey:d.blobKey}))})):console.error("Upload failed:",i.error)}else console.log("No response from upload")}catch(u){console.error("Upload processing failed:",u)}},W=()=>{g("submitForm")},X=()=>{g("cancelForm")},Y=()=>{g("refreshSchema")};return(o,t)=>{const u=M,i=se,d=oe,z=re,Z=ne,P=le,ee=ce,te=me,ae=ue;return a(),s("form",{onSubmit:ie(W,["prevent"]),class:"space-y-6 relative"},[h.value.length?(a(),s("div",Ue,[B.value.length>0?(a(),s("div",qe,[l("div",we,[(a(!0),s(k,null,q(B.value,e=>(a(),s("div",{key:e.name,class:"flex items-center gap-2 p-2 bg-gray-50 rounded-lg border border-gray-200"},[v(i,{id:e.name,"model-value":y(e.name),"onUpdate:modelValue":r=>x(e.name,r),binary:!0},null,8,["id","model-value","onUpdate:modelValue"]),l("label",{for:e.name,class:"text-sm text-gray-700 cursor-pointer"},m(e.description||e.label),9,Fe),n.formErrors[e.name]?(a(),s("small",Ve,m(n.formErrors[e.name]),1)):c("",!0)]))),128))])])):c("",!0),j.value.length>0?(a(),s("div",Ee,[l("div",je,[(a(!0),s(k,null,q(j.value,e=>(a(),s("div",{key:e.name,class:"space-y-2"},[l("label",{for:e.name,class:"block text-sm font-medium text-gray-700"},[e.emoji?(a(),s("span",Se,m(e.emoji),1)):e.icon?(a(),s("i",{key:1,class:p([e.icon,"mr-2 text-gray-500"])},null,2)):c("",!0),w(" "+m(e.label)+" ",1),e.required?(a(),s("span",Ae,"*")):c("",!0)],8,Ce),v(d,{id:e.name,type:e.type,placeholder:e.placeholder,required:e.required,"model-value":y(e.name),"onUpdate:modelValue":r=>x(e.name,r),class:p([{"p-invalid":n.formErrors[e.name]},"w-full"])},null,8,["id","type","placeholder","required","model-value","onUpdate:modelValue","class"]),n.formErrors[e.name]?(a(),s("small",Be,m(n.formErrors[e.name]),1)):c("",!0)]))),128))])])):c("",!0),C.value.length>0?(a(),s("div",$e,[l("div",Le,[(a(!0),s(k,null,q(C.value,e=>(a(),s("div",{key:e.name,class:"space-y-2"},[l("label",{for:e.name,class:"block text-sm font-medium text-gray-700"},[e.emoji?(a(),s("span",Ne,m(e.emoji),1)):e.icon?(a(),s("i",{key:1,class:p([e.icon,"mr-2 text-gray-500"])},null,2)):c("",!0),w(" "+m(e.label)+" ",1),e.required?(a(),s("span",Oe,"*")):c("",!0)],8,Ie),v(d,{id:e.name,type:e.type,placeholder:e.placeholder,required:e.required,"model-value":y(e.name),"onUpdate:modelValue":r=>x(e.name,r),class:p([{"p-invalid":n.formErrors[e.name]},"w-full"])},null,8,["id","type","placeholder","required","model-value","onUpdate:modelValue","class"]),n.formErrors[e.name]?(a(),s("small",ze,m(n.formErrors[e.name]),1)):c("",!0)]))),128))])])):c("",!0),S.value.length>0?(a(),s("div",De,[l("div",Me,[(a(!0),s(k,null,q(S.value,e=>(a(),s("div",{key:e.name,class:"space-y-2"},[l("label",{for:e.name,class:"block text-sm font-medium text-gray-700"},[e.emoji?(a(),s("span",Te,m(e.emoji),1)):e.icon?(a(),s("i",{key:1,class:p([e.icon,"mr-2 text-gray-500"])},null,2)):c("",!0),w(" "+m(e.label)+" ",1),l("span",Je,"("+m(F(D)[e.format]?.currency||"USD")+")",1),e.required?(a(),s("span",Ke,"*")):c("",!0)],8,fe),l("div",Re,[v(z,{id:e.name,placeholder:e.placeholder,required:e.required,min:e.min||0,max:e.max,step:e.step,"model-value":y(e.name),"onUpdate:modelValue":r=>x(e.name,r),class:p([{"p-invalid":n.formErrors[e.name]},"w-full"]),showButtons:"",buttonLayout:"horizontal",mode:"currency",currency:F(D)[e.format]?.currency||"USD"},{incrementbuttonicon:_(()=>t[1]||(t[1]=[l("span",{class:"pi pi-plus"},null,-1)])),decrementbuttonicon:_(()=>t[2]||(t[2]=[l("span",{class:"pi pi-minus"},null,-1)])),_:2},1032,["id","placeholder","required","min","max","step","model-value","onUpdate:modelValue","class","currency"])]),n.formErrors[e.name]?(a(),s("small",He,m(n.formErrors[e.name]),1)):c("",!0)]))),128))])])):c("",!0),A.value.length>0?(a(),s("div",Ge,[l("div",Qe,[(a(!0),s(k,null,q(A.value,e=>(a(),s("div",{key:e.name,class:"space-y-2"},[l("label",{for:e.name,class:"block text-sm font-medium text-gray-700"},[e.emoji?(a(),s("span",Xe,m(e.emoji),1)):e.icon?(a(),s("i",{key:1,class:p([e.icon,"mr-2 text-gray-500"])},null,2)):c("",!0),w(" "+m(e.label)+" ",1),e.required?(a(),s("span",Ye,"*")):c("",!0)],8,We),l("div",Ze,[v(z,{id:e.name,placeholder:e.placeholder,required:e.required,min:e.min||0,max:e.max,step:e.step,"model-value":y(e.name),"onUpdate:modelValue":r=>x(e.name,r),class:p([{"p-invalid":n.formErrors[e.name]},"w-full"]),showButtons:"",buttonLayout:"horizontal"},{incrementbuttonicon:_(()=>t[3]||(t[3]=[l("i",{class:"pi pi-plus"},null,-1)])),decrementbuttonicon:_(()=>t[4]||(t[4]=[l("i",{class:"pi pi-minus"},null,-1)])),_:2},1032,["id","placeholder","required","min","max","step","model-value","onUpdate:modelValue","class"])]),n.formErrors[e.name]?(a(),s("small",Pe,m(n.formErrors[e.name]),1)):c("",!0)]))),128))])])):c("",!0),$.value.length>0?(a(),s("div",et,[l("div",tt,[(a(!0),s(k,null,q($.value,e=>(a(),s("div",{key:e.name,class:"space-y-2"},[l("label",{for:e.name,class:"block text-sm font-medium text-gray-700"},[e.emoji?(a(),s("span",st,m(e.emoji),1)):e.icon?(a(),s("i",{key:1,class:p([e.icon,"mr-2 text-gray-500"])},null,2)):c("",!0),w(" "+m(e.label)+" ",1),e.required?(a(),s("span",ot,"*")):c("",!0)],8,at),e.type==="select"?(a(),s(k,{key:0},[v(Z,{id:e.name,required:e.required,"model-value":y(e.name),"onUpdate:modelValue":r=>x(e.name,r),options:e.options,optionLabel:"label",optionValue:"value",placeholder:`Select ${e.label}`,class:p([{"p-invalid":n.formErrors[e.name]},"w-full"])},{option:_(r=>[l("div",rt,[r.option.color?(a(),s("span",{key:0,class:p([F(be)(r.option.color),"w-3 h-3 rounded-full"])},null,2)):c("",!0),l("span",null,m(r.option.label),1)])]),_:2},1032,["id","required","model-value","onUpdate:modelValue","options","placeholder","class"]),y(e.name)?(a(),s("div",nt,[l("div",lt,[l("span",{class:p([F(ge)(y(e.name),e),"px-3 py-1.5 text-sm rounded-full border font-medium"])},m(F(he)(y(e.name),e)),3)])])):c("",!0)],64)):e.type==="multi_select"?(a(),V(P,{key:1,id:e.name,"model-value":N(e.name),"onUpdate:modelValue":r=>O(e.name,r),options:e.options,optionLabel:"label",optionValue:"value",placeholder:`Select ${e.label}`,class:p([{"p-invalid":n.formErrors[e.name]},"w-full"]),filter:!0,allowEmpty:!0,display:"chip"},{option:_(r=>[l("div",{class:p(["flex items-center gap-2 px-2 py-1 rounded",F(ke)(r.option)])},[l("span",null,m(r.option.label),1)],2)]),chip:_(r=>[l("div",{class:p(["flex items-center gap-2 px-3 py-1.5 text-sm rounded-full border font-medium",F(xe)(r.value,e)])},[l("span",null,m(typeof r.value=="string"?r.value:r.value?.label||r.value?.value||r.value),1),v(u,{type:"button",onClick:Ft=>J(e.name,r.value||r),class:"ml-1 hover:opacity-75 p-0 w-6 h-6 text-gray-700 hover:text-gray-900",icon:"pi pi-times",size:"small",link:"",rounded:""},null,8,["onClick"])],2)]),_:2},1032,["id","model-value","onUpdate:modelValue","options","placeholder","class"])):c("",!0),n.formErrors[e.name]?(a(),s("small",ct,m(n.formErrors[e.name]),1)):c("",!0)]))),128))])])):c("",!0),L.value.length>0?(a(),s("div",mt,[l("div",ut,[(a(!0),s(k,null,q(L.value,e=>(a(),s("div",{key:e.name,class:"space-y-2"},[l("label",{for:e.name,class:"block text-sm font-medium text-gray-700"},[e.emoji?(a(),s("span",dt,m(e.emoji),1)):e.icon?(a(),s("i",{key:1,class:p([e.icon,"mr-2 text-gray-500"])},null,2)):c("",!0),w(" "+m(e.label)+" ",1),e.required?(a(),s("span",pt,"*")):c("",!0)],8,it),v(ee,{id:e.name,"model-value":K(e.name),"onUpdate:modelValue":r=>R(e.name,r),onUpload:r=>Q(r,e.name),onSelect:r=>H(r,e.name),onProgress:r=>G(r,e.name),class:p([{"p-invalid":n.formErrors[e.name]},"w-full"]),mode:"advanced",multiple:!0,auto:!0,maxFileSize:1e7,accept:"image/*",url:"/.netlify/functions/upload-file","choose-label":"Choose Files","show-upload-button":!1,"show-cancel-button":!1},{empty:_(()=>t[5]||(t[5]=[l("div",{class:"flex flex-col items-center justify-center py-8 text-gray-500"},[l("i",{class:"pi pi-cloud-upload text-4xl mb-4"}),l("span",{class:"text-lg font-medium"},"Drag and drop files to here to upload"),l("span",{class:"text-sm mt-2"},"or click to browse")],-1)])),_:2},1032,["id","model-value","onUpdate:modelValue","onUpload","onSelect","onProgress","class"]),n.formErrors[e.name]?(a(),s("small",yt,m(n.formErrors[e.name]),1)):c("",!0)]))),128))])])):c("",!0),I.value.length>0?(a(),s("div",vt,[l("div",bt,[(a(!0),s(k,null,q(I.value,e=>(a(),s("div",{key:e.name,class:"space-y-2"},[l("label",{for:e.name,class:"block text-sm font-medium text-gray-700"},[e.emoji?(a(),s("span",ht,m(e.emoji),1)):e.icon?(a(),s("i",{key:1,class:p([e.icon,"mr-2 text-gray-500"])},null,2)):c("",!0),w(" "+m(e.label)+" ",1),e.required?(a(),s("span",xt,"*")):c("",!0)],8,gt),e.type==="date"?(a(),V(te,{key:0,id:e.name,placeholder:e.placeholder,required:e.required,"model-value":y(e.name),"onUpdate:modelValue":r=>x(e.name,r),class:p([{"p-invalid":n.formErrors[e.name]},"w-full"]),dateFormat:"yy-mm-dd"},null,8,["id","placeholder","required","model-value","onUpdate:modelValue","class"])):e.type==="rich_text"||e.type==="textarea"?(a(),V(ae,{key:1,id:e.name,placeholder:e.placeholder,required:e.required,"model-value":y(e.name),"onUpdate:modelValue":r=>x(e.name,r),class:p([{"p-invalid":n.formErrors[e.name]},"w-full"]),rows:"3"},null,8,["id","placeholder","required","model-value","onUpdate:modelValue","class"])):(a(),V(d,{key:2,id:e.name,type:e.type,placeholder:e.placeholder,required:e.required,"model-value":y(e.name),"onUpdate:modelValue":r=>x(e.name,r),class:p([{"p-invalid":n.formErrors[e.name]},"w-full"])},null,8,["id","type","placeholder","required","model-value","onUpdate:modelValue","class"])),n.formErrors[e.name]?(a(),s("small",kt,m(n.formErrors[e.name]),1)):c("",!0)]))),128))])])):c("",!0)])):(a(),s("div",_e,[t[0]||(t[0]=l("p",null,"No form fields available.",-1)),v(u,{onClick:Y,severity:"secondary",label:"Retry",class:"mt-2"})])),l("div",_t,[v(u,{type:"button",onClick:X,label:"Cancel",severity:"secondary"}),v(u,{type:"submit",disabled:n.submitting,loading:n.submitting,label:n.submitting?T.value:f.value,severity:"primary"},null,8,["disabled","loading","label"])])],32)}}},Ut={class:"mb-8"},qt={key:0,class:"flex items-center gap-4 mb-4"},wt={class:"text-3xl font-bold text-gray-900 mb-2"},St={__name:"PageHeader",props:{mode:{type:String,required:!0,validator:n=>["add","edit"].includes(n)},databaseTitle:{type:String,required:!0},showBackButton:{type:Boolean,default:!1}},emits:["goBack"],setup(n){return(E,y)=>{const U=M;return a(),s("div",Ut,[n.showBackButton?(a(),s("div",qt,[v(U,{onClick:y[0]||(y[0]=g=>E.$emit("goBack")),severity:"secondary",text:""},{default:_(()=>y[1]||(y[1]=[l("i",{class:"pi pi-arrow-left"},null,-1),w(" Back ",-1)])),_:1,__:[1]})])):c("",!0),l("h1",wt,m(n.mode==="add"?"Add New":"Edit")+" "+m(n.databaseTitle),1),l("p",{class:p(["text-gray-600",{"mt-2":n.mode==="edit"}])},m(n.mode==="add"?`Fill out the form below to add a new ${n.databaseTitle.toLowerCase()}`:`Update the ${n.databaseTitle.toLowerCase()} information below`),3)])}}};export{St as _,Ct as a};
