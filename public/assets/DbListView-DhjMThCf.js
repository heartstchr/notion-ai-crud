import{c as r,s as F,d as s,e,z as P,t as h,q as ne,h as Y,y as U,F as k,E as C,G as ve,v as S,M as q,p as R,N as oe,r as D,w as fe,x as be,V as ye,O as me,l as ue,W as ce,o as _e}from"./vendor-vue-UEcv-ZwY.js";import{l as Z,m as we,j as ie,N as ee,n as xe,_ as pe,i as X}from"./LoadingSkeleton-Dtx_ymdI.js";import{a as K,m as $e,n as he}from"./vendor-primevue-CrmH8go6.js";const Fe={key:0,class:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-start gap-3"},ke={class:"flex-1"},Ce={class:"text-red-700"},je={__name:"ErrorDisplay",props:{error:{type:String,default:""}},emits:["retry"],setup(a){return(m,c)=>{const g=K;return a.error?(s(),r("div",Fe,[c[2]||(c[2]=e("i",{class:"pi pi-exclamation-triangle text-red-500 text-xl"},null,-1)),e("div",ke,[c[1]||(c[1]=e("strong",{class:"text-red-800"},"Error:",-1)),e("span",Ce,h(a.error),1),P(g,{onClick:m.retry,severity:"danger",text:""},{default:ne(()=>c[0]||(c[0]=[Y(" Try Again ",-1)])),_:1,__:[0]},8,["onClick"])])])):F("",!0)}}},Le={class:"text-center"},Ae={key:0},Ie={key:1},Oe={__name:"LoadMoreButton",props:{loading:{type:Boolean,default:!1}},emits:["load-more"],setup(a){return(m,c)=>{const g=K;return s(),r("div",Le,[P(g,{onClick:c[0]||(c[0]=f=>m.$emit("load-more")),disabled:a.loading,severity:"secondary"},{default:ne(()=>[a.loading?(s(),r("span",Ae,"Loading...")):(s(),r("span",Ie,"Load More"))]),_:1},8,["disabled"])])}}},Se={class:"text-gray-800 leading-relaxed"},Ne={__name:"RichTextField",props:{value:{type:[Object,String],required:!0}},setup(a){const m=a,c=U(()=>Array.isArray(m.value)?m.value:m.value&&typeof m.value=="object"?m.value.rich_text||m.value.title||[]:typeof m.value=="string"?[{text:{content:m.value},annotations:{}}]:[]),g=f=>{if(!f)return{};const b={};return f.italic&&(b.fontStyle="italic"),f.underline&&(b.textDecoration="underline"),f.strikethrough&&(b.textDecoration="line-through"),f.code&&(b.fontFamily="monospace",b.backgroundColor="#f3f4f6",b.padding="2px 4px",b.borderRadius="4px"),b};return(f,b)=>(s(),r("div",Se,[(s(!0),r(k,null,C(c.value,(y,$)=>(s(),r("span",{key:$,class:S(y.annotations?.bold?"font-semibold":""),style:ve(g(y.annotations))},h(y.text?.content||y.plain_text||""),7))),128))]))}},ze={class:"grid grid-cols-2 gap-4"},Me={key:0,class:"flex items-center space-x-2"},Be={class:"text-gray-800"},Ue={key:1,class:"flex items-center space-x-2"},Ve={class:"text-gray-800"},Re={__name:"ContactField",props:{value:{type:[Object,String],required:!0}},setup(a){return(m,c)=>(s(),r("div",ze,[typeof a.value=="string"||a.value?.email?(s(),r("div",Me,[c[0]||(c[0]=e("i",{class:"pi pi-envelope text-blue-500"},null,-1)),e("span",Be,h(typeof a.value=="string"?a.value:a.value.email),1)])):F("",!0),typeof a.value=="string"||a.value?.phone?(s(),r("div",Ue,[c[1]||(c[1]=e("i",{class:"pi pi-phone text-green-500"},null,-1)),e("span",Ve,h(typeof a.value=="string"?a.value:a.value.phone),1)])):F("",!0)]))}},De={class:"space-y-3"},qe={class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},Ee={class:"text-sm font-medium text-gray-700"},Te={class:"flex items-center space-x-2"},Pe={class:"text-gray-800 font-mono font-medium"},We={key:0,class:"text-lg text-gray-600 font-medium"},He={__name:"NumbersField",props:{value:{type:Object,required:!0},schema:{type:Object,default:null},formatLabel:{type:Function,required:!0},formatNumber:{type:Function,required:!0},getSchemaProperty:{type:Function,required:!0},getFieldCurrencySymbol:{type:Function,required:!0}},setup(a){return(m,c)=>(s(),r("div",De,[e("div",qe,[(s(!0),r(k,null,C(a.value,(g,f)=>(s(),r("div",{key:f,class:"flex items-center justify-start bg-gray-50 rounded-lg gap-2 p-2"},[e("i",{class:S([q(Z)(f,a.getSchemaProperty(f)),"text-blue-500"])},null,2),e("span",Ee,h(a.formatLabel(f)),1),e("div",Te,[e("span",Pe,h(a.formatNumber(g||0,f)),1),a.getFieldCurrencySymbol(f)?(s(),r("span",We,h(a.getFieldCurrencySymbol(f)),1)):F("",!0)])]))),128))])]))}},Ge={class:"flex items-center space-x-2"},Je=["href"],Ke={__name:"UrlField",props:{value:{type:[Object,String],required:!0}},setup(a){const m=c=>{try{const g=new URL(c);return g.hostname+g.pathname}catch{return c}};return(c,g)=>(s(),r("div",Ge,[g[0]||(g[0]=e("i",{class:"pi pi-link text-purple-500"},null,-1)),e("a",{href:typeof a.value=="string"?a.value:a.value.url,target:"_blank",rel:"noopener noreferrer",class:"text-purple-600 hover:text-purple-800 underline truncate max-w-xs"},h(m(typeof a.value=="string"?a.value:a.value.url)),9,Je)]))}},Qe={class:"flex items-center space-x-2"},Xe={class:"text-gray-800"},Ye={__name:"DateField",props:{value:{type:[Object,String],required:!0}},setup(a){const m=c=>c?new Date(c).toLocaleDateString():"";return(c,g)=>(s(),r("div",Qe,[g[0]||(g[0]=e("i",{class:"pi pi-calendar text-indigo-500"},null,-1)),e("span",Xe,h(m(typeof a.value=="string"?a.value:a.value.date?.start||a.value.date)),1)]))}},Ze={class:"flex flex-wrap gap-2"},et={__name:"SelectField",props:{value:{type:[Object,Array],required:!0},fieldName:{type:String,required:!0},schema:{type:Object,default:null}},setup(a){const m=a,c=U(()=>({name:m.fieldName,options:f(m.fieldName,m.schema)})),g=U(()=>typeof m.value=="string"&&m.value.trim()?[{value:m.value,label:m.value,name:m.value}]:Array.isArray(m.value)&&m.value.length>0?m.value.map(b=>({value:b,label:b,name:b})):we(m.value)),f=(b,y)=>!y||!y.properties||!y.properties[b]?[]:y.properties[b].options||[];return(b,y)=>(s(),r("div",Ze,[(s(!0),r(k,null,C(g.value,$=>(s(),r("span",{key:$.value||$,class:S([q(ie)($,c.value,a.schema),"px-3 py-1.5 text-sm rounded-full border font-medium"])},h($.label||$),3))),128))]))}},tt={class:"flex items-center gap-2"},st={key:0,class:"flex items-center gap-1 bg-green-500 text-white px-2 py-1 rounded-full text-sm"},rt={class:"font-medium"},lt={key:1,class:"flex items-center gap-1 bg-gray-200 text-gray-600 px-2 py-1 rounded-full text-sm"},it={class:"font-medium"},ae={__name:"BooleanField",props:{value:{type:Boolean,required:!0},fieldName:{type:String,required:!0},formatLabel:{type:Function,required:!0}},setup(a){return(m,c)=>(s(),r("div",tt,[a.value?(s(),r("div",st,[c[0]||(c[0]=e("i",{class:"pi pi-check-circle"},null,-1)),e("span",rt,h(a.formatLabel(a.fieldName)),1)])):(s(),r("div",lt,[c[1]||(c[1]=e("i",{class:"pi pi-times-circle"},null,-1)),e("span",it,h(a.formatLabel(a.fieldName)),1)]))]))}},at={class:"text-gray-800 leading-relaxed"},ge={__name:"TextField",props:{value:{type:[String,Number],required:!0}},setup(a){return(m,c)=>(s(),r("div",at,h(a.value),1))}},nt={class:"space-y-3"},ot={key:0,class:"space-y-2"},dt={class:"flex items-center space-x-3"},ut={key:0,class:"flex-shrink-0"},ct=["src","alt"],pt={key:1,class:"pi pi-file text-blue-500 text-lg"},gt={class:"flex-1 min-w-0"},ft={class:"text-sm font-medium text-gray-900 truncate"},mt={key:0,class:"text-xs text-gray-500"},xt={key:1,class:"text-xs text-blue-600 hover:text-blue-800"},ht=["href"],vt={key:1,class:"text-center py-4 text-gray-500"},bt={__name:"FileField",props:{value:{type:[Array,Object,String],required:!0},showRemoveButton:{type:Boolean,default:!1}},emits:["remove-file"],setup(a,{emit:m}){const c=a,g=m,f=U(()=>{if(!c.value)return[];if(Array.isArray(c.value))return c.value;if(typeof c.value=="object"&&c.value.files)return c.value.files;if(typeof c.value=="string")try{const _=JSON.parse(c.value);return Array.isArray(_)?_:[_]}catch{return[]}return[]}),b=_=>{if(!_)return"";const z=["Bytes","KB","MB","GB"],w=Math.floor(Math.log(_)/Math.log(1024));return Math.round(_/Math.pow(1024,w)*100)/100+" "+z[w]},y=_=>{g("remove-file",_)},$=_=>{if(!_)return!1;if(_.type)return _.type.startsWith("image/");const z=_.name||_.filename||"";return[".jpg",".jpeg",".png",".gif",".bmp",".webp",".svg"].some(v=>z.toLowerCase().endsWith(v))},A=_=>_.url?_.url:_.preview?_.preview:_.file&&_.file instanceof File?URL.createObjectURL(_.file):"",E=_=>{console.warn("Failed to load image preview:",_.target.src)};return(_,z)=>{const w=K;return s(),r("div",nt,[f.value.length>0?(s(),r("div",ot,[(s(!0),r(k,null,C(f.value,(v,I)=>(s(),r("div",{key:I,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg border border-gray-200"},[e("div",dt,[$(v)?(s(),r("div",ut,[e("img",{src:A(v),alt:v.name||v.filename||"Image preview",class:"w-12 h-12 object-cover rounded-lg border border-gray-200",onError:E},null,40,ct)])):(s(),r("i",pt)),e("div",gt,[e("p",ft,h(v.name||v.filename||"Unknown file"),1),v.size?(s(),r("p",mt,h(b(v.size)),1)):F("",!0),v.url?(s(),r("p",xt,[e("a",{href:v.url,target:"_blank",rel:"noopener noreferrer",class:"hover:underline"}," View file ",8,ht)])):F("",!0)])]),a.showRemoveButton?(s(),R(w,{key:0,onClick:W=>y(I),icon:"pi pi-times",size:"small",severity:"danger",text:"",rounded:"",class:"ml-2"},null,8,["onClick"])):F("",!0)]))),128))])):(s(),r("div",vt,z[0]||(z[0]=[e("i",{class:"pi pi-file text-4xl text-gray-300 mb-2 block"},null,-1),e("p",{class:"text-sm"},"No files uploaded",-1)])))])}}};function yt(a="primary",m="small",c=!1){return{buttonPT:U(()=>({root:{class:[_t(m),wt(a),"rounded-lg flex items-center justify-center","transition-all duration-300 hover:scale-105 hover:-translate-y-0.5","shadow-lg hover:shadow-xl","focus:outline-none focus:ring-2 focus:ring-offset-2","disabled:opacity-50 disabled:cursor-not-allowed","!border-0"]},icon:{class:c?"m-0":"mr-2"},label:{class:"font-medium"}}))}}function _t(a){const m={small:"px-3 py-1.5 text-sm",large:"px-6 py-3 text-lg",default:"px-4 py-2"};return m[a]||m.default}function wt(a){const m={primary:"!bg-blue-600 !hover:bg-blue-700 !text-white focus:ring-blue-500 hover:shadow-[0_20px_40px_rgba(37,99,235,0.3),0_0_20px_rgba(37,99,235,0.2)]",secondary:"!bg-gray-200 !hover:bg-gray-300 !text-gray-700 hover:text-gray-800 border border-gray-300 focus:ring-gray-500 hover:shadow-[0_20px_40px_rgba(107,114,128,0.3),0_0_20px_rgba(107,114,128,0.2)]",danger:"!bg-red-600 !hover:bg-red-700 !text-white focus:ring-red-500 hover:shadow-[0_20px_40px_rgba(239,68,68,0.3),0_0_20px_rgba(239,68,68,0.2)]",success:"!bg-green-600 !hover:bg-green-700 !text-white focus:ring-green-500 hover:shadow-[0_20px_40px_#22c55e4d,0_0_20px_#22c55e33]",warning:"!bg-amber-600 !hover:bg-amber-700 !text-white focus:ring-amber-500 hover:shadow-[0_20px_40px_rgba(217,119,6,0.3),0_0_20px_rgba(217,119,6,0.2)]",info:"!bg-cyan-600 !hover:bg-cyan-700 !text-white focus:ring-cyan-500 hover:shadow-[0_20px_40px_rgba(6,182,212,0.3),0_0_20px_rgba(6,182,212,0.2)]"};return m[a]||m.primary}const te={__name:"IconButton",props:{icon:{type:String,required:!0},severity:{type:String,default:"primary"},size:{type:String,default:"small"}},emits:["click"],setup(a,{emit:m}){const c=a,{buttonPT:g}=yt(c.severity,c.size,!0),f=m,b=()=>{f("click")};return(y,$)=>{const A=K;return s(),R(A,{pt:q(g),icon:a.icon,onClick:b},null,8,["pt","icon"])}}},$t={key:0,class:"bg-white hover:shadow-lg text-gray-900 transition-shadow p-4 rounded-lg shadow-lg flex flex-col h-full relative"},Ft={class:"relative z-10"},kt={class:"flex justify-end items-start mb-3"},Ct={class:"flex gap-2"},jt={key:0,class:"mb-4 flex md:flex-row flex-col gap-2"},Lt={class:"flex justify-center mb-4"},At={key:0,class:"relative"},It=["src","alt"],Ot={class:"text-2xl font-bold text-gray-900"},St={key:0,class:"mb-2"},Nt={class:"flex flex-wrap gap-2"},zt={key:1,class:"mb-4"},Mt={class:"grid grid-cols-1 sm:grid-cols-2 gap-1"},Bt={class:"flex items-center space-x-1"},Ut={class:"flex items-center space-x-1"},Vt=["title"],Rt={key:2,class:"mb-4"},Dt={class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},qt={class:"flex items-center space-x-1"},Et=["title"],Tt={class:"flex items-center space-x-1"},Pt={class:"text-gray-800 font-mono font-medium"},Wt={key:3,class:"mb-4"},Ht={class:"gap-3"},Gt={class:"flex items-center justify-between"},Jt={class:"flex items-center space-x-2"},Kt=["title"],Qt={class:"text-gray-800 font-mono font-medium text-lg"},Xt={key:4,class:"mb-4"},Yt={class:"gap-3"},Zt={class:"flex items-center space-x-2"},es=["title"],ts={class:"flex items-center space-x-2"},ss=["href","title"],rs={key:5,class:"mb-4"},ls={class:"space-y-3"},is={class:"text-sm font-medium text-gray-700 mb-2"},as={key:0,class:"mr-2 text-base"},ns={key:2,class:"pi pi-paperclip mr-2 text-gray-500"},os=["title"],ds={class:"space-y-2"},us={key:0,class:"space-y-2"},cs={class:"flex items-center space-x-3"},ps={key:0,class:"flex-shrink-0"},gs=["src","alt"],fs={key:1,class:"pi pi-file text-blue-500 text-lg"},ms={class:"flex-1 min-w-0"},xs={class:"text-sm font-medium text-gray-900 truncate"},hs={key:0,class:"text-xs text-gray-500"},vs={class:"flex items-center space-x-2"},bs=["href"],ys={key:1,class:"text-center py-4 text-gray-500"},_s={class:"space-y-3 flex-1"},ws={key:0,class:"text-sm font-medium text-gray-700 mb-2"},$s={key:0,class:"mr-2 text-base"},Fs=["title"],ks={class:"text-xs text-gray-500 mt-auto pt-2 border-t border-gray-100 flex flex-row justify-end"},Cs={key:0},js={__name:"CardView",props:{item:{type:Object,required:!0},schema:{type:Object,default:null},loading:{type:Boolean,default:!1},editRoute:{type:String,default:"/edit"},itemIdField:{type:String,default:"id"}},emits:["deleteItem"],setup(a,{emit:m}){const c=oe(),g=$e(),f=a,b=m,y=U(()=>{if(!f.schema?.properties||!f.item)return{titleFields:[],contactFields:[],booleanFields:[],currencyNumberFields:[],regularNumberFields:[],urlFields:[],fileFields:[],otherFields:[]};const t=f.schema.properties,o=f.item,l={titleFields:[],contactFields:[],booleanFields:[],currencyNumberFields:[],regularNumberFields:[],urlFields:[],fileFields:[],otherFields:[]};return Object.entries(t).forEach(([p,x])=>{const N=o[p];if(!(!N&&x.type!=="checkbox"&&x.type!=="select"&&x.type!=="multi_select"&&x.type!=="files"))switch(x.type){case"title":l.titleFields.push([p,N]);break;case"checkbox":l.booleanFields.push([p,N||!1]);break;case"number":x.number?.format&&x.number.format!=="number"?l.currencyNumberFields.push([p,N||0]):l.regularNumberFields.push([p,N||0]);break;case"url":l.urlFields.push([p,N]);break;case"files":l.fileFields.push([p,x]);break;case"select":case"multi_select":l.otherFields.push([p,x]);break;default:p.toLowerCase().includes("email")||p.toLowerCase().includes("phone")||p.toLowerCase().includes("contact")||x.type==="email"||x.type==="phone"?l.contactFields.push([p,N]):x.type!=="title"&&x.type!=="number"&&x.type!=="checkbox"&&x.type!=="url"&&x.type!=="files"&&l.otherFields.push([p,x])}}),l}),$=U(()=>y.value.titleFields),A=U(()=>y.value.contactFields),E=U(()=>y.value.booleanFields),_=U(()=>y.value.currencyNumberFields),z=U(()=>y.value.regularNumberFields),w=U(()=>y.value.urlFields),v=U(()=>y.value.fileFields),I=U(()=>y.value.otherFields),W=U(()=>{if(!f.schema?.properties)return{};const t={};return Object.entries(f.schema.properties).forEach(([o,l])=>{switch(l.type){case"rich_text":t[o]=Ne;break;case"url":t[o]=Ke;break;case"date":t[o]=Ye;break;case"select":case"multi_select":t[o]=et;break;case"checkbox":t[o]=ae;break;case"files":t[o]=bt;break;default:t[o]=ge}}),t}),H=t=>t==="contact"?Re:t==="numbers"?He:W.value[t]||ge,V=t=>t!=="contact"&&t!=="numbers",d=t=>ee.formatLabel(t),j=(t,o=null)=>{if(typeof t!="number")return t;const l=o?B(o):null;return l?xe(t,l):t.toLocaleString()},L=()=>{const t=f.item[f.itemIdField];c.push(`${f.editRoute}/${t}`)},M=()=>{const t=f.item[f.itemIdField],o=$.value.length>0?$.value[0][1]:"this item";g.require({message:`Are you sure you want to delete "${o}"?`,header:"Confirm Deletion",icon:"pi pi-exclamation-triangle",acceptClass:"p-button-danger",accept:()=>{b("deleteItem",t)},reject:()=>{}})},O=t=>t?new Date(t).toLocaleDateString():"",B=t=>f.schema?.properties?.[t]||null,T=(t,o)=>{const l=t.toLowerCase();return l.includes("email")||o?.type==="email"?"pi pi-envelope text-blue-500":l.includes("phone")||l.includes("mobile")||o?.type==="phone"?"pi pi-phone text-green-500":l.includes("linkedin")||l.includes("social")?"pi pi-linkedin text-blue-600":l.includes("website")||l.includes("url")?"pi pi-globe text-purple-500":l.includes("address")||l.includes("location")?"pi pi-map-marker text-red-500":"pi pi-user text-gray-500"},G=D(""),J=()=>{if($.value.length>0){const o=$.value[0][1];if(o&&typeof o=="string"){const l=o.trim().split(/\s+/);if(l.length>=2)return`${l[0][0]}${l[l.length-1][0]}`.toUpperCase();if(l.length===1)return l[0][0].toUpperCase()}}const t=Object.values(f.item).find(o=>o&&typeof o=="string"&&o.trim().length>0);return t?t.trim()[0].toUpperCase():"?"},Q=t=>{const o=Object.entries(t).find(([p,x])=>x&&(p.toLowerCase().includes("avatar")||p.toLowerCase().includes("profile")||p.toLowerCase().includes("photo")||p.toLowerCase().includes("image")));if(o){const p=o[1];if(Array.isArray(p)&&p.length>0){const x=p[0];if(x&&x.url)return x.url}if(p&&typeof p=="object"&&!Array.isArray(p)){if(p.url)return p.url;if(p.files&&Array.isArray(p.files)&&p.files.length>0){const x=p.files[0];if(x&&x.url)return x.url}}if(typeof p=="string"&&p.trim())return p.trim()}const l=Object.entries(t).find(([p,x])=>{if(x&&typeof x=="object"){if(x.url&&typeof x.url=="string")return!0;if(x.files&&Array.isArray(x.files)&&x.files.length>0)return x.files.some(N=>N&&N.url)}return!1});if(l){const p=l[1];if(p.url)return p.url;if(p.files&&Array.isArray(p.files)&&p.files.length>0){const x=p.files[0];if(x&&x.url)return x.url}}if(f.schema?.properties){const p=Object.entries(f.schema.properties).find(([x,N])=>N.type==="files");if(p){const x=t[p[0]];if(Array.isArray(x)&&x.length>0){const N=x[0];if(N&&N.url)return N.url}}}return null};fe(()=>f.item,t=>{if(t){const o=Q(t);G.value=o}},{immediate:!0,deep:!0});const se=t=>{console.error("Avatar image failed to load:",t.target.src)},re=t=>{},i=t=>{if(!t)return!1;if(t.type&&t.type.startsWith("image/"))return!0;const o=t.name||t.filename||"";return[".jpg",".jpeg",".png",".gif",".bmp",".webp",".svg",".tiff",".ico"].some(p=>o.toLowerCase().endsWith(p))},u=t=>t.url?t.url:t.preview?t.preview:t.file&&t.file instanceof File?URL.createObjectURL(t.file):"",n=t=>{if(!t)return"";const o=["Bytes","KB","MB","GB"],l=Math.floor(Math.log(t)/Math.log(1024));return Math.round(t/Math.pow(1024,l)*100)/100+" "+o[l]};return(t,o)=>a.item&&Object.keys(a.item).length>0?(s(),r("div",$t,[o[2]||(o[2]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 rounded-lg p-0.5 shadow-lg",style:{filter:"drop-shadow(0 10px 25px rgba(0, 144, 247, 0.3)) drop-shadow(0 4px 6px rgba(186, 98, 252, 0.2)) drop-shadow(0 1px 3px rgba(242, 65, 107, 0.2)) drop-shadow(0 0 0 rgba(245, 86, 0, 0.1))"}},[e("div",{class:"bg-white rounded-lg h-full w-full"})],-1)),e("div",Ft,[e("div",kt,[e("div",Ct,[P(te,{icon:"pi pi-pencil",severity:"success",onClick:L}),P(te,{icon:"pi pi-trash",severity:"danger",onClick:M})])]),$.value.length>0?(s(),r("div",jt,[e("div",Lt,[G.value?(s(),r("div",At,[e("img",{src:G.value,alt:J(),class:"w-24 h-24 rounded-full border-2 border-gray-200 shadow-md bg-gray-100 object-cover",onError:se,onLoad:re},null,40,It)])):(s(),R(q(he),{key:1,label:J(),size:"xlarge",shape:"circle",class:"border-2 border-gray-200 shadow-md bg-gray-100 p-2"},null,8,["label"]))]),(s(!0),r(k,null,C($.value,([l,p])=>(s(),r("div",{key:l,class:"flex flex-col justify-start gap-2 mb-2 ml-4"},[e("h2",Ot,h(p),1),E.value.length>0?(s(),r("div",St,[e("div",Nt,[(s(!0),r(k,null,C(E.value,([x,N])=>(s(),R(ae,{key:x,value:N,"field-name":x,"format-label":de=>d(de)},null,8,["value","field-name","format-label"]))),128))])])):F("",!0)]))),128))])):F("",!0),A.value.length>0?(s(),r("div",zt,[e("div",Mt,[(s(!0),r(k,null,C(A.value,([l,p])=>(s(),r("div",{key:l,class:"flex items-center justify-start bg-blue-50 rounded-lg p-1 gap-1"},[e("div",Bt,[e("i",{class:S(T(l,B(l)))},null,2)]),e("div",Ut,[e("span",{class:"text-gray-800 font-medium text-sm truncate max-w-32",title:p||"Not provided"},h(p||"Not provided"),9,Vt)])]))),128))])])):F("",!0),_.value.length>0?(s(),r("div",Rt,[e("div",Dt,[(s(!0),r(k,null,C(_.value,([l,p])=>(s(),r("div",{key:l,class:"flex flex-col items-center justify-between bg-green-50 rounded-lg p-1 border border-green-200"},[e("div",qt,[e("span",{class:"text-sm font-medium text-gray-700 truncate max-w-24",title:d(l)},h(d(l)),9,Et)]),e("div",Tt,[e("span",Pt,h(j(p||0,l)),1)])]))),128))])])):F("",!0),z.value.length>0?(s(),r("div",Wt,[e("div",Ht,[(s(!0),r(k,null,C(z.value,([l,p])=>(s(),r("div",{key:l,class:"flex-col items-center justify-between bg-gray-50 rounded-lg p-3"},[e("div",Gt,[e("div",Jt,[e("i",{class:S([q(Z)(l,B(l)),"text-blue-500"])},null,2),e("span",{class:"text-sm font-medium text-gray-700",title:d(l)},h(d(l)),9,Kt)]),e("span",Qt,h(j(p||0,l)),1)])]))),128))])])):F("",!0),w.value.length>0?(s(),r("div",Xt,[e("div",Yt,[(s(!0),r(k,null,C(w.value,([l,p])=>(s(),r("div",{key:l,class:"flex-col items-center justify-between bg-purple-50 rounded-lg p-3 border border-purple-200"},[e("div",Zt,[o[0]||(o[0]=e("i",{class:"pi pi-link text-purple-600"},null,-1)),e("span",{class:"text-sm font-medium text-gray-700",title:d(l)},h(d(l)),9,es)]),e("div",ts,[e("a",{href:p,target:"_blank",rel:"noopener noreferrer",class:"text-purple-600 hover:text-purple-800 underline",title:p},h(p||"No URL"),9,ss)])]))),128))])])):F("",!0),v.value.length>0?(s(),r("div",rs,[e("div",ls,[(s(!0),r(k,null,C(v.value,([l,p])=>(s(),r("div",{key:l,class:"space-y-1"},[e("div",is,[p?.emoji?(s(),r("span",as,h(p.emoji),1)):p?.icon?(s(),r("i",{key:1,class:S([p.icon,"mr-2 text-gray-500"])},null,2)):(s(),r("i",ns)),e("span",{class:"truncate max-w-32",title:d(l)},h(d(l)),9,os)]),e("div",ds,[a.item[l]&&Array.isArray(a.item[l])&&a.item[l].length>0?(s(),r("div",us,[(s(!0),r(k,null,C(a.item[l],(x,N)=>(s(),r("div",{key:N,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg border border-gray-200"},[e("div",cs,[i(x)?(s(),r("div",ps,[e("img",{src:u(x),alt:x.name||"File preview",class:"w-12 h-12 object-cover rounded-lg border border-gray-200"},null,8,gs)])):(s(),r("i",fs)),e("div",ms,[e("p",xs,h(x.name||"Unknown file"),1),x.size?(s(),r("p",hs,h(n(x.size)),1)):F("",!0)])]),e("div",vs,[x.url?(s(),r("a",{key:0,href:x.url,target:"_blank",rel:"noopener noreferrer",class:"text-sm text-blue-600 hover:text-blue-800 hover:underline"}," View ",8,bs)):F("",!0)])]))),128))])):(s(),r("div",ys,o[1]||(o[1]=[e("i",{class:"pi pi-file text-4xl text-gray-300 mb-2 block"},null,-1),e("p",{class:"text-sm"},"No files uploaded",-1)])))])]))),128))])])):F("",!0),e("div",_s,[(s(!0),r(k,null,C(I.value,([l,p])=>(s(),r("div",{key:l,class:"space-y-1 pt-2 border-b border-gray-100 last:border-b-0"},[V(l)?(s(),r("div",ws,[p?.emoji?(s(),r("span",$s,h(p.emoji),1)):p?.icon?(s(),r("i",{key:1,class:S([p.icon,"mr-2 text-gray-500"])},null,2)):F("",!0),e("span",{class:"truncate max-w-32",title:d(l)},h(d(l)),9,Fs)])):F("",!0),(s(),R(be(H(l)),{value:a.item[l],"field-name":l,schema:a.schema},null,8,["value","field-name","schema"]))]))),128))]),e("div",ks,[e("span",null,"Added: "+h(O(a.item.created_time)),1),a.item.last_edited_time!==a.item.created_time?(s(),r("span",Cs," • Updated: "+h(O(a.item.last_edited_time)),1)):F("",!0)])])])):F("",!0)}},Ls={class:"relative"},As={class:"relative z-10 bg-white rounded-lg overflow-hidden"},Is={class:"overflow-x-auto"},Os={class:"w-full"},Ss={class:"bg-gray-50 border-b border-gray-200"},Ns={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider md:sticky md:left-0 bg-gray-50 z-10"},zs={class:"flex items-center space-x-2"},Ms={class:"flex items-center space-x-2"},Bs={class:"flex items-center space-x-2"},Us={class:"flex items-center space-x-2"},Vs={class:"flex items-center space-x-2"},Rs={class:"flex items-center space-x-2"},Ds={class:"bg-white divide-y divide-gray-200"},qs={class:"px-6 py-4 whitespace-nowrap left-0 bg-white z-10"},Es={class:"flex items-center space-x-3"},Ts={key:0,class:"flex-shrink-0"},Ps=["src","alt"],Ws={class:"text-sm font-medium text-gray-900"},Hs={key:0,class:"flex flex-wrap gap-2 mt-1"},Gs={class:"text-xs text-gray-500 mt-1"},Js={class:"text-sm text-gray-600"},Ks={class:"text-sm"},Qs={key:0,class:"flex items-center space-x-2"},Xs={class:"text-gray-900 font-mono"},Ys={key:1,class:"text-gray-900 font-mono"},Zs={class:"flex flex-wrap gap-1"},er={key:0,class:"text-sm text-gray-400"},tr={class:"space-y-2"},sr={key:0,class:"space-y-1"},rr={key:0,class:"flex-shrink-0"},lr=["src","alt"],ir={key:1,class:"pi pi-file text-blue-500 text-sm"},ar={class:"flex-1 min-w-0"},nr={class:"text-xs text-gray-900 truncate"},or=["href"],dr={key:0,class:"text-xs text-gray-500"},ur={key:1,class:"text-sm text-gray-400"},cr={key:0,class:"text-sm"},pr={key:1,class:"text-sm text-gray-400"},gr={key:1,class:"text-sm"},fr=["href"],mr={key:1,class:"text-sm text-gray-400"},xr={key:2,class:"text-sm text-gray-900"},hr={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium sticky right-0 bg-white z-10"},vr={class:"flex gap-2 justify-end md:flex-row flex-col"},br={__name:"TableView",props:{items:{type:Array,default:()=>[]},schema:{type:Object,default:null},editRoute:{type:String,default:"/edit"}},emits:["deleteItem"],setup(a,{emit:m}){const c=oe(),g=a,f=m,b=i=>{if(!g.schema?.properties||!i)return null;const u=Object.entries(g.schema.properties).find(([n,t])=>t.type==="title");return u?i[u[0]]:null},y=i=>{if(!g.schema?.properties||!i)return[];const u=[];return Object.entries(g.schema.properties).forEach(([n,t])=>{t.type==="checkbox"&&i[n]!==void 0&&u.push([n,i[n]||!1])}),u},$=i=>{const u=i.toLowerCase();return u.includes("email")?"pi pi-envelope":u.includes("phone")||u.includes("mobile")?"pi pi-phone":u.includes("linkedin")||u.includes("social")?"pi pi-linkedin":u.includes("website")||u.includes("url")?"pi pi-globe":u.includes("address")||u.includes("location")?"pi pi-map-marker":"pi pi-user"},A=(i,u)=>{const n=i.toLowerCase();return u.type==="url"?"pi pi-link":u.type==="date"?"pi pi-calendar":u.type==="select"?"pi pi-list":u.type==="rich_text"?"pi pi-file-edit":u.type==="files"?"pi pi-file":u.type==="avatar"||n.includes("avatar")||n.includes("profile")||n.includes("photo")?"pi pi-user":n.includes("bio")||n.includes("description")||n.includes("notes")?"pi pi-file-text":(n.includes("status"),"pi pi-info-circle")},E=i=>{if(!g.schema?.properties?.[i])return!1;const u=g.schema.properties[i];return u.type==="number"&&u.number?.format&&u.number.format!=="number"},_=i=>{const u=b(i);if(u&&typeof u=="string"){const t=u.trim().split(/\s+/);if(t.length>=2)return`${t[0][0]}${t[t.length-1][0]}`.toUpperCase();if(t.length===1)return t[0][0].toUpperCase()}const n=Object.values(i).find(t=>t&&typeof t=="string"&&t.trim().length>0);return n?n.trim()[0].toUpperCase():"?"},z=i=>{const u=Object.entries(i).find(([t,o])=>o&&(t.toLowerCase().includes("avatar")||t.toLowerCase().includes("profile")||t.toLowerCase().includes("photo")||t.toLowerCase().includes("image")));if(u){const t=u[1];if(Array.isArray(t)&&t.length>0){const o=t[0];if(o&&o.url)return o.url}if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.url)return t.url;if(t.files&&Array.isArray(t.files)&&t.files.length>0){const o=t.files[0];if(o&&o.url)return o.url}}if(typeof t=="string"&&t.trim())return t.trim()}const n=Object.entries(i).find(([t,o])=>{if(o&&typeof o=="object"){if(o.url&&typeof o.url=="string")return!0;if(o.files&&Array.isArray(o.files)&&o.files.length>0)return o.files.some(l=>l&&l.url)}return!1});if(n){const t=n[1];if(t.url)return t.url;if(t.files&&Array.isArray(t.files)&&t.files.length>0){const o=t.files[0];if(o&&o.url)return o.url}}if(g.schema?.properties){const t=Object.entries(g.schema.properties).find(([o,l])=>l.type==="files");if(t){const o=i[t[0]];if(Array.isArray(o)&&o.length>0){const l=o[0];if(l&&l.url)return l.url}}}return null},w=i=>ee.formatLabel(i),v=(i,u)=>{if(typeof i!="number")return i;const n=g.schema?.properties?.[u];return n?xe(i,n):i.toLocaleString()},I=(i,u)=>typeof i=="object"&&i!==null?i.url?i.url:i.rich_text?i.rich_text.map(n=>n.plain_text).join(""):i.select?i.select.name:i.multi_select?i.multi_select.map(n=>n.name).join(", "):i.date?i.date.start:JSON.stringify(i):i||"N/A",W=i=>i?new Date(i).toLocaleDateString():"",H=(i,u)=>{const n={name:u,options:g.schema?.properties?.[u]?.options||[]};return ie(i,n,g.schema)},V=(i,u)=>{const n={name:u,options:g.schema?.properties?.[u]?.options||[]};return ie({value:i,label:i,name:i},n,g.schema)},d=(i,u)=>{if(!i)return"No selection";const t=(g.schema?.properties?.[u]?.options||[]).find(o=>o.value===i||o.name===i);return t&&(t.label||t.name)||i},j=i=>typeof i=="object"&&i!==null&&i.url||i,L=i=>{if(!i)return!1;if(i.type&&i.type.startsWith("image/"))return!0;const u=i.name||i.filename||"";return[".jpg",".jpeg",".png",".gif",".bmp",".webp",".svg",".tiff",".ico"].some(t=>u.toLowerCase().endsWith(t))},M=i=>i.url?i.url:i.preview?i.preview:i.file&&i.file instanceof File?URL.createObjectURL(i.file):"",O=()=>{if(!g.schema?.properties)return null;const i=Object.entries(g.schema.properties).find(([u,n])=>n.type==="title");return i?w(i[0]):null},B=()=>g.schema?.properties?Object.entries(g.schema.properties).filter(([i,u])=>i.toLowerCase().includes("email")||i.toLowerCase().includes("phone")||i.toLowerCase().includes("contact")||u.type==="email"||u.type==="phone"):[],T=()=>g.schema?.properties?Object.entries(g.schema.properties).filter(([i,u])=>u.type==="number"):[],G=()=>g.schema?.properties?Object.entries(g.schema.properties).filter(([i,u])=>u.type==="multi_select"):[],J=()=>g.schema?.properties?Object.entries(g.schema.properties).filter(([i,u])=>u.type==="files"):[],Q=()=>g.schema?.properties?Object.entries(g.schema.properties).filter(([i,u])=>!(u.type==="title"||u.type==="number"||u.type==="multi_select"||u.type==="files"||u.type==="checkbox"||i.toLowerCase().includes("email")||i.toLowerCase().includes("phone")||i.toLowerCase().includes("contact"))):[],se=i=>{c.push(`${g.editRoute}/${i.id}`)},re=i=>{f("deleteItem",i.id)};return(i,u)=>(s(),r("div",Ls,[u[6]||(u[6]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 rounded-lg p-0.5 shadow-lg",style:{filter:"drop-shadow(0 10px 25px rgba(0, 144, 247, 0.3)) drop-shadow(0 4px 6px rgba(186, 98, 252, 0.2)) drop-shadow(0 1px 3px rgba(242, 65, 107, 0.2)) drop-shadow(0 0 0 rgba(245, 86, 0, 0.1))"}},[e("div",{class:"bg-white rounded-lg h-full w-full"})],-1)),e("div",As,[u[5]||(u[5]=e("div",{class:"bg-gray-50 px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"All Items")],-1)),e("div",Is,[e("table",Os,[e("thead",Ss,[e("tr",null,[e("th",Ns,[e("div",zs,[u[0]||(u[0]=e("i",{class:"pi pi-user text-blue-500"},null,-1)),e("span",null,h(O()||"Item"),1)])]),(s(!0),r(k,null,C(B(),([n,t])=>(s(),r("th",{key:n,class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},[e("div",Ms,[e("i",{class:S([$(n),"text-blue-500"])},null,2),e("span",null,h(w(n)),1)])]))),128)),(s(!0),r(k,null,C(T(),([n,t])=>(s(),r("th",{key:n,class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},[e("div",Bs,[e("i",{class:S([q(Z)(n),"text-green-500"])},null,2),e("span",null,h(w(n)),1)])]))),128)),(s(!0),r(k,null,C(G(),([n,t])=>(s(),r("th",{key:n,class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider min-w-48"},[e("div",Us,[u[1]||(u[1]=e("i",{class:"pi pi-tags text-purple-500"},null,-1)),e("span",null,h(w(n)),1)])]))),128)),(s(!0),r(k,null,C(J(),([n,t])=>(s(),r("th",{key:n,class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider min-w-32"},[e("div",Vs,[u[2]||(u[2]=e("i",{class:"pi pi-paperclip text-blue-500"},null,-1)),e("span",null,h(w(n)),1)])]))),128)),(s(!0),r(k,null,C(Q(),([n,t])=>(s(),r("th",{key:n,class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},[e("div",Rs,[e("i",{class:S([A(n,t),"text-gray-500"])},null,2),e("span",null,h(w(n)),1)])]))),128)),u[3]||(u[3]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider sticky right-0 bg-gray-50 z-10"}," Actions ",-1))])]),e("tbody",Ds,[(s(!0),r(k,null,C(a.items,n=>(s(),r("tr",{key:n.id,class:"hover:bg-gray-50"},[e("td",qs,[e("div",Es,[z(n)?(s(),r("div",Ts,[e("img",{src:z(n),alt:_(n),class:"w-10 h-10 rounded-full border-2 border-gray-200 shadow-sm bg-gray-100 object-cover"},null,8,Ps)])):(s(),R(q(he),{key:1,label:_(n),size:"medium",shape:"circle",class:"border-2 border-gray-200 shadow-sm bg-gray-100"},null,8,["label"])),e("div",null,[e("div",Ws,h(b(n)||"Untitled"),1),y(n).length>0?(s(),r("div",Hs,[(s(!0),r(k,null,C(y(n),([t,o])=>(s(),R(ae,{key:t,value:o,"field-name":t,"format-label":w},null,8,["value","field-name"]))),128))])):F("",!0),e("div",Gs,h(W(n.created_time)),1)])])]),(s(!0),r(k,null,C(B(),([t,o])=>(s(),r("td",{key:t,class:"px-6 py-4"},[e("div",Js,h(n[t]||"Not provided"),1)]))),128)),(s(!0),r(k,null,C(T(),([t,o])=>(s(),r("td",{key:t,class:"px-6 py-4"},[e("div",Ks,[E(t)?(s(),r("span",Qs,[e("i",{class:S([q(Z)(t),"text-green-500"])},null,2),e("span",Xs,h(v(n[t]||0,t)),1)])):(s(),r("span",Ys,h(v(n[t]||0,t)),1))])]))),128)),(s(!0),r(k,null,C(G(),([t,o])=>(s(),r("td",{key:t,class:"px-6 py-4 min-w-48"},[e("div",Zs,[(s(!0),r(k,null,C(n[t]||[],l=>(s(),r("span",{key:l.name||l,class:S([H(l,t),"px-2 py-1 text-xs rounded-full border font-medium"])},h(l.name||l),3))),128)),!n[t]||n[t].length===0?(s(),r("span",er," No tags ")):F("",!0)])]))),128)),(s(!0),r(k,null,C(J(),([t,o])=>(s(),r("td",{key:t,class:"px-6 py-4 min-w-32"},[e("div",tr,[n[t]&&Array.isArray(n[t])&&n[t].length>0?(s(),r("div",sr,[(s(!0),r(k,null,C(n[t].slice(0,2),(l,p)=>(s(),r("div",{key:p,class:"flex items-center space-x-2"},[L(l)?(s(),r("div",rr,[e("img",{src:M(l),alt:l.name||"File preview",class:"w-8 h-8 object-cover rounded border border-gray-200"},null,8,lr)])):(s(),r("i",ir)),e("div",ar,[e("p",nr,h(l.name||"Unknown file"),1),l.url?(s(),r("a",{key:0,href:l.url,target:"_blank",rel:"noopener noreferrer",class:"text-xs text-blue-600 hover:text-blue-800 hover:underline"}," View ",8,or)):F("",!0)])]))),128)),n[t].length>2?(s(),r("div",dr," +"+h(n[t].length-2)+" more files ",1)):F("",!0)])):(s(),r("div",ur," No files "))])]))),128)),(s(!0),r(k,null,C(Q(),([t,o])=>(s(),r("td",{key:t,class:"px-6 py-4"},[o.type==="select"?(s(),r("div",cr,[n[t]?(s(),r("span",{key:0,class:S([V(n[t],t),"px-2 py-1 text-xs rounded-full border font-medium"])},h(d(n[t],t)),3)):(s(),r("span",pr,"No selection"))])):o.type==="url"?(s(),r("div",gr,[n[t]?(s(),r("a",{key:0,href:j(n[t]),target:"_blank",rel:"noopener noreferrer",class:"text-blue-600 hover:text-blue-800 underline flex items-center space-x-1"},[u[4]||(u[4]=e("i",{class:"pi pi-external-link text-xs"},null,-1)),e("span",null,h(j(n[t])),1)],8,fr)):(s(),r("span",mr,"No URL"))])):(s(),r("div",xr,h(I(n[t])),1))]))),128)),e("td",hr,[e("div",vr,[P(te,{icon:"pi pi-pencil",severity:"success",size:"small",onClick:t=>se(n)},null,8,["onClick"]),P(te,{icon:"pi pi-trash",severity:"danger",size:"small",onClick:t=>re(n)},null,8,["onClick"])])])]))),128))])])])])]))}},yr={class:"bg-white hover:shadow-lg transition-shadow p-4 border-2 border-black rounded-lg shadow-lg flex flex-col h-full"},_r={class:"text-center py-16 flex-1 flex flex-col items-center justify-center"},le={__name:"EmptyState",emits:["add-item"],setup(a){return(m,c)=>{const g=K;return s(),r("div",yr,[e("div",_r,[c[2]||(c[2]=e("div",{class:"text-6xl mb-4"},"📋",-1)),c[3]||(c[3]=e("h3",{class:"text-2xl font-semibold text-gray-900 mb-2"},"No rows found",-1)),c[4]||(c[4]=e("p",{class:"text-gray-600 mb-6 text-center max-w-md"},"This database is empty. Start building your collection by adding your first item to get started.",-1)),P(g,{onClick:c[0]||(c[0]=f=>m.$emit("add-item")),severity:"primary"},{default:ne(()=>c[1]||(c[1]=[e("i",{class:"pi pi-plus mr-2"},null,-1),Y("Add First Item ",-1)])),_:1,__:[1]})])])}}},wr={class:"flex gap-4 items-center mb-6"},$r={__name:"SearchFilterSkeleton",setup(a){return(m,c)=>(s(),r("div",wr,c[0]||(c[0]=[ye('<div class="relative flex-1"><div class="absolute inset-0 bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 rounded-lg p-0.5 shadow-lg" style="filter:drop-shadow(0 10px 25px rgba(0, 144, 247, 0.3)) drop-shadow(0 4px 6px rgba(186, 98, 252, 0.2)) drop-shadow(0 1px 3px rgba(242, 65, 107, 0.2)) drop-shadow(0 0 0 rgba(245, 86, 0, 0.1));"><div class="bg-white rounded-lg h-full w-full"></div></div><div class="relative z-10"><div class="relative"><div class="h-10 bg-gray-200 rounded-lg animate-pulse"></div><div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"><div class="w-4 h-4 bg-gray-300 rounded animate-pulse"></div></div></div></div></div><div class="flex-shrink-0 flex gap-2"><div class="relative"><div class="absolute inset-0 bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 rounded-lg p-0.5 shadow-lg" style="filter:drop-shadow(0 10px 25px rgba(0, 144, 247, 0.3)) drop-shadow(0 4px 6px rgba(186, 98, 252, 0.2)) drop-shadow(0 1px 3px rgba(242, 65, 107, 0.2)) drop-shadow(0 0 0 rgba(245, 86, 0, 0.1));"><div class="bg-white rounded-lg h-full w-full"></div></div><div class="relative z-10 px-3 py-2.5 rounded-lg flex items-center gap-2"><div class="w-4 h-4 bg-gray-300 rounded animate-pulse"></div><div class="h-4 bg-gray-300 rounded animate-pulse" style="width:60px;"></div></div></div><div class="relative"><div class="absolute inset-0 bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 rounded-lg p-0.5 shadow-lg" style="filter:drop-shadow(0 10px 25px rgba(0, 144, 247, 0.3)) drop-shadow(0 4px 6px rgba(186, 98, 252, 0.2)) drop-shadow(0 1px 3px rgba(242, 65, 107, 0.2)) drop-shadow(0 0 0 rgba(245, 86, 0, 0.1));"><div class="bg-white rounded-lg h-full w-full"></div></div><div class="relative z-10 px-3 py-2.5 rounded-lg flex items-center gap-2"><div class="w-4 h-4 bg-gray-300 rounded animate-pulse"></div><div class="h-4 bg-gray-300 rounded animate-pulse" style="width:70px;"></div></div></div></div><div class="flex-shrink-0"><div class="relative"><div class="absolute inset-0 bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 rounded-lg p-0.5 shadow-lg" style="filter:drop-shadow(0 10px 25px rgba(0, 144, 247, 0.3)) drop-shadow(0 4px 6px rgba(186, 98, 252, 0.2)) drop-shadow(0 1px 3px rgba(242, 65, 107, 0.2)) drop-shadow(0 0 0 rgba(245, 86, 0, 0.1));"><div class="bg-gray-100 rounded-lg h-full w-full"></div></div><div class="relative z-10 flex bg-gray-100 rounded-lg p-1"><div class="px-3 py-2 rounded-md flex items-center gap-2"><div class="w-4 h-4 bg-gray-300 rounded animate-pulse"></div><div class="h-4 bg-gray-300 rounded animate-pulse" style="width:50px;"></div></div><div class="px-3 py-2 rounded-md flex items-center gap-2"><div class="w-4 h-4 bg-gray-300 rounded animate-pulse"></div><div class="h-4 bg-gray-300 rounded animate-pulse" style="width:60px;"></div></div></div></div></div>',3)])))}},Fr={class:"space-y-6"},kr={key:0},Cr={key:1,class:"space-y-6"},jr={class:"flex flex-col gap-4 lg:hidden"},Lr={class:"relative w-full"},Ar={class:"relative z-10"},Ir={class:"relative"},Or={class:"flex gap-2 items-center"},Sr={class:"flex gap-2 flex-1"},Nr={class:"relative flex-1"},zr={class:"hidden sm:inline"},Mr={class:"relative flex-1"},Br={class:"hidden sm:inline"},Ur={class:"flex-shrink-0"},Vr={class:"relative"},Rr={class:"relative z-10 flex bg-white rounded-lg p-1"},Dr={class:"hidden lg:flex gap-4 items-center"},qr={class:"relative flex-1"},Er={class:"relative z-10"},Tr={class:"relative"},Pr={class:"flex-shrink-0 flex gap-2"},Wr={class:"relative"},Hr={class:"relative"},Gr={class:"flex-shrink-0"},Jr={class:"relative"},Kr={class:"relative z-10 flex bg-white rounded-lg p-1"},Qr={key:0},Xr={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Yr={key:1},Zr={__name:"ListView",props:{loading:{type:Boolean,default:!1},loadingMore:{type:Boolean,default:!1},items:{type:Array,default:()=>[]},schema:{type:Object,default:null},hasMore:{type:Boolean,default:!1}},emits:["deleteItem","loadMore"],setup(a,{emit:m}){const c=oe(),g=me(),f=D("card"),b=D(""),y=D(!1),$=D(!1),A=a,E=m;U(()=>(A.items.length===0||!A.schema)&&!A.loading);const _=U(()=>{if(A.items.length===0)return{verified:"Verified",available:"Available"};const V=Object.entries(A.items[0]).filter(([,O])=>typeof O=="boolean");let d="Verified",j="Available";const L=V.find(([O])=>{const B=O.toLowerCase();return B.includes("verified")||B.includes("verify")});L&&(d=ee.formatLabel(L[0]));const M=V.find(([O])=>{const B=O.toLowerCase();return B.includes("available")||B.includes("hire")||B.includes("hiring")});return M&&(j=ee.formatLabel(M[0])),{verified:d,available:j}}),z=U(()=>{let V=A.items;if(A.items.length>0&&(y.value||$.value),(y.value||$.value)&&(V=V.filter(j=>{if(y.value&&$.value){const L=Object.entries(j).some(([O,B])=>{if(typeof B!="boolean")return!1;const T=O.toLowerCase();return(T.includes("verified")||T.includes("verify"))&&B===!0}),M=Object.entries(j).some(([O,B])=>{if(typeof B!="boolean")return!1;const T=O.toLowerCase();return(T.includes("available")||T.includes("hire")||T.includes("hiring"))&&B===!0});return L&&M}return y.value?Object.entries(j).some(([L,M])=>{if(typeof M!="boolean")return!1;const O=L.toLowerCase();return(O.includes("verified")||O.includes("verify"))&&M===!0}):$.value?Object.entries(j).some(([L,M])=>{if(typeof M!="boolean")return!1;const O=L.toLowerCase();return(O.includes("available")||O.includes("hire")||O.includes("hiring"))&&M===!0}):!0})),!b.value.trim())return V;const d=b.value.toLowerCase().trim();return V.filter(j=>Object.entries(j).some(([,L])=>L==null?!1:typeof L=="string"?L.toLowerCase().includes(d):Array.isArray(L)?L.some(M=>typeof M=="string"?M.toLowerCase().includes(d):M.name&&M.name.toLowerCase().includes(d)):typeof L=="object"&&L.name?L.name.toLowerCase().includes(d):typeof L=="number"?L.toString().includes(d):!1))}),w=()=>{b.value=""},v=()=>{y.value=!y.value},I=()=>{$.value=!$.value},W=()=>{g.params.databaseId?c.push({name:"db-add",params:{databaseId:g.params.databaseId}}):c.push("/add")},H=V=>{E("deleteItem",V)};return(V,d)=>(s(),r("div",Fr,[a.loading?(s(),r("div",kr,[P($r),P(pe,{count:6,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"})])):a.schema?(s(),r("div",Cr,[e("div",jr,[e("div",Lr,[d[8]||(d[8]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 rounded-lg p-0.5 shadow-lg",style:{filter:"drop-shadow(0 10px 25px rgba(0, 144, 247, 0.3)) drop-shadow(0 4px 6px rgba(186, 98, 252, 0.2)) drop-shadow(0 1px 3px rgba(242, 65, 107, 0.2)) drop-shadow(0 0 0 rgba(245, 86, 0, 0.1))"}},[e("div",{class:"bg-white rounded-lg h-full w-full"})],-1)),e("div",Ar,[e("div",Ir,[ue(e("input",{"onUpdate:modelValue":d[0]||(d[0]=j=>b.value=j),type:"text",placeholder:"Search items...",class:"w-full pl-10 pr-4 py-2.5 bg-white border-0 rounded-lg text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-0"},null,512),[[ce,b.value]]),d[7]||(d[7]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("i",{class:"pi pi-search text-gray-400"})],-1)),b.value?(s(),r("button",{key:0,onClick:w,class:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600"},d[6]||(d[6]=[e("i",{class:"pi pi-times"},null,-1)]))):F("",!0)])])]),e("div",Or,[e("div",Sr,[e("div",Nr,[d[11]||(d[11]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 rounded-lg p-0.5 shadow-lg",style:{filter:"drop-shadow(0 10px 25px rgba(0, 144, 247, 0.3)) drop-shadow(0 4px 6px rgba(186, 98, 252, 0.2)) drop-shadow(0 1px 3px rgba(242, 65, 107, 0.2)) drop-shadow(0 0 0 rgba(245, 86, 0, 0.1))"}},[e("div",{class:"bg-white rounded-lg h-full w-full"})],-1)),e("button",{onClick:v,class:S(["relative z-10 w-full px-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200 flex items-center justify-center gap-2",y.value?"bg-green-100 text-green-800 border border-green-300":"bg-white text-gray-600 hover:text-gray-800"])},[d[9]||(d[9]=e("i",{class:"pi pi-check-circle"},null,-1)),e("span",zr,h(_.value.verified),1),d[10]||(d[10]=e("span",{class:"sm:hidden"},"✓",-1))],2)]),e("div",Mr,[d[14]||(d[14]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 rounded-lg p-0.5 shadow-lg",style:{filter:"drop-shadow(0 10px 25px rgba(0, 144, 247, 0.3)) drop-shadow(0 4px 6px rgba(186, 98, 252, 0.2)) drop-shadow(0 1px 3px rgba(242, 65, 107, 0.2)) drop-shadow(0 0 0 rgba(245, 86, 0, 0.1))"}},[e("div",{class:"bg-white rounded-lg h-full w-full"})],-1)),e("button",{onClick:I,class:S(["relative z-10 w-full px-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200 flex items-center justify-center gap-2",$.value?"bg-blue-100 text-blue-800 border border-blue-300":"bg-white text-gray-600 hover:text-gray-800"])},[d[12]||(d[12]=e("i",{class:"pi pi-user-check"},null,-1)),e("span",Br,h(_.value.available),1),d[13]||(d[13]=e("span",{class:"sm:hidden"},"👤",-1))],2)])]),e("div",Ur,[e("div",Vr,[d[17]||(d[17]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 rounded-lg p-0.5 shadow-lg",style:{filter:"drop-shadow(0 10px 25px rgba(0, 144, 247, 0.3)) drop-shadow(0 4px 6px rgba(186, 98, 252, 0.2)) drop-shadow(0 1px 3px rgba(242, 65, 107, 0.2)) drop-shadow(0 0 0 rgba(245, 86, 0, 0.1))"}},[e("div",{class:"bg-white rounded-lg h-full w-full"})],-1)),e("div",Rr,[e("button",{onClick:d[1]||(d[1]=j=>f.value="card"),class:S(["px-2 sm:px-3 py-2 rounded-md text-sm font-medium transition-all duration-200",f.value==="card"?"bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 text-white shadow-sm":"text-gray-500 hover:text-gray-700"])},d[15]||(d[15]=[e("i",{class:"pi pi-th-large sm:mr-2"},null,-1),e("span",{class:"hidden sm:inline"},"Card",-1)]),2),e("button",{onClick:d[2]||(d[2]=j=>f.value="table"),class:S(["px-2 sm:px-3 py-2 rounded-md text-sm font-medium transition-all duration-200",f.value==="table"?"bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 text-white shadow-sm":"text-gray-500 hover:text-gray-700"])},d[16]||(d[16]=[e("i",{class:"pi pi-table sm:mr-2"},null,-1),e("span",{class:"hidden sm:inline"},"Table",-1)]),2)])])])])]),e("div",Dr,[e("div",qr,[d[20]||(d[20]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 rounded-lg p-0.5 shadow-lg",style:{filter:"drop-shadow(0 10px 25px rgba(0, 144, 247, 0.3)) drop-shadow(0 4px 6px rgba(186, 98, 252, 0.2)) drop-shadow(0 1px 3px rgba(242, 65, 107, 0.2)) drop-shadow(0 0 0 rgba(245, 86, 0, 0.1))"}},[e("div",{class:"bg-white rounded-lg h-full w-full"})],-1)),e("div",Er,[e("div",Tr,[ue(e("input",{"onUpdate:modelValue":d[3]||(d[3]=j=>b.value=j),type:"text",placeholder:"Search items...",class:"w-full pl-10 pr-4 py-2.5 bg-white border-0 rounded-lg text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-0"},null,512),[[ce,b.value]]),d[19]||(d[19]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("i",{class:"pi pi-search text-gray-400"})],-1)),b.value?(s(),r("button",{key:0,onClick:w,class:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600"},d[18]||(d[18]=[e("i",{class:"pi pi-times"},null,-1)]))):F("",!0)])])]),e("div",Pr,[e("div",Wr,[d[22]||(d[22]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 rounded-lg p-0.5 shadow-lg",style:{filter:"drop-shadow(0 10px 25px rgba(0, 144, 247, 0.3)) drop-shadow(0 4px 6px rgba(186, 98, 252, 0.2)) drop-shadow(0 1px 3px rgba(242, 65, 107, 0.2)) drop-shadow(0 0 0 rgba(245, 86, 0, 0.1))"}},[e("div",{class:"bg-white rounded-lg h-full w-full"})],-1)),e("button",{onClick:v,class:S(["relative z-10 px-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200 flex items-center gap-2",y.value?"bg-green-100 text-green-800 border border-green-300":"bg-white text-gray-600 hover:text-gray-800"])},[d[21]||(d[21]=e("i",{class:"pi pi-check-circle"},null,-1)),e("span",null,h(_.value.verified),1)],2)]),e("div",Hr,[d[24]||(d[24]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 rounded-lg p-0.5 shadow-lg",style:{filter:"drop-shadow(0 10px 25px rgba(0, 144, 247, 0.3)) drop-shadow(0 4px 6px rgba(186, 98, 252, 0.2)) drop-shadow(0 1px 3px rgba(242, 65, 107, 0.2)) drop-shadow(0 0 0 rgba(245, 86, 0, 0.1))"}},[e("div",{class:"bg-white rounded-lg h-full w-full"})],-1)),e("button",{onClick:I,class:S(["relative z-10 px-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200 flex items-center gap-2",$.value?"bg-blue-100 text-blue-800 border border-blue-300":"bg-white text-gray-600 hover:text-gray-800"])},[d[23]||(d[23]=e("i",{class:"pi pi-user-check"},null,-1)),e("span",null,h(_.value.available),1)],2)])]),e("div",Gr,[e("div",Jr,[d[27]||(d[27]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 rounded-lg p-0.5 shadow-lg",style:{filter:"drop-shadow(0 10px 25px rgba(0, 144, 247, 0.3)) drop-shadow(0 4px 6px rgba(186, 98, 252, 0.2)) drop-shadow(0 1px 3px rgba(242, 65, 107, 0.2)) drop-shadow(0 0 0 rgba(245, 86, 0, 0.1))"}},[e("div",{class:"bg-white rounded-lg h-full w-full"})],-1)),e("div",Kr,[e("button",{onClick:d[4]||(d[4]=j=>f.value="card"),class:S(["px-3 py-2 rounded-md text-sm font-medium transition-all duration-200",f.value==="card"?"bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 text-white shadow-sm":"text-gray-500 hover:text-gray-700"])},d[25]||(d[25]=[e("i",{class:"pi pi-th-large mr-2"},null,-1),Y(" Card View ",-1)]),2),e("button",{onClick:d[5]||(d[5]=j=>f.value="table"),class:S(["px-3 py-2 rounded-md text-sm font-medium transition-all duration-200",f.value==="table"?"bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 text-white shadow-sm":"text-gray-500 hover:text-gray-700"])},d[26]||(d[26]=[e("i",{class:"pi pi-table mr-2"},null,-1),Y(" Table View ",-1)]),2)])])])]),f.value==="card"?(s(),r("div",Qr,[z.value.length>0?(s(),r("div",Xr,[(s(!0),r(k,null,C(z.value,j=>(s(),R(js,{key:j.id,item:j,schema:a.schema,editRoute:q(g).params.databaseId?`/db/${q(g).params.databaseId}/edit`:"/edit",onDeleteItem:H},null,8,["item","schema","editRoute"]))),128)),a.loadingMore?(s(),R(pe,{key:0,count:3,class:"contents"})):F("",!0)])):(s(),R(le,{key:1,onAddItem:W}))])):f.value==="table"?(s(),r("div",Yr,[z.value.length>0?(s(),R(br,{key:0,items:z.value,schema:a.schema,editRoute:q(g).params.databaseId?`/db/${q(g).params.databaseId}/edit`:"/edit",onDeleteItem:H},null,8,["items","schema","editRoute"])):(s(),R(le,{key:1,onAddItem:W}))])):F("",!0)])):!a.schema&&!a.loading?(s(),R(le,{key:2,onAddItem:W})):F("",!0),a.hasMore&&!a.loading?(s(),R(Oe,{key:3,loading:a.loadingMore,onLoadMore:V.loadMore},null,8,["loading","onLoadMore"])):F("",!0)]))}},rl={__name:"DbListView",setup(a){const m=me(),c=D(!0),g=D(!1),f=D([]),b=D(null),y=D(!1),$=D(null),A=D("");async function E(w){c.value=!0,A.value="";try{const v=await X.getDatabaseInfo(w);b.value=v?.schema||null;const I=await X.getAllItems({pageSize:50,databaseId:w});f.value=I.results||I.items||I||[],y.value=!!(I&&(I.has_more||I.hasMore)),$.value=I&&(I.next_cursor||I.nextCursor)||null}catch(v){A.value=v.message||"Failed to load database "}finally{c.value=!1}}async function _(){if(!(!y.value||g.value)){g.value=!0;try{const w=m.params.databaseId,v=await X.getAllItems({pageSize:50,startCursor:$.value,databaseId:w,useCache:!1}),I=v.results||v.items||[];f.value=f.value.concat(I),y.value=!!(v&&(v.has_more||v.hasMore)),$.value=v&&(v.next_cursor||v.nextCursor)||null}catch(w){A.value=w.message||"Failed to load more"}finally{g.value=!1}}}async function z(w){try{const v=m.params.databaseId;await X.deleteItem(w,v),f.value=f.value.filter(I=>I.id!==w)}catch(v){A.value=v.message||"Failed to delete item"}}return _e(()=>{const w=m.params.databaseId;E(w)}),fe(()=>m.params.databaseId,(w,v)=>{w&&w!==v&&(f.value=[],b.value=null,y.value=!1,$.value=null,E(w))}),(w,v)=>(s(),r(k,null,[P(Zr,{loading:c.value,loadingMore:g.value,items:f.value,schema:b.value,hasMore:y.value,onLoadMore:_,onDeleteItem:z},null,8,["loading","loadingMore","items","schema","hasMore"]),A.value?(s(),R(je,{key:0,error:A.value,class:"mt-4"},null,8,["error"])):F("",!0)],64))}};export{rl as default};
