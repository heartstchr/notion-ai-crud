import{g as J,a as ee,b as te,N as se,f as re,c as le,_ as G,u as ae}from"./LoadingSkeleton-DFnSR5vn.js";import{a as B,u as ne,b as ie}from"./vendor-primevue-Bo0b_ULt.js";import{Q as E,c as r,d as t,s as x,e as s,t as p,z as S,q,h as R,y as _,F as $,E as w,G as oe,v as I,L as T,p as k,x as ce,r as M,o as de}from"./vendor-vue-Bq-k71LZ.js";import{_ as ue}from"./index-CCdwwSZW.js";const me={class:"text-center space-y-4"},fe={key:0,class:"space-y-2"},pe={key:1,class:"text-4xl font-bold text-gray-900"},ge={key:2,class:"space-y-2"},he={key:3,class:"text-lg text-gray-600 max-w-2xl mx-auto"},be={class:"flex justify-end gap-4 flex-wrap"},xe={__name:"HeaderView",props:{loading:{type:Boolean,default:!1},databaseTitle:{type:String,default:""},databaseDescription:{type:String,default:""}},emits:["refreshSchema"],setup(e,{emit:a}){const l=E(),u=a,o=()=>{u("refreshSchema")},b=()=>{l.push("/add")};return(h,f)=>{const C=B;return t(),r("div",me,[e.loading&&!e.databaseTitle?(t(),r("div",fe,f[0]||(f[0]=[s("div",{class:"h-12 bg-gray-200 rounded-lg animate-pulse mx-auto",style:{width:"300px"}},null,-1)]))):(t(),r("h1",pe,p(e.databaseTitle),1)),e.loading&&!e.databaseDescription?(t(),r("div",ge,f[1]||(f[1]=[s("div",{class:"h-6 bg-gray-200 rounded-lg animate-pulse mx-auto",style:{width:"500px"}},null,-1),s("div",{class:"h-6 bg-gray-200 rounded-lg animate-pulse mx-auto",style:{width:"400px"}},null,-1)]))):e.databaseDescription?(t(),r("p",he,p(e.databaseDescription),1)):x("",!0),s("div",be,[S(C,{onClick:o,disabled:e.loading,severity:"secondary"},{default:q(()=>f[2]||(f[2]=[s("i",{class:"pi pi-refresh"},null,-1),R("Refresh ",-1)])),_:1,__:[2]},8,["disabled"]),S(C,{onClick:b,severity:"primary"},{default:q(()=>f[3]||(f[3]=[s("i",{class:"pi pi-plus"},null,-1),R("Add ",-1)])),_:1,__:[3]})])])}}},ye={key:0,class:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-start gap-3"},_e={class:"flex-1"},ve={class:"text-red-700"},Fe={__name:"ErrorDisplay",props:{error:{type:String,default:""}},emits:["retry"],setup(e){return(a,l)=>{const u=B;return e.error?(t(),r("div",ye,[l[2]||(l[2]=s("i",{class:"pi pi-exclamation-triangle text-red-500 text-xl"},null,-1)),s("div",_e,[l[1]||(l[1]=s("strong",{class:"text-red-800"},"Error:",-1)),s("span",ve,p(e.error),1),S(u,{onClick:a.retry,severity:"danger",text:""},{default:q(()=>l[0]||(l[0]=[R(" Try Again ",-1)])),_:1,__:[0]},8,["onClick"])])])):x("",!0)}}},$e={class:"text-center"},we={key:0},Se={key:1},je={__name:"LoadMoreButton",props:{loading:{type:Boolean,default:!1}},emits:["load-more"],setup(e){return(a,l)=>{const u=B;return t(),r("div",$e,[S(u,{onClick:l[0]||(l[0]=o=>a.$emit("load-more")),disabled:e.loading,severity:"secondary"},{default:q(()=>[e.loading?(t(),r("span",we,"Loading...")):(t(),r("span",Se,"Load More"))]),_:1},8,["disabled"])])}}},Ce={class:"text-gray-800 leading-relaxed"},ke={__name:"RichTextField",props:{value:{type:Object,required:!0}},setup(e){const a=e,l=_(()=>Array.isArray(a.value)?a.value:a.value&&typeof a.value=="object"?a.value.rich_text||a.value.title||[]:typeof a.value=="string"?[{text:{content:a.value},annotations:{}}]:[]),u=o=>{if(!o)return{};const b={};return o.italic&&(b.fontStyle="italic"),o.underline&&(b.textDecoration="underline"),o.strikethrough&&(b.textDecoration="line-through"),o.code&&(b.fontFamily="monospace",b.backgroundColor="#f3f4f6",b.padding="2px 4px",b.borderRadius="4px"),b};return(o,b)=>(t(),r("div",Ce,[(t(!0),r($,null,w(l.value,(h,f)=>(t(),r("span",{key:f,class:I(h.annotations?.bold?"font-semibold":""),style:oe(u(h.annotations))},p(h.text?.content||h.plain_text||""),7))),128))]))}},Ie={class:"grid grid-cols-2 gap-4"},Le={key:0,class:"flex items-center space-x-2"},Ne={class:"text-gray-800"},De={key:1,class:"flex items-center space-x-2"},Oe={class:"text-gray-800"},qe={__name:"ContactField",props:{value:{type:Object,required:!0}},setup(e){return(a,l)=>(t(),r("div",Ie,[e.value?.email?(t(),r("div",Le,[l[0]||(l[0]=s("i",{class:"pi pi-envelope text-blue-500"},null,-1)),s("span",Ne,p(e.value.email),1)])):x("",!0),e.value?.phone?(t(),r("div",De,[l[1]||(l[1]=s("i",{class:"pi pi-phone text-green-500"},null,-1)),s("span",Oe,p(e.value.phone),1)])):x("",!0)]))}},Be={class:"space-y-3"},Ae={class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},Me={class:"text-sm font-medium text-gray-700"},Re={class:"flex items-center space-x-2"},Te={class:"text-gray-800 font-mono font-medium"},Ue={key:0,class:"text-lg text-gray-600 font-medium"},Ve={__name:"NumbersField",props:{value:{type:Object,required:!0},schema:{type:Object,default:null},formatLabel:{type:Function,required:!0},formatNumber:{type:Function,required:!0},getSchemaProperty:{type:Function,required:!0},getFieldCurrencySymbol:{type:Function,required:!0}},setup(e){return(a,l)=>(t(),r("div",Be,[s("div",Ae,[(t(!0),r($,null,w(e.value,(u,o)=>(t(),r("div",{key:o,class:"flex items-center justify-start bg-gray-50 rounded-lg gap-2 p-2"},[s("i",{class:I([T(J)(o,e.getSchemaProperty(o)),"text-blue-500"])},null,2),s("span",Me,p(e.formatLabel(o)),1),s("div",Re,[s("span",Te,p(e.formatNumber(u||0,o)),1),e.getFieldCurrencySymbol(o)?(t(),r("span",Ue,p(e.getFieldCurrencySymbol(o)),1)):x("",!0)])]))),128))])]))}},ze={class:"flex items-center space-x-2"},Pe=["href"],Ee={__name:"UrlField",props:{value:{type:Object,required:!0}},setup(e){const a=l=>{try{const u=new URL(l);return u.hostname+u.pathname}catch{return l}};return(l,u)=>(t(),r("div",ze,[u[0]||(u[0]=s("i",{class:"pi pi-link text-purple-500"},null,-1)),s("a",{href:e.value.url,target:"_blank",rel:"noopener noreferrer",class:"text-purple-600 hover:text-purple-800 underline truncate max-w-xs"},p(a(e.value.url)),9,Pe)]))}},He={class:"flex items-center space-x-2"},Ge={class:"text-gray-800"},Qe={__name:"DateField",props:{value:{type:Object,required:!0}},setup(e){const a=l=>l?new Date(l).toLocaleDateString():"";return(l,u)=>(t(),r("div",He,[u[0]||(u[0]=s("i",{class:"pi pi-calendar text-indigo-500"},null,-1)),s("span",Ge,p(a(e.value.date?.start||e.value.date)),1)]))}},We={class:"flex flex-wrap gap-2"},Je={__name:"SelectField",props:{value:{type:[Object,Array],required:!0},fieldName:{type:String,required:!0},schema:{type:Object,default:null}},setup(e){const a=e,l=_(()=>({name:a.fieldName,options:o(a.fieldName,a.schema)})),u=_(()=>ee(a.value)),o=(b,h)=>!h||!h.properties||!h.properties[b]?[]:h.properties[b].options||[];return(b,h)=>(t(),r("div",We,[(t(!0),r($,null,w(u.value,f=>(t(),r("span",{key:f.value||f,class:I([T(te)(f,l.value,e.schema),"px-3 py-1.5 text-sm rounded-full border font-medium"])},p(f.label||f),3))),128))]))}},Ke={class:"flex items-center gap-2"},Xe={key:0,class:"flex items-center gap-1 bg-green-500 text-white px-2 py-1 rounded-full text-sm"},Ye={class:"font-medium"},Ze={key:1,class:"flex items-center gap-1 bg-gray-200 text-gray-600 px-2 py-1 rounded-full text-sm"},et={class:"font-medium"},Q={__name:"BooleanField",props:{value:{type:Boolean,required:!0},fieldName:{type:String,required:!0},formatLabel:{type:Function,required:!0}},setup(e){return(a,l)=>(t(),r("div",Ke,[e.value?(t(),r("div",Xe,[l[0]||(l[0]=s("i",{class:"pi pi-check-circle"},null,-1)),s("span",Ye,p(e.formatLabel(e.fieldName)),1)])):(t(),r("div",Ze,[l[1]||(l[1]=s("i",{class:"pi pi-times-circle"},null,-1)),s("span",et,p(e.formatLabel(e.fieldName)),1)]))]))}},tt={class:"text-gray-800 leading-relaxed"},W={__name:"TextField",props:{value:{type:[String,Number],required:!0}},setup(e){return(a,l)=>(t(),r("div",tt,p(e.value),1))}},st={key:0,class:"bg-white hover:shadow-lg text-gray-900 transition-shadow p-4 border-2 border-black rounded-lg shadow-lg flex flex-col h-full"},rt={class:"flex justify-end items-start mb-3"},lt={class:"flex gap-2"},at={key:0,class:"mb-4 flex md:flex-row flex-col gap-2"},nt={class:"flex justify-center mb-4"},it={class:"text-2xl font-bold text-gray-900"},ot={key:0,class:"mb-4 ml-4"},ct={class:"flex flex-wrap gap-2"},dt={key:1,class:"mb-4"},ut={class:"grid grid-cols-1 sm:grid-cols-2 gap-1"},mt={class:"flex items-center space-x-1"},ft={class:"flex items-center space-x-1"},pt=["title"],gt={key:2,class:"mb-4"},ht={class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},bt={class:"flex items-center space-x-1"},xt=["title"],yt={class:"flex items-center space-x-1"},_t={class:"text-gray-800 font-mono font-medium"},vt={key:3,class:"mb-4"},Ft={class:"gap-3"},$t={class:"flex items-center justify-between"},wt={class:"flex items-center space-x-2"},St=["title"],jt={class:"text-gray-800 font-mono font-medium text-lg"},Ct={key:4,class:"mb-4"},kt={class:"gap-3"},It={class:"flex items-center space-x-2"},Lt=["title"],Nt={class:"flex items-center space-x-2"},Dt=["href","title"],Ot={class:"space-y-3 flex-1"},qt={key:0,class:"text-sm font-medium text-gray-700 mb-2"},Bt={key:0,class:"mr-2 text-base"},At=["title"],Mt={class:"text-xs text-gray-500 mt-auto pt-2 border-t border-gray-100 flex flex-row justify-end"},Rt={key:0},Tt={__name:"CardView",props:{item:{type:Object,required:!0},schema:{type:Object,default:null},loading:{type:Boolean,default:!1},editRoute:{type:String,default:"/edit"},itemIdField:{type:String,default:"id"}},emits:["deleteItem"],setup(e,{emit:a}){const l=E(),u=ne(),o=e,b=a,h=_(()=>{if(!o.schema?.properties||!o.item)return{titleFields:[],contactFields:[],booleanFields:[],currencyNumberFields:[],regularNumberFields:[],urlFields:[],otherFields:[]};const d=o.schema.properties,n=o.item,c={titleFields:[],contactFields:[],booleanFields:[],currencyNumberFields:[],regularNumberFields:[],urlFields:[],otherFields:[]};return Object.entries(d).forEach(([i,m])=>{const j=n[i];if(!(!j&&m.type!=="checkbox"))switch(m.type){case"title":c.titleFields.push([i,j]);break;case"checkbox":c.booleanFields.push([i,j||!1]);break;case"number":m.number?.format&&m.number.format!=="number"?c.currencyNumberFields.push([i,j||0]):c.regularNumberFields.push([i,j||0]);break;case"url":c.urlFields.push([i,j]);break;default:i.toLowerCase().includes("email")||i.toLowerCase().includes("phone")||i.toLowerCase().includes("contact")||m.type==="email"||m.type==="phone"?c.contactFields.push([i,j]):m.type!=="title"&&m.type!=="number"&&m.type!=="checkbox"&&m.type!=="url"&&c.otherFields.push([i,m])}}),c}),f=_(()=>h.value.titleFields),C=_(()=>h.value.contactFields),L=_(()=>h.value.booleanFields),N=_(()=>h.value.currencyNumberFields),D=_(()=>h.value.regularNumberFields),A=_(()=>h.value.urlFields),U=_(()=>h.value.otherFields),V=d=>{if(d==="contact")return qe;if(d==="numbers")return Ve;const n=o.schema?.properties?.[d];if(!n)return W;switch(n.type){case"rich_text":return ke;case"url":return Ee;case"date":return Qe;case"select":case"multi_select":return Je;case"checkbox":return Q;default:return W}},z=d=>d!=="contact"&&d!=="numbers",g=()=>{const d=o.item[o.itemIdField];l.push(`${o.editRoute}/${d}`)},y=()=>{const d=o.item[o.itemIdField],n=f.value.length>0?f.value[0][1]:"this item";u.require({message:`Are you sure you want to delete "${n}"?`,header:"Confirm Deletion",icon:"pi pi-exclamation-triangle",acceptClass:"p-button-danger",accept:()=>{b("deleteItem",d)},reject:()=>{}})},v=d=>se.formatLabel(d),F=d=>d?new Date(d).toLocaleDateString():"",O=d=>o.schema?.properties?.[d]||null,K=(d,n)=>{const c=d.toLowerCase();return c.includes("email")||n?.type==="email"?"pi pi-envelope text-blue-500":c.includes("phone")||c.includes("mobile")||n?.type==="phone"?"pi pi-phone text-green-500":c.includes("linkedin")||c.includes("social")?"pi pi-linkedin text-blue-600":c.includes("website")||c.includes("url")?"pi pi-globe text-purple-500":c.includes("address")||c.includes("location")?"pi pi-map-marker text-red-500":"pi pi-user text-gray-500"},X=d=>{const n=O(d);if(!n||n.type!=="number"||!n.number?.format)return null;const c=le(n.number.format);return c||{dollar:"$",euro:"â‚¬",pound:"Â£",yen:"Â¥",rupee:"â‚¹",yuan:"Â¥",percent:"%"}[n.number.format]||n.number.format.toUpperCase()},P=(d,n=null)=>{if(typeof d!="number")return d;const c=n?O(n):null;return c?re(d,c):d.toLocaleString()},Y=()=>{if(f.value.length>0){const n=f.value[0][1];if(n&&typeof n=="string"){const c=n.trim().split(/\s+/);if(c.length>=2)return`${c[0][0]}${c[c.length-1][0]}`.toUpperCase();if(c.length===1)return c[0][0].toUpperCase()}}const d=Object.values(o.item).find(n=>n&&typeof n=="string"&&n.trim().length>0);return d?d.trim()[0].toUpperCase():"?"},Z=()=>{if(o.schema?.properties){const d=Object.entries(o.schema.properties).find(([n,c])=>c.type==="url"&&(n.toLowerCase().includes("image")||n.toLowerCase().includes("photo")||n.toLowerCase().includes("avatar")||n.toLowerCase().includes("picture")));if(d){const n=o.item[d[0]];if(n&&typeof n=="object"&&n.url)return n.url;if(typeof n=="string"&&n.trim())return n.trim()}}return null};return(d,n)=>{const c=B;return e.item&&Object.keys(e.item).length>0?(t(),r("div",st,[s("div",rt,[s("div",lt,[S(c,{onClick:g,severity:"primary",icon:"pi pi-pencil",size:"small"}),S(c,{onClick:y,severity:"danger",icon:"pi pi-trash",size:"small",class:"!w-10 !h-10 !p-0 !min-w-0 !min-h-0"})])]),f.value.length>0?(t(),r("div",at,[s("div",nt,[S(T(ie),{label:Y(),image:Z(),size:"xlarge",shape:"circle",class:"border-2 border-gray-200 shadow-md bg-gray-100 p-2"},null,8,["label","image"])]),(t(!0),r($,null,w(f.value,([i,m])=>(t(),r("div",{key:i,class:"flex flex-col justify-start gap-3 mb-2 ml-4"},[s("h2",it,p(m),1),L.value.length>0?(t(),r("div",ot,[s("div",ct,[(t(!0),r($,null,w(L.value,([j,H])=>(t(),k(Q,{key:j,value:H,"field-name":j,"format-label":v},null,8,["value","field-name"]))),128))])])):x("",!0)]))),128))])):x("",!0),C.value.length>0?(t(),r("div",dt,[s("div",ut,[(t(!0),r($,null,w(C.value,([i,m])=>(t(),r("div",{key:i,class:"flex items-center justify-start bg-blue-50 rounded-lg p-1 gap-1"},[s("div",mt,[s("i",{class:I(K(i,O(i)))},null,2)]),s("div",ft,[s("span",{class:"text-gray-800 font-medium text-sm truncate max-w-32",title:m||"Not provided"},p(m||"Not provided"),9,pt)])]))),128))])])):x("",!0),N.value.length>0?(t(),r("div",gt,[s("div",ht,[(t(!0),r($,null,w(N.value,([i,m])=>(t(),r("div",{key:i,class:"flex flex-col items-center justify-between bg-green-50 rounded-lg p-1 border border-green-200"},[s("div",bt,[s("span",{class:"text-sm font-medium text-gray-700 truncate max-w-24",title:v(i)},p(v(i)),9,xt)]),s("div",yt,[s("span",_t,p(P(m||0,i)),1)])]))),128))])])):x("",!0),D.value.length>0?(t(),r("div",vt,[s("div",Ft,[(t(!0),r($,null,w(D.value,([i,m])=>(t(),r("div",{key:i,class:"flex-col items-center justify-between bg-gray-50 rounded-lg p-3"},[s("div",$t,[s("div",wt,[s("i",{class:I([T(J)(i,O(i)),"text-blue-500"])},null,2),s("span",{class:"text-sm font-medium text-gray-700",title:v(i)},p(v(i)),9,St)]),s("span",jt,p(P(m||0,i)),1)])]))),128))])])):x("",!0),A.value.length>0?(t(),r("div",Ct,[s("div",kt,[(t(!0),r($,null,w(A.value,([i,m])=>(t(),r("div",{key:i,class:"flex-col items-center justify-between bg-purple-50 rounded-lg p-3 border border-purple-200"},[s("div",It,[n[0]||(n[0]=s("i",{class:"pi pi-link text-purple-600"},null,-1)),s("span",{class:"text-sm font-medium text-gray-700",title:v(i)},p(v(i)),9,Lt)]),s("div",Nt,[s("a",{href:m,target:"_blank",rel:"noopener noreferrer",class:"text-purple-600 hover:text-purple-800 underline",title:m},p(m||"No URL"),9,Dt)])]))),128))])])):x("",!0),s("div",Ot,[(t(!0),r($,null,w(U.value,([i,m])=>(t(),r("div",{key:i,class:"space-y-1 pt-2 border-b border-gray-100 last:border-b-0"},[z(i)?(t(),r("div",qt,[m?.emoji?(t(),r("span",Bt,p(m.emoji),1)):m?.icon?(t(),r("i",{key:1,class:I([m.icon,"mr-2 text-gray-500"])},null,2)):x("",!0),s("span",{class:"truncate max-w-32",title:v(i)},p(v(i)),9,At)])):x("",!0),(t(),k(ce(V(i)),{value:e.item[i],"field-name":i,schema:e.schema,"format-label":v,"format-number":P,"get-schema-property":O,"get-field-currency-symbol":X},null,8,["value","field-name","schema"]))]))),128))]),s("div",Mt,[s("span",null,"Added: "+p(F(e.item.created_time)),1),e.item.last_edited_time!==e.item.created_time?(t(),r("span",Rt," â€¢ Updated: "+p(F(e.item.last_edited_time)),1)):x("",!0)])])):x("",!0)}}},Ut={class:"bg-white hover:shadow-lg transition-shadow p-4 border-2 border-black rounded-lg shadow-lg flex flex-col h-full"},Vt={class:"text-center py-16 flex-1 flex flex-col items-center justify-center"},zt={__name:"EmptyState",emits:["add-item"],setup(e){return(a,l)=>{const u=B;return t(),r("div",Ut,[s("div",Vt,[l[2]||(l[2]=s("div",{class:"text-6xl mb-4"},"ðŸ“‹",-1)),l[3]||(l[3]=s("h3",{class:"text-2xl font-semibold text-gray-900 mb-2"},"No items yet",-1)),l[4]||(l[4]=s("p",{class:"text-gray-600 mb-6 text-center max-w-md"},"Start building your collection by adding your first item to get started.",-1)),S(u,{onClick:l[0]||(l[0]=o=>a.$emit("add-item")),severity:"primary"},{default:q(()=>l[1]||(l[1]=[s("i",{class:"pi pi-plus mr-2"},null,-1),R("Add First Item ",-1)])),_:1,__:[1]})])])}}},Pt={class:"space-y-6"},Et={key:1,class:"space-y-6"},Ht={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Gt={__name:"ListView",props:{loading:{type:Boolean,default:!1},loadingMore:{type:Boolean,default:!1},items:{type:Array,default:()=>[]},schema:{type:Object,default:null},hasMore:{type:Boolean,default:!1}},emits:["deleteItem","loadMore"],setup(e){const a=E(),l=()=>{a.push("/add")};return(u,o)=>(t(),r("div",Pt,[e.loading?(t(),k(G,{key:0,count:6,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"})):(t(),r("div",Et,[e.schema?(t(),r("div",Ht,[(t(!0),r($,null,w(e.items,b=>(t(),k(Tt,{key:b.id,item:b,schema:e.schema,onDeleteItem:u.deleteItem},null,8,["item","schema","onDeleteItem"]))),128)),!e.loading&&e.items.length===0?(t(),k(zt,{key:0,onAddItem:l})):x("",!0),e.loadingMore?(t(),k(G,{key:1,count:3,class:"contents"})):x("",!0)])):x("",!0)])),e.hasMore&&!e.loading?(t(),k(je,{key:2,loading:e.loadingMore,onLoadMore:u.loadMore},null,8,["loading","onLoadMore"])):x("",!0)]))}},Qt={class:"home-view"},Wt={class:"space-y-8"},Jt={__name:"HomeView",setup(e){const a=ae(),l=_(()=>a.loading),u=_(()=>a.error),o=_(()=>a.items),b=_(()=>{if(!a.schema?.properties)return null;const y=a.getDatabaseInfo()?.schema?.properties||{};return{...a.schema,properties:Object.fromEntries(Object.entries(a.schema.properties).map(([v,F])=>[v,{...F,type:F.type,required:F.required||!1,emoji:F.emoji||null,icon:F.icon||null,number:F.number||null,select:F.select||null,multi_select:F.multi_select||null,...y[v]&&{number:{...F.number,format:y[v].number?.format||F.number?.format}}}]))}}),h=M(!1),f=M(""),C=M(""),L=M(!1),N=async()=>{try{const[g,y]=await Promise.allSettled([a.ensureSchemaLoaded(),a.fetchAllItems()]);g.status==="rejected"&&console.error("Schema loading failed:",g.reason),y.status==="rejected"&&console.error("Items loading failed:",y.reason),g.status==="fulfilled"&&y.status==="fulfilled"&&D()}catch(g){console.error("Failed to initialize:",g)}},D=()=>{const g=a.getDatabaseInfo();g&&(g.title&&(f.value=g.title),g.description&&(C.value=g.description))},A=async()=>{try{const[g,y]=await Promise.allSettled([a.fetchSchema(!0),a.fetchAllItems()]);g.status==="fulfilled"&&y.status==="fulfilled"?D():(console.error("Schema refresh failed:",g.status==="rejected"?g.reason:"Unknown error"),console.error("Items refresh failed:",y.status==="rejected"?y.reason:"Unknown error"))}catch(g){console.error("Failed to refresh schema:",g)}},U=async()=>{if(!(!L.value||h.value))try{h.value=!0}catch(g){console.error("Failed to load more:",g)}finally{h.value=!1}},V=async()=>{await N()},z=async g=>{try{await a.deleteItem(g),await a.fetchAllItems()}catch(y){console.error("Failed to delete item:",y)}};return de(()=>{N()}),(g,y)=>(t(),r("div",Qt,[s("div",Wt,[S(xe,{loading:l.value,"database-title":f.value,"database-description":C.value,onRefreshSchema:A},null,8,["loading","database-title","database-description"]),S(Fe,{error:u.value,onRetry:V},null,8,["error"]),S(Gt,{loading:l.value,"loading-more":h.value,items:o.value,schema:b.value,"has-more":L.value,onDeleteItem:z,onLoadMore:U},null,8,["loading","loading-more","items","schema","has-more"])])]))}},es=ue(Jt,[["__scopeId","data-v-5925e735"]]);export{es as default};
