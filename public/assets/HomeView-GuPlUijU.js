import{g as Q,a as Y,b as Z,N as ee,f as te,c as se,_ as E,u as re}from"./LoadingSkeleton-BfQSGWkT.js";import{s as q,a as le}from"./vendor-primevue-DIj4JoDf.js";import{P as z,c as r,d as t,s as _,e as s,t as p,z as $,q as O,h as B,Q as v,F,B as w,C as ae,v as I,K as R,p as C,x as ne,r as A,o as oe}from"./vendor-vue-CPcLwXa2.js";import{_ as ie}from"./index-DpgkslQk.js";const ce={class:"text-center space-y-4"},de={key:0,class:"space-y-2"},ue={key:1,class:"text-4xl font-bold text-gray-900"},me={key:2,class:"space-y-2"},pe={key:3,class:"text-lg text-gray-600 max-w-2xl mx-auto"},fe={class:"flex justify-end gap-4 flex-wrap"},ge={__name:"HeaderView",props:{loading:{type:Boolean,default:!1},databaseTitle:{type:String,default:""},databaseDescription:{type:String,default:""}},emits:["refreshSchema"],setup(e,{emit:a}){const l=z(),o=a,f=()=>{o("refreshSchema")},m=()=>{l.push("/add")};return(x,b)=>{const S=q;return t(),r("div",ce,[e.loading&&!e.databaseTitle?(t(),r("div",de,b[0]||(b[0]=[s("div",{class:"h-12 bg-gray-200 rounded-lg animate-pulse mx-auto",style:{width:"300px"}},null,-1)]))):(t(),r("h1",ue,p(e.databaseTitle),1)),e.loading&&!e.databaseDescription?(t(),r("div",me,b[1]||(b[1]=[s("div",{class:"h-6 bg-gray-200 rounded-lg animate-pulse mx-auto",style:{width:"500px"}},null,-1),s("div",{class:"h-6 bg-gray-200 rounded-lg animate-pulse mx-auto",style:{width:"400px"}},null,-1)]))):e.databaseDescription?(t(),r("p",pe,p(e.databaseDescription),1)):_("",!0),s("div",fe,[$(S,{onClick:f,disabled:e.loading,class:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed !transition-all !duration-300 hover:!scale-105 hover:!-translate-y-0.5 hover:!shadow-[0_20px_40px_rgba(34,197,94,0.3),0_0_20px_rgba(34,197,94,0.2)]",severity:"secondary"},{default:O(()=>b[2]||(b[2]=[s("i",{class:"pi pi-refresh mr-2"},null,-1),B("Refresh ",-1)])),_:1,__:[2]},8,["disabled"]),$(S,{onClick:m,class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 !transition-all !duration-300 hover:!scale-105 hover:!-translate-y-0.5 hover:!shadow-[0_20px_40px_rgba(34,197,94,0.3),0_0_20px_rgba(34,197,94,0.2)]"},{default:O(()=>b[3]||(b[3]=[s("i",{class:"pi pi-plus mr-2"},null,-1),B("Add ",-1)])),_:1,__:[3]})])])}}},he={key:0,class:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-start gap-3"},be={class:"flex-1"},xe={class:"text-red-700"},_e={__name:"ErrorDisplay",props:{error:{type:String,default:""}},emits:["retry"],setup(e){return(a,l)=>{const o=q;return e.error?(t(),r("div",he,[l[2]||(l[2]=s("i",{class:"pi pi-exclamation-triangle text-red-500 text-xl"},null,-1)),s("div",be,[l[1]||(l[1]=s("strong",{class:"text-red-800"},"Error:",-1)),s("span",xe,p(e.error),1),$(o,{onClick:a.retry,class:"ml-2 !p-0 !h-auto !bg-transparent !border-0 text-red-600 hover:text-red-800 underline",text:"",severity:"danger"},{default:O(()=>l[0]||(l[0]=[B(" Try Again ",-1)])),_:1,__:[0]},8,["onClick"])])])):_("",!0)}}},ye={class:"text-center"},ve={key:0},Fe={key:1},we={__name:"LoadMoreButton",props:{loading:{type:Boolean,default:!1}},emits:["load-more"],setup(e){return(a,l)=>{const o=q;return t(),r("div",ye,[$(o,{onClick:l[0]||(l[0]=f=>a.$emit("load-more")),disabled:e.loading,class:"!px-4 !py-2 !bg-gray-200 !text-gray-700 !rounded-lg hover:!bg-gray-300 disabled:!opacity-50 disabled:!cursor-not-allowed !transition-colors",severity:"secondary"},{default:O(()=>[e.loading?(t(),r("span",ve,"Loading...")):(t(),r("span",Fe,"Load More"))]),_:1},8,["disabled"])])}}},$e={class:"text-gray-800 leading-relaxed"},Se={__name:"RichTextField",props:{value:{type:Object,required:!0}},setup(e){const a=e,l=v(()=>Array.isArray(a.value)?a.value:a.value&&typeof a.value=="object"?a.value.rich_text||a.value.title||[]:typeof a.value=="string"?[{text:{content:a.value},annotations:{}}]:[]),o=f=>{if(!f)return{};const m={};return f.italic&&(m.fontStyle="italic"),f.underline&&(m.textDecoration="underline"),f.strikethrough&&(m.textDecoration="line-through"),f.code&&(m.fontFamily="monospace",m.backgroundColor="#f3f4f6",m.padding="2px 4px",m.borderRadius="4px"),m};return(f,m)=>(t(),r("div",$e,[(t(!0),r(F,null,w(l.value,(x,b)=>(t(),r("span",{key:b,class:I(x.annotations?.bold?"font-semibold":""),style:ae(o(x.annotations))},p(x.text?.content||x.plain_text||""),7))),128))]))}},je={class:"grid grid-cols-2 gap-4"},Ce={key:0,class:"flex items-center space-x-2"},ke={class:"text-gray-800"},Ie={key:1,class:"flex items-center space-x-2"},Le={class:"text-gray-800"},De={__name:"ContactField",props:{value:{type:Object,required:!0}},setup(e){return(a,l)=>(t(),r("div",je,[e.value?.email?(t(),r("div",Ce,[l[0]||(l[0]=s("i",{class:"pi pi-envelope text-blue-500"},null,-1)),s("span",ke,p(e.value.email),1)])):_("",!0),e.value?.phone?(t(),r("div",Ie,[l[1]||(l[1]=s("i",{class:"pi pi-phone text-green-500"},null,-1)),s("span",Le,p(e.value.phone),1)])):_("",!0)]))}},Ne={class:"space-y-3"},Oe={class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},Be={class:"text-sm font-medium text-gray-700"},qe={class:"flex items-center space-x-2"},Me={class:"text-gray-800 font-mono font-medium"},Ae={key:0,class:"text-lg text-gray-600 font-medium"},Re={__name:"NumbersField",props:{value:{type:Object,required:!0},schema:{type:Object,default:null},formatLabel:{type:Function,required:!0},formatNumber:{type:Function,required:!0},getSchemaProperty:{type:Function,required:!0},getFieldCurrencySymbol:{type:Function,required:!0}},setup(e){return(a,l)=>(t(),r("div",Ne,[s("div",Oe,[(t(!0),r(F,null,w(e.value,(o,f)=>(t(),r("div",{key:f,class:"flex items-center justify-start bg-gray-50 rounded-lg gap-2 p-2"},[s("i",{class:I([R(Q)(f,e.getSchemaProperty(f)),"text-blue-500"])},null,2),s("span",Be,p(e.formatLabel(f)),1),s("div",qe,[s("span",Me,p(e.formatNumber(o||0,f)),1),e.getFieldCurrencySymbol(f)?(t(),r("span",Ae,p(e.getFieldCurrencySymbol(f)),1)):_("",!0)])]))),128))])]))}},Te={class:"flex items-center space-x-2"},Ue=["href"],Ve={__name:"UrlField",props:{value:{type:Object,required:!0}},setup(e){const a=l=>{try{const o=new URL(l);return o.hostname+o.pathname}catch{return l}};return(l,o)=>(t(),r("div",Te,[o[0]||(o[0]=s("i",{class:"pi pi-link text-purple-500"},null,-1)),s("a",{href:e.value.url,target:"_blank",rel:"noopener noreferrer",class:"text-purple-600 hover:text-purple-800 underline truncate max-w-xs"},p(a(e.value.url)),9,Ue)]))}},Pe={class:"flex items-center space-x-2"},ze={class:"text-gray-800"},Ee={__name:"DateField",props:{value:{type:Object,required:!0}},setup(e){const a=l=>l?new Date(l).toLocaleDateString():"";return(l,o)=>(t(),r("div",Pe,[o[0]||(o[0]=s("i",{class:"pi pi-calendar text-indigo-500"},null,-1)),s("span",ze,p(a(e.value.date?.start||e.value.date)),1)]))}},He={class:"flex flex-wrap gap-2"},Ke={__name:"SelectField",props:{value:{type:[Object,Array],required:!0},fieldName:{type:String,required:!0},schema:{type:Object,default:null}},setup(e){const a=e,l=v(()=>({name:a.fieldName,options:f(a.fieldName,a.schema)})),o=v(()=>Y(a.value)),f=(m,x)=>!x||!x.properties||!x.properties[m]?[]:x.properties[m].options||[];return(m,x)=>(t(),r("div",He,[(t(!0),r(F,null,w(o.value,b=>(t(),r("span",{key:b.value||b,class:I([R(Z)(b,l.value,e.schema),"px-3 py-1.5 text-sm rounded-full border font-medium"])},p(b.label||b),3))),128))]))}},Qe={class:"flex items-center gap-2"},We={key:0,class:"pi pi-check-circle text-green-500 bg-blue-100 p-1 rounded-full"},H={__name:"BooleanField",props:{value:{type:Boolean,required:!0},fieldName:{type:String,required:!0},formatLabel:{type:Function,required:!0}},setup(e){return(a,l)=>(t(),r("div",Qe,[e.value?(t(),r("i",We)):_("",!0)]))}},Ge={class:"text-gray-800 leading-relaxed"},K={__name:"TextField",props:{value:{type:[String,Number],required:!0}},setup(e){return(a,l)=>(t(),r("div",Ge,p(e.value),1))}},Je={key:0,class:"bg-white hover:shadow-lg text-gray-900 transition-shadow p-4 border-2 border-black rounded-lg shadow-lg flex flex-col h-full"},Xe={class:"flex justify-end items-start mb-3"},Ye={class:"flex gap-2"},Ze={key:0,class:"mb-4 flex md:flex-row flex-col gap-2"},et={class:"flex justify-center mb-4"},tt={key:0,class:"mb-4 -ml-4"},st={class:"flex flex-wrap gap-2"},rt={class:"text-2xl font-bold text-gray-900"},lt={key:1,class:"mb-4"},at={class:"grid grid-cols-1 sm:grid-cols-2 gap-1"},nt={class:"flex items-center space-x-1"},ot={class:"flex items-center space-x-1"},it=["title"],ct={key:2,class:"mb-4"},dt={class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},ut={class:"flex items-center space-x-1"},mt=["title"],pt={class:"flex items-center space-x-1"},ft={class:"text-gray-800 font-mono font-medium"},gt={key:3,class:"mb-4"},ht={class:"gap-3"},bt={class:"flex items-center justify-between"},xt={class:"flex items-center space-x-2"},_t=["title"],yt={class:"text-gray-800 font-mono font-medium text-lg"},vt={key:4,class:"mb-4"},Ft={class:"gap-3"},wt={class:"flex items-center space-x-2"},$t=["title"],St={class:"flex items-center space-x-2"},jt=["href","title"],Ct={class:"space-y-3 flex-1"},kt={key:0,class:"text-sm font-medium text-gray-700 mb-2"},It={key:0,class:"mr-2 text-base"},Lt=["title"],Dt={class:"text-xs text-gray-500 mt-auto pt-2 border-t border-gray-100 flex flex-row justify-end"},Nt={key:0},Ot={__name:"CardView",props:{item:{type:Object,required:!0},schema:{type:Object,default:null},loading:{type:Boolean,default:!1},editRoute:{type:String,default:"/edit"},itemIdField:{type:String,default:"id"}},emits:["deleteItem"],setup(e,{emit:a}){const l=z(),o=e,f=a,m=v(()=>{if(!o.schema?.properties||!o.item)return{titleFields:[],contactFields:[],booleanFields:[],currencyNumberFields:[],regularNumberFields:[],urlFields:[],otherFields:[]};const d=o.schema.properties,i=o.item,c={titleFields:[],contactFields:[],booleanFields:[],currencyNumberFields:[],regularNumberFields:[],urlFields:[],otherFields:[]};return Object.entries(d).forEach(([n,u])=>{const j=i[n];if(!(!j&&u.type!=="checkbox"))switch(u.type){case"title":c.titleFields.push([n,j]);break;case"checkbox":c.booleanFields.push([n,j||!1]);break;case"number":u.number?.format&&u.number.format!=="number"?c.currencyNumberFields.push([n,j||0]):c.regularNumberFields.push([n,j||0]);break;case"url":c.urlFields.push([n,j]);break;default:n.toLowerCase().includes("email")||n.toLowerCase().includes("phone")||n.toLowerCase().includes("contact")||u.type==="email"||u.type==="phone"?c.contactFields.push([n,j]):u.type!=="title"&&u.type!=="number"&&u.type!=="checkbox"&&u.type!=="url"&&c.otherFields.push([n,u])}}),c}),x=v(()=>m.value.titleFields),b=v(()=>m.value.contactFields),S=v(()=>m.value.booleanFields),L=v(()=>m.value.currencyNumberFields),D=v(()=>m.value.regularNumberFields),N=v(()=>m.value.urlFields),M=v(()=>m.value.otherFields),T=d=>{if(d==="contact")return De;if(d==="numbers")return Re;const i=o.schema?.properties?.[d];if(!i)return K;switch(i.type){case"rich_text":return Se;case"url":return Ve;case"date":return Ee;case"select":case"multi_select":return Ke;case"checkbox":return H;default:return K}},U=d=>d!=="contact"&&d!=="numbers",V=()=>{const d=o.item[o.itemIdField];l.push(`${o.editRoute}/${d}`)},g=()=>{const d=o.item[o.itemIdField];f("deleteItem",d)},h=d=>ee.formatLabel(d),k=d=>d?new Date(d).toLocaleDateString():"",y=d=>o.schema?.properties?.[d]||null,W=(d,i)=>{const c=d.toLowerCase();return c.includes("email")||i?.type==="email"?"pi pi-envelope text-blue-500":c.includes("phone")||c.includes("mobile")||i?.type==="phone"?"pi pi-phone text-green-500":c.includes("linkedin")||c.includes("social")?"pi pi-linkedin text-blue-600":c.includes("website")||c.includes("url")?"pi pi-globe text-purple-500":c.includes("address")||c.includes("location")?"pi pi-map-marker text-red-500":"pi pi-user text-gray-500"},G=d=>{const i=y(d);if(!i||i.type!=="number"||!i.number?.format)return null;const c=se(i.number.format);return c||{dollar:"$",euro:"â‚¬",pound:"Â£",yen:"Â¥",rupee:"â‚¹",yuan:"Â¥",percent:"%"}[i.number.format]||i.number.format.toUpperCase()},P=(d,i=null)=>{if(typeof d!="number")return d;const c=i?y(i):null;return c?te(d,c):d.toLocaleString()},J=()=>{if(x.value.length>0){const i=x.value[0][1];if(i&&typeof i=="string"){const c=i.trim().split(/\s+/);if(c.length>=2)return`${c[0][0]}${c[c.length-1][0]}`.toUpperCase();if(c.length===1)return c[0][0].toUpperCase()}}const d=Object.values(o.item).find(i=>i&&typeof i=="string"&&i.trim().length>0);return d?d.trim()[0].toUpperCase():"?"},X=()=>{if(o.schema?.properties){const d=Object.entries(o.schema.properties).find(([i,c])=>c.type==="url"&&(i.toLowerCase().includes("image")||i.toLowerCase().includes("photo")||i.toLowerCase().includes("avatar")||i.toLowerCase().includes("picture")));if(d){const i=o.item[d[0]];if(i&&typeof i=="object"&&i.url)return i.url;if(typeof i=="string"&&i.trim())return i.trim()}}return null};return(d,i)=>{const c=q;return e.item&&Object.keys(e.item).length>0?(t(),r("div",Je,[s("div",Xe,[s("div",Ye,[$(c,{onClick:V,class:"w-10 h-10 !p-0 !bg-transparent !border-0 text-gray-600 hover:text-blue-600 hover:bg-blue-50 !transition-all !duration-300 hover:!scale-105 hover:!-translate-y-0.5 hover:!shadow-[0_20px_40px_rgba(34,197,94,0.3),0_0_20px_rgba(34,197,94,0.2)]",icon:"pi pi-pencil",text:"",rounded:"",size:"small"}),$(c,{onClick:g,class:"w-10 h-10 !p-0 !bg-transparent !border-0 text-red-600 hover:bg-red-50 !transition-all !duration-300 hover:!scale-105 hover:!-translate-y-0.5 hover:!shadow-[0_20px_40px_rgba(34,197,94,0.3),0_0_20px_rgba(34,197,94,0.2)]",icon:"pi pi-times",text:"",rounded:"",size:"small"})])]),x.value.length>0?(t(),r("div",Ze,[s("div",et,[$(R(le),{label:J(),image:X(),size:"xlarge",shape:"circle",class:"border-2 border-gray-200 shadow-md bg-gray-100 p-2"},null,8,["label","image"]),S.value.length>0?(t(),r("div",tt,[s("div",st,[(t(!0),r(F,null,w(S.value,([n,u])=>(t(),C(H,{key:n,value:u,"field-name":n,"format-label":h},null,8,["value","field-name"]))),128))])])):_("",!0)]),(t(!0),r(F,null,w(x.value,([n,u])=>(t(),r("div",{key:n,class:"flex items-center gap-3 mb-2 ml-4"},[s("h2",rt,p(u),1)]))),128))])):_("",!0),b.value.length>0?(t(),r("div",lt,[s("div",at,[(t(!0),r(F,null,w(b.value,([n,u])=>(t(),r("div",{key:n,class:"flex items-center justify-start bg-blue-50 rounded-lg p-1 gap-1"},[s("div",nt,[s("i",{class:I(W(n,y(n)))},null,2)]),s("div",ot,[s("span",{class:"text-gray-800 font-medium text-sm truncate max-w-32",title:u||"Not provided"},p(u||"Not provided"),9,it)])]))),128))])])):_("",!0),L.value.length>0?(t(),r("div",ct,[s("div",dt,[(t(!0),r(F,null,w(L.value,([n,u])=>(t(),r("div",{key:n,class:"flex flex-col items-center justify-between bg-green-50 rounded-lg p-1 border border-green-200"},[s("div",ut,[s("span",{class:"text-sm font-medium text-gray-700 truncate max-w-24",title:h(n)},p(h(n)),9,mt)]),s("div",pt,[s("span",ft,p(P(u||0,n)),1)])]))),128))])])):_("",!0),D.value.length>0?(t(),r("div",gt,[s("div",ht,[(t(!0),r(F,null,w(D.value,([n,u])=>(t(),r("div",{key:n,class:"flex-col items-center justify-between bg-gray-50 rounded-lg p-3"},[s("div",bt,[s("div",xt,[s("i",{class:I([R(Q)(n,y(n)),"text-blue-500"])},null,2),s("span",{class:"text-sm font-medium text-gray-700",title:h(n)},p(h(n)),9,_t)]),s("span",yt,p(P(u||0,n)),1)])]))),128))])])):_("",!0),N.value.length>0?(t(),r("div",vt,[s("div",Ft,[(t(!0),r(F,null,w(N.value,([n,u])=>(t(),r("div",{key:n,class:"flex-col items-center justify-between bg-purple-50 rounded-lg p-3 border border-purple-200"},[s("div",wt,[i[0]||(i[0]=s("i",{class:"pi pi-link text-purple-600"},null,-1)),s("span",{class:"text-sm font-medium text-gray-700",title:h(n)},p(h(n)),9,$t)]),s("div",St,[s("a",{href:u,target:"_blank",rel:"noopener noreferrer",class:"text-purple-600 hover:text-purple-800 underline",title:u},p(u||"No URL"),9,jt)])]))),128))])])):_("",!0),B(" "+p(M.value)+" ",1),s("div",Ct,[(t(!0),r(F,null,w(M.value,([n,u])=>(t(),r("div",{key:n,class:"space-y-1 pt-2 border-b border-gray-100 last:border-b-0"},[U(n)?(t(),r("div",kt,[u?.emoji?(t(),r("span",It,p(u.emoji),1)):u?.icon?(t(),r("i",{key:1,class:I([u.icon,"mr-2 text-gray-500"])},null,2)):_("",!0),s("span",{class:"truncate max-w-32",title:h(n)},p(h(n)),9,Lt)])):_("",!0),(t(),C(ne(T(n)),{value:e.item[n],"field-name":n,schema:e.schema,"format-label":h,"format-number":P,"get-schema-property":y,"get-field-currency-symbol":G},null,8,["value","field-name","schema"]))]))),128))]),s("div",Dt,[s("span",null,"Added: "+p(k(e.item.created_time)),1),e.item.last_edited_time!==e.item.created_time?(t(),r("span",Nt," â€¢ Updated: "+p(k(e.item.last_edited_time)),1)):_("",!0)])])):_("",!0)}}},Bt={class:"bg-white hover:shadow-lg transition-shadow p-4 border-2 border-black rounded-lg shadow-lg flex flex-col h-full"},qt={class:"text-center py-16 flex-1 flex flex-col items-center justify-center"},Mt={__name:"EmptyState",emits:["add-item"],setup(e){return(a,l)=>{const o=q;return t(),r("div",Bt,[s("div",qt,[l[2]||(l[2]=s("div",{class:"text-6xl mb-4"},"ðŸ“‹",-1)),l[3]||(l[3]=s("h3",{class:"text-2xl font-semibold text-gray-900 mb-2"},"No items yet",-1)),l[4]||(l[4]=s("p",{class:"text-gray-600 mb-6 text-center max-w-md"},"Start building your collection by adding your first item to get started.",-1)),$(o,{onClick:l[0]||(l[0]=f=>a.$emit("add-item")),class:"!px-6 !py-3 !bg-blue-600 !text-white !rounded-lg hover:!bg-blue-700 !transition-colors !font-medium !shadow-sm"},{default:O(()=>l[1]||(l[1]=[s("i",{class:"pi pi-plus mr-2"},null,-1),B("Add First Item ",-1)])),_:1,__:[1]})])])}}},At={class:"space-y-6"},Rt={key:1,class:"space-y-6"},Tt={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Ut={__name:"ListView",props:{loading:{type:Boolean,default:!1},loadingMore:{type:Boolean,default:!1},items:{type:Array,default:()=>[]},schema:{type:Object,default:null},hasMore:{type:Boolean,default:!1}},emits:["deleteItem","loadMore"],setup(e){const a=z(),l=()=>{a.push("/add")};return(o,f)=>(t(),r("div",At,[e.loading?(t(),C(E,{key:0,count:6,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"})):(t(),r("div",Rt,[e.schema?(t(),r("div",Tt,[(t(!0),r(F,null,w(e.items,m=>(t(),C(Ot,{key:m.id,item:m,schema:e.schema,onDeleteItem:o.deleteItem},null,8,["item","schema","onDeleteItem"]))),128)),!e.loading&&e.items.length===0?(t(),C(Mt,{key:0,onAddItem:l})):_("",!0),e.loadingMore?(t(),C(E,{key:1,count:3,class:"contents"})):_("",!0)])):_("",!0)])),e.hasMore&&!e.loading?(t(),C(we,{key:2,loading:e.loadingMore,onLoadMore:o.loadMore},null,8,["loading","onLoadMore"])):_("",!0)]))}},Vt={class:"home-view"},Pt={class:"space-y-8"},zt={__name:"HomeView",setup(e){const a=re(),l=v(()=>a.loading),o=v(()=>a.error),f=v(()=>a.items),m=v(()=>{if(!a.schema?.properties)return null;const h=a.getDatabaseInfo()?.schema?.properties||{};return{...a.schema,properties:Object.fromEntries(Object.entries(a.schema.properties).map(([k,y])=>[k,{...y,type:y.type,required:y.required||!1,emoji:y.emoji||null,icon:y.icon||null,number:y.number||null,select:y.select||null,multi_select:y.multi_select||null,...h[k]&&{number:{...y.number,format:h[k].number?.format||y.number?.format}}}]))}}),x=A(!1),b=A(""),S=A(""),L=A(!1),D=async()=>{try{const[g,h]=await Promise.allSettled([a.ensureSchemaLoaded(),a.fetchAllItems()]);g.status==="rejected"&&console.error("Schema loading failed:",g.reason),h.status==="rejected"&&console.error("Items loading failed:",h.reason),g.status==="fulfilled"&&h.status==="fulfilled"&&N()}catch(g){console.error("Failed to initialize:",g)}},N=()=>{const g=a.getDatabaseInfo();g&&(g.title&&(b.value=g.title),g.description&&(S.value=g.description))},M=async()=>{try{const[g,h]=await Promise.allSettled([a.fetchSchema(!0),a.fetchAllItems()]);g.status==="fulfilled"&&h.status==="fulfilled"?N():(console.error("Schema refresh failed:",g.status==="rejected"?g.reason:"Unknown error"),console.error("Items refresh failed:",h.status==="rejected"?h.reason:"Unknown error"))}catch(g){console.error("Failed to refresh schema:",g)}},T=async()=>{if(!(!L.value||x.value))try{x.value=!0}catch(g){console.error("Failed to load more:",g)}finally{x.value=!1}},U=async()=>{await D()},V=async g=>{if(confirm("Are you sure you want to delete this item?"))try{await a.deleteItem(g)}catch(h){console.error("Failed to delete item:",h)}};return oe(()=>{D()}),(g,h)=>(t(),r("div",Vt,[s("div",Pt,[$(ge,{loading:l.value,"database-title":b.value,"database-description":S.value,onRefreshSchema:M},null,8,["loading","database-title","database-description"]),$(_e,{error:o.value,onRetry:U},null,8,["error"]),$(Ut,{loading:l.value,"loading-more":x.value,items:f.value,schema:m.value,"has-more":L.value,onDeleteItem:V,onLoadMore:T},null,8,["loading","loading-more","items","schema","has-more"])])]))}},Gt=ie(zt,[["__scopeId","data-v-0b4c900d"]]);export{Gt as default};
