import{a as T,e as Z,f as R,g as P,h as f,i as ee,j as te,k as ae}from"./vendor-primevue-Bo0b_ULt.js";import{y,c as a,d as t,e as l,z as p,s as c,F as x,E as q,t as u,h as w,v as i,L as V,q as k,p as F,J as se}from"./vendor-vue-Bq-k71LZ.js";import{d as re,e as ne,h as oe,i as le,j as D,k as ce,l as ue,m as me,b as ie,n as de}from"./_plugin-vue_export-helper-DneQ0caX.js";const pe={key:0,class:"text-center py-8 text-gray-500"},ye={key:1,class:"space-y-6"},be={key:0,class:"absolute top-4 right-4"},ve={class:"space-y-2"},he=["for"],ge={key:0,class:"text-red-600 text-xs"},xe={key:1,class:"space-y-4"},ke={class:"grid grid-cols-1 gap-4"},_e=["for"],qe={key:0,class:"mr-2 text-lg"},Ve={key:2,class:"text-red-500 ml-1"},we={key:0,class:"text-red-600 block"},Ee={key:2,class:"space-y-4"},Fe={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ue=["for"],je={key:0,class:"mr-2 text-lg"},Ce={key:2,class:"text-red-500 ml-1"},Be={key:0,class:"text-red-600 block"},$e={key:3,class:"space-y-4"},Se={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ie=["for"],Le={key:0,class:"mr-2 text-lg"},Ne={class:"text-green-600 ml-1"},Oe={key:2,class:"text-red-500 ml-1"},Ae={class:"relative"},De={key:0,class:"text-red-600 block"},Te={key:4,class:"space-y-4"},ze={class:"space-y-4"},Me=["for"],Je={key:0,class:"mr-2 text-lg"},He={key:2,class:"text-red-500 ml-1"},Ge={class:"relative"},Ke={key:0,class:"text-red-600 block"},Qe={key:5,class:"space-y-4"},We={class:"grid grid-cols-1 gap-4"},Xe=["for"],Ye={key:0,class:"mr-2 text-lg"},Ze={key:2,class:"text-red-500 ml-1"},Re={class:"flex items-center gap-2"},Pe={key:0,class:"mt-2"},fe={class:"flex items-center gap-2"},et={key:2,class:"text-red-600 block"},tt={key:6,class:"space-y-4"},at={class:"grid grid-cols-1 gap-4"},st=["for"],rt={key:0,class:"mr-2 text-lg"},nt={key:2,class:"text-red-500 ml-1"},ot={key:3,class:"text-red-600 block"},lt={class:"flex justify-end gap-3 pt-6 border-t border-gray-200"},bt={__name:"FormFields",props:{editingItem:{type:Object,default:null},submitting:{type:Boolean,default:!1},formErrors:{type:Object,default:()=>({})}},emits:["submitForm","refreshSchema","update:formData","cancelForm"],setup(n,{emit:U}){const d=r=>_.editingItem?.[r]?.value||"",_=n,E=U,z=y(()=>_.editingItem?"Update Item":"Add Item"),M=y(()=>_.editingItem?"Updating...":"Adding..."),g=y(()=>_.editingItem?Object.entries(_.editingItem).map(([r,s])=>{let m=s.type;return s.multi_select&&Array.isArray(s.multi_select)&&(m="multi_select"),{name:r,type:m,required:s.required||!1,value:s.value||"",options:m==="select"||m==="multi_select"?le(s):[],icon:oe(r,m,s.number?.format),emoji:s.emoji||null,label:ne(r),placeholder:re(r,m,s.number?.format),format:s.number?.format,min:m==="number"?0:void 0,step:m==="number"?s.number?.format&&s.number?.format!=="number"?500:1:void 0,id:s.id,number:s.number,select:s.select,multi_select:s.multi_select,...Object.fromEntries(Object.entries(s).filter(([v])=>!["number","select","multi_select"].includes(v)))}}):[]),j=y(()=>g.value.filter(r=>r.type==="title")),C=y(()=>g.value.filter(r=>{const s=r.name.toLowerCase();return s.includes("email")||s.includes("phone")||s.includes("contact")||r.type==="email"||r.type==="phone"})),B=y(()=>g.value.filter(r=>r.type==="number"&&r.format&&r.format!=="number")),$=y(()=>g.value.filter(r=>r.type==="number"&&(!r.format||r.format==="number"))),S=y(()=>g.value.filter(r=>r.type==="checkbox")),I=y(()=>g.value.filter(r=>r.type==="select"||r.type==="multi_select")),L=y(()=>g.value.filter(r=>{const s=r.name.toLowerCase(),m=s.includes("email")||s.includes("phone")||s.includes("contact")||r.type==="email"||r.type==="phone";return r.type!=="title"&&r.type!=="number"&&r.type!=="checkbox"&&r.type!=="select"&&r.type!=="multi_select"&&!m})),b=(r,s)=>{E("update:formData",{[r]:s})},N=r=>{const s=d(r);if(Array.isArray(s))return s;if(typeof s=="string"&&s)try{const m=JSON.parse(s);return Array.isArray(m)?m:[]}catch{return s.split(",").map(v=>v.trim()).filter(v=>v)}return[]},O=(r,s)=>{E("update:formData",{[r]:s})},J=(r,s)=>{const v=N(r).filter(h=>typeof h=="string"&&typeof s=="string"?h!==s:typeof h=="object"&&typeof s=="object"?h.value!==s.value:h!==s);O(r,v)},H=()=>{E("submitForm")},G=()=>{E("cancelForm")},K=()=>{E("refreshSchema")};return(r,s)=>{const m=T,v=Z,h=R,A=P,Q=f,W=ee,X=te,Y=ae;return t(),a("form",{onSubmit:se(H,["prevent"]),class:"space-y-6 relative"},[g.value.length?(t(),a("div",ye,[S.value.length>0?(t(),a("div",be,[l("div",ve,[(t(!0),a(x,null,q(S.value,e=>(t(),a("div",{key:e.name,class:"flex items-center gap-2 p-2 bg-gray-50 rounded-lg border border-gray-200"},[p(v,{id:e.name,"model-value":d(e.name),"onUpdate:modelValue":o=>b(e.name,o),binary:!0},null,8,["id","model-value","onUpdate:modelValue"]),l("label",{for:e.name,class:"text-sm text-gray-700 cursor-pointer"},u(e.description||e.label),9,he),n.formErrors[e.name]?(t(),a("small",ge,u(n.formErrors[e.name]),1)):c("",!0)]))),128))])])):c("",!0),j.value.length>0?(t(),a("div",xe,[l("div",ke,[(t(!0),a(x,null,q(j.value,e=>(t(),a("div",{key:e.name,class:"space-y-2"},[l("label",{for:e.name,class:"block text-sm font-medium text-gray-700"},[e.emoji?(t(),a("span",qe,u(e.emoji),1)):e.icon?(t(),a("i",{key:1,class:i([e.icon,"mr-2 text-gray-500"])},null,2)):c("",!0),w(" "+u(e.label)+" ",1),e.required?(t(),a("span",Ve,"*")):c("",!0)],8,_e),p(h,{id:e.name,type:e.type,placeholder:e.placeholder,required:e.required,"model-value":d(e.name),"onUpdate:modelValue":o=>b(e.name,o),class:i([{"p-invalid":n.formErrors[e.name]},"w-full"])},null,8,["id","type","placeholder","required","model-value","onUpdate:modelValue","class"]),n.formErrors[e.name]?(t(),a("small",we,u(n.formErrors[e.name]),1)):c("",!0)]))),128))])])):c("",!0),C.value.length>0?(t(),a("div",Ee,[l("div",Fe,[(t(!0),a(x,null,q(C.value,e=>(t(),a("div",{key:e.name,class:"space-y-2"},[l("label",{for:e.name,class:"block text-sm font-medium text-gray-700"},[e.emoji?(t(),a("span",je,u(e.emoji),1)):e.icon?(t(),a("i",{key:1,class:i([e.icon,"mr-2 text-gray-500"])},null,2)):c("",!0),w(" "+u(e.label)+" ",1),e.required?(t(),a("span",Ce,"*")):c("",!0)],8,Ue),p(h,{id:e.name,type:e.type,placeholder:e.placeholder,required:e.required,"model-value":d(e.name),"onUpdate:modelValue":o=>b(e.name,o),class:i([{"p-invalid":n.formErrors[e.name]},"w-full"])},null,8,["id","type","placeholder","required","model-value","onUpdate:modelValue","class"]),n.formErrors[e.name]?(t(),a("small",Be,u(n.formErrors[e.name]),1)):c("",!0)]))),128))])])):c("",!0),B.value.length>0?(t(),a("div",$e,[l("div",Se,[(t(!0),a(x,null,q(B.value,e=>(t(),a("div",{key:e.name,class:"space-y-2"},[l("label",{for:e.name,class:"block text-sm font-medium text-gray-700"},[e.emoji?(t(),a("span",Le,u(e.emoji),1)):e.icon?(t(),a("i",{key:1,class:i([e.icon,"mr-2 text-gray-500"])},null,2)):c("",!0),w(" "+u(e.label)+" ",1),l("span",Ne,"("+u(V(D)[e.format]?.currency||"USD")+")",1),e.required?(t(),a("span",Oe,"*")):c("",!0)],8,Ie),l("div",Ae,[p(A,{id:e.name,placeholder:e.placeholder,required:e.required,min:e.min||0,max:e.max,step:e.step,"model-value":d(e.name),"onUpdate:modelValue":o=>b(e.name,o),class:i([{"p-invalid":n.formErrors[e.name]},"w-full"]),showButtons:"",buttonLayout:"horizontal",mode:"currency",currency:V(D)[e.format]?.currency||"USD"},{incrementbuttonicon:k(()=>s[1]||(s[1]=[l("span",{class:"pi pi-plus"},null,-1)])),decrementbuttonicon:k(()=>s[2]||(s[2]=[l("span",{class:"pi pi-minus"},null,-1)])),_:2},1032,["id","placeholder","required","min","max","step","model-value","onUpdate:modelValue","class","currency"])]),n.formErrors[e.name]?(t(),a("small",De,u(n.formErrors[e.name]),1)):c("",!0)]))),128))])])):c("",!0),$.value.length>0?(t(),a("div",Te,[l("div",ze,[(t(!0),a(x,null,q($.value,e=>(t(),a("div",{key:e.name,class:"space-y-2"},[l("label",{for:e.name,class:"block text-sm font-medium text-gray-700"},[e.emoji?(t(),a("span",Je,u(e.emoji),1)):e.icon?(t(),a("i",{key:1,class:i([e.icon,"mr-2 text-gray-500"])},null,2)):c("",!0),w(" "+u(e.label)+" ",1),e.required?(t(),a("span",He,"*")):c("",!0)],8,Me),l("div",Ge,[p(A,{id:e.name,placeholder:e.placeholder,required:e.required,min:e.min||0,max:e.max,step:e.step,"model-value":d(e.name),"onUpdate:modelValue":o=>b(e.name,o),class:i([{"p-invalid":n.formErrors[e.name]},"w-full"]),showButtons:"",buttonLayout:"horizontal"},{incrementbuttonicon:k(()=>s[3]||(s[3]=[l("i",{class:"pi pi-plus"},null,-1)])),decrementbuttonicon:k(()=>s[4]||(s[4]=[l("i",{class:"pi pi-minus"},null,-1)])),_:2},1032,["id","placeholder","required","min","max","step","model-value","onUpdate:modelValue","class"])]),n.formErrors[e.name]?(t(),a("small",Ke,u(n.formErrors[e.name]),1)):c("",!0)]))),128))])])):c("",!0),I.value.length>0?(t(),a("div",Qe,[l("div",We,[(t(!0),a(x,null,q(I.value,e=>(t(),a("div",{key:e.name,class:"space-y-2"},[l("label",{for:e.name,class:"block text-sm font-medium text-gray-700"},[e.emoji?(t(),a("span",Ye,u(e.emoji),1)):e.icon?(t(),a("i",{key:1,class:i([e.icon,"mr-2 text-gray-500"])},null,2)):c("",!0),w(" "+u(e.label)+" ",1),e.required?(t(),a("span",Ze,"*")):c("",!0)],8,Xe),e.type==="select"?(t(),a(x,{key:0},[p(Q,{id:e.name,required:e.required,"model-value":d(e.name),"onUpdate:modelValue":o=>b(e.name,o),options:e.options,optionLabel:"label",optionValue:"value",placeholder:`Select ${e.label}`,class:i([{"p-invalid":n.formErrors[e.name]},"w-full"])},{option:k(o=>[l("div",Re,[o.option.color?(t(),a("span",{key:0,class:i([V(ce)(o.option.color),"w-3 h-3 rounded-full"])},null,2)):c("",!0),l("span",null,u(o.option.label),1)])]),_:2},1032,["id","required","model-value","onUpdate:modelValue","options","placeholder","class"]),d(e.name)?(t(),a("div",Pe,[l("div",fe,[l("span",{class:i([V(ue)(d(e.name),e),"px-3 py-1.5 text-sm rounded-full border font-medium"])},u(V(me)(d(e.name),e)),3)])])):c("",!0)],64)):e.type==="multi_select"?(t(),F(W,{key:1,id:e.name,"model-value":N(e.name),"onUpdate:modelValue":o=>O(e.name,o),options:e.options,optionLabel:"label",optionValue:"value",placeholder:`Select ${e.label}`,class:i([{"p-invalid":n.formErrors[e.name]},"w-full"]),filter:!0,allowEmpty:!0,display:"chip"},{option:k(o=>[l("div",{class:i(["flex items-center gap-2 px-2 py-1 rounded",V(de)(o.option)])},[l("span",null,u(o.option.label),1)],2)]),chip:k(o=>[l("div",{class:i(["flex items-center gap-2 px-3 py-1.5 text-sm rounded-full border font-medium",V(ie)(o.value,e)])},[l("span",null,u(typeof o.value=="string"?o.value:o.value?.label||o.value?.value||o.value),1),p(m,{type:"button",onClick:it=>J(e.name,o.value||o),class:"ml-1 hover:opacity-75 p-0 w-6 h-6 text-gray-700 hover:text-gray-900",icon:"pi pi-times",size:"small",link:"",rounded:""},null,8,["onClick"])],2)]),_:2},1032,["id","model-value","onUpdate:modelValue","options","placeholder","class"])):c("",!0),n.formErrors[e.name]?(t(),a("small",et,u(n.formErrors[e.name]),1)):c("",!0)]))),128))])])):c("",!0),L.value.length>0?(t(),a("div",tt,[l("div",at,[(t(!0),a(x,null,q(L.value,e=>(t(),a("div",{key:e.name,class:"space-y-2"},[l("label",{for:e.name,class:"block text-sm font-medium text-gray-700"},[e.emoji?(t(),a("span",rt,u(e.emoji),1)):e.icon?(t(),a("i",{key:1,class:i([e.icon,"mr-2 text-gray-500"])},null,2)):c("",!0),w(" "+u(e.label)+" ",1),e.required?(t(),a("span",nt,"*")):c("",!0)],8,st),e.type==="date"?(t(),F(X,{key:0,id:e.name,placeholder:e.placeholder,required:e.required,"model-value":d(e.name),"onUpdate:modelValue":o=>b(e.name,o),class:i([{"p-invalid":n.formErrors[e.name]},"w-full"]),dateFormat:"yy-mm-dd"},null,8,["id","placeholder","required","model-value","onUpdate:modelValue","class"])):e.type==="rich_text"||e.type==="textarea"?(t(),F(Y,{key:1,id:e.name,placeholder:e.placeholder,required:e.required,"model-value":d(e.name),"onUpdate:modelValue":o=>b(e.name,o),class:i([{"p-invalid":n.formErrors[e.name]},"w-full"]),rows:"3"},null,8,["id","placeholder","required","model-value","onUpdate:modelValue","class"])):(t(),F(h,{key:2,id:e.name,type:e.type,placeholder:e.placeholder,required:e.required,"model-value":d(e.name),"onUpdate:modelValue":o=>b(e.name,o),class:i([{"p-invalid":n.formErrors[e.name]},"w-full"])},null,8,["id","type","placeholder","required","model-value","onUpdate:modelValue","class"])),n.formErrors[e.name]?(t(),a("small",ot,u(n.formErrors[e.name]),1)):c("",!0)]))),128))])])):c("",!0)])):(t(),a("div",pe,[s[0]||(s[0]=l("p",null,"No form fields available.",-1)),p(m,{onClick:K,severity:"secondary",label:"Retry",class:"mt-2"})])),l("div",lt,[p(m,{type:"button",onClick:G,label:"Cancel",severity:"secondary"}),p(m,{type:"submit",disabled:n.submitting,loading:n.submitting,label:n.submitting?M.value:z.value,severity:"primary"},null,8,["disabled","loading","label"])])],32)}}},ct={class:"mb-8"},ut={key:0,class:"flex items-center gap-4 mb-4"},mt={class:"text-3xl font-bold text-gray-900 mb-2"},vt={__name:"PageHeader",props:{mode:{type:String,required:!0,validator:n=>["add","edit"].includes(n)},databaseTitle:{type:String,required:!0},showBackButton:{type:Boolean,default:!1}},emits:["goBack"],setup(n){return(U,d)=>{const _=T;return t(),a("div",ct,[n.showBackButton?(t(),a("div",ut,[p(_,{onClick:d[0]||(d[0]=E=>U.$emit("goBack")),severity:"secondary",text:""},{default:k(()=>d[1]||(d[1]=[l("i",{class:"pi pi-arrow-left"},null,-1),w(" Back ",-1)])),_:1,__:[1]})])):c("",!0),l("h1",mt,u(n.mode==="add"?"Add New":"Edit")+" "+u(n.databaseTitle),1),l("p",{class:i(["text-gray-600",{"mt-2":n.mode==="edit"}])},u(n.mode==="add"?`Fill out the form below to add a new ${n.databaseTitle.toLowerCase()}`:`Update the ${n.databaseTitle.toLowerCase()} information below`),3)])}}};export{vt as _,bt as a};
